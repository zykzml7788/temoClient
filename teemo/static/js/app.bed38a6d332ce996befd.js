webpackJsonp([1],{"0ZwN":function(t,e){},"3OXz":function(t,e){},"4/hK":function(t,e){},"9LBb":function(t,e){},A0DI:function(t,e){},DFnS:function(t,e){},Dd12:function(t,e){},Gn6k:function(t,e,a){"use strict";var s=a("fZjL"),i=a.n(s),o=(a("zsJu"),a("Luva")),l=(a("dHhM"),a("l9mu")),n=a.n(l),r=a("F/EA");console.log(Object(o.a)(12));var c={name:"mind-editor",props:{importData:{type:Object,default:function(){return{}}},AccessKey:{type:String,default:""},SecretKey:{type:String,default:""},Domain:{type:String,default:""},scope:{type:String,default:""},isImageUpload:{type:Boolean,default:!0},template:{type:String,default:"right"},theme:{type:String,default:"fresh-blue"},saveShow:{type:Boolean,default:!0},id:{type:String,default:Object(o.a)(12)}},components:{},data:function(){return{minder:null,navIndex:0,templateList:{default:"思维导图",tianpan:"天盘图",structure:"组织结构图",filetree:"目录组织图",right:"逻辑结构图","fish-bone":"鱼骨头图"},themeList:{classic:"脑图经典","classic-compact":"紧凑经典",snow:"温柔冷光","snow-compact":"紧凑冷光",fish:"鱼骨图",wire:"线框","fresh-blue":"天空蓝",tianpan:"经典天盘","tianpan-compact":"紧凑天盘"},rootData:{root:{children:[],data:{text:"默认节点",id:Object(o.a)(12)}},template:"structure",theme:"fresh-blue"}}},mounted:function(){},methods:{savebtn:function(){var t=this.minder.exportJson();this.$emit("saveData",t)},exportHandle:function(t){var e=this;console.log("导出");var a=this;0===t?a.minder.exportData("png").then(function(t){var e=document.createElement("a");e.setAttribute("href",t);var s=a.rootData.root.data.text||"无标题";e.setAttribute("download",s),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}):1===t&&this.minder.exportData("png").then(function(t){var a=new n.a;a.addImage(t,"PNG",0,0,0,0),a.save((e.rootData.root.data.text||"无标题")+".pdf")})},getThemeList:function(){},renddata:function(){var t=this;t.$nextTick(function(){var e=document.getElementById(t.id);setTimeout(function(){t.minder=window.editor=new r(e).minder,t.$set(t.rootData,"root",t.rootData.root),t.minder.importJson(t.rootData),t.$emit("minderHandle",t.minder),t.minder.on("contentchange",function(e){var a=t.minder.exportJson();console.log("exportData",a),t.$emit("exportData",a)}),t.minder.on("selectionchange",function(e){t.minder=e.minder;var a=e.minder.getSelectedNode();t.currentNode=a,a&&a.parent&&setTimeout(function(){a.parent.layout()},0),t.lock,t.lock=!0}),t.minder.on("beforeExecCommand",function(t){/arrange/i.test(t.commandName)||/append/i.test(t.commandName)||/remove/i.test(t.commandName)}),t.minder.on("AfterExecCommand",function(t){/append/i.test(t.commandName)||/remove/i.test(t.commandName)})},300)})},removerEditor:function(){var t=document.getElementById(this.id);t.parentElement.removeChild(t)}},watch:{importData:{handler:function(t,e){""!=this.importData&&null!=this.importData&&(this.rootData.root=this.importData),null!=this.theme&&""!=this.theme&&(this.rootData.theme=this.theme),0==i()(this.rootData.root).length&&(this.rootData.root={data:{text:"默认节点",id:Object(o.a)(12)},children:[]}),this.renddata()},deep:!0,immediate:!0}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"minder-editor-container"},[a("div",{staticClass:"tools"},[a("button",{staticClass:"basebtn",on:{click:function(e){t.minder.execCommand("camera",t.minder.getRoot(),600)}}},[t._v("重新定位")]),t._v(" "),a("button",{staticClass:"basebtn",on:{click:function(e){return t.minder.execCommand("zoomIn")}}},[t._v("放大")]),t._v(" "),a("button",{staticClass:"basebtn",on:{click:function(e){return t.minder.execCommand("zoomOut")}}},[t._v("缩小")]),t._v(" "),a("button",{staticClass:"basebtn",on:{click:t.removerEditor}},[t._v("移除")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.rootData.template,expression:"rootData.template"}],staticClass:"baseSelect",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.rootData,"template",e.target.multiple?a:a[0])},function(e){return t.minder.execCommand("template",t.rootData.template)}]}},t._l(t.templateList,function(e,s){return a("option",{key:s,domProps:{value:s}},[t._v(t._s(e))])}),0),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.rootData.theme,expression:"rootData.theme"}],staticClass:"baseSelect",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.rootData,"theme",e.target.multiple?a:a[0])},function(e){return t.minder.execCommand("theme",t.rootData.theme)}]}},t._l(t.themeList,function(e,s){return a("option",{key:s,domProps:{value:s}},[t._v(t._s(e))])}),0),t._v(" "),t.saveShow?a("button",{staticClass:"basebtn",staticStyle:{float:"right"},on:{click:t.savebtn}},[t._v("保存")]):t._e(),t._v(" "),a("button",{staticClass:"basebtn",staticStyle:{float:"right"},on:{click:function(e){return t.exportHandle(0)}}},[t._v("导出png图片")])]),t._v(" "),a("div",{attrs:{id:t.id}})])},staticRenderFns:[]};var u=a("VU/8")(c,d,!1,function(t){a("oxN3")},"data-v-55828112",null);e.a=u.exports},GvRF:function(t,e){},HuCY:function(t,e){},Ieq5:function(t,e){},N9nc:function(t,e,a){t.exports=a.p+"static/img/timo.7a0b0f7.png"},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),i={name:"Confirm",data:function(){return{dialogVisible:this.dialog}},props:{dialog:{type:Boolean,required:!0},msg:{type:String,required:!0}},methods:{closeDialog:function(t){this.dialogVisible=!1,this.$emit("closeCf",this.dialogVisible,t)}},watch:{dialog:{immediate:!0,deep:!0,handler:function(t){this.dialogVisible=t}}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticStyle:{"font-weight":"bold"},attrs:{title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e},close:function(e){return t.closeDialog(!1)}}},[a("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.msg))]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.closeDialog(!1)}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.closeDialog(!0)}}},[t._v("确 定")])],1)])},staticRenderFns:[]},l={name:"headers",data:function(){return{isCollapse:!1,activeIndex:"1",activeIndex2:"1",msg:"你确定要注销吗?",dialog:!1,userName:JSON.parse(localStorage.getItem("userInfo")).userName}},methods:{handleSelect:function(t){switch(t){case"1":this.$router.push("/main");break;case"2":this.$router.push("/project");break;case"3-1":this.$router.push("/mind");break;case"3-2":this.$router.push("/case");break;case"3-3":this.$router.push("/autocase");break;case"4-1":this.$router.push("/database/config");break;case"4-2":this.$router.push("/database/script");break;case"5-1":this.$router.push("/task");break;case"5-2":this.$router.push("/timingTask");break;case"5-3":this.$router.push("/taskResult");break;case"7":this.$router.push("/apiUtil");break;case"8-1":this.$router.push("/dingTalk")}},closeConfirm:function(t,e){this.dialog=t},logout:function(){var t=this;this.$confirm("是否要注销？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios.post("/apis/logout").then(function(e){!0===e.data.success&&(localStorage.removeItem("userInfo"),t.$router.push({path:"/"}))})})}},components:{comfirm:a("VU/8")(i,o,!1,null,null,null).exports},created:function(){console.log("楷楷最帅！")}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{"background-color":"#2c3259",padding:"1px"},attrs:{id:"header"}},[t._m(0),t._v(" "),s("div",{staticStyle:{margin:"10px","background-color":"#2c3259"},attrs:{id:"user"}},[s("div",{staticStyle:{display:"inline-block",width:"20%",height:"100%","margin-left":"20px"}},[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.userName,placement:"top-start"}},[s("img",{staticClass:"circle",staticStyle:{width:"55px",height:"55px"},attrs:{src:a("N9nc"),alt:""}})])],1),t._v(" "),s("div",{staticStyle:{display:"inline-block",margin:"15px"}},[s("div",[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.userName,placement:"top-start"}},[s("strong",{staticClass:"el-icon-user-solid",staticStyle:{color:"white","margin-left":"5px","font-size":"smaller"}},[t._v("\n            在线\n          ")])])],1),t._v(" "),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"注销一下～",placement:"top-start"}},[s("el-button",{staticStyle:{margin:"15px 0 0 20px"},attrs:{size:"mini",type:"danger",icon:"el-icon-switch-button",circle:""},on:{click:t.logout}})],1)],1)]),t._v(" "),s("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"1",collapse:t.isCollapse,id:"cehuaMenu",width:"20%","background-color":"#2c3259","text-color":"white"},on:{select:t.handleSelect}},[s("el-menu-item",{attrs:{index:"1"}},[s("i",{staticClass:"el-icon-menu",staticStyle:{color:"white"}}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("主页")])]),t._v(" "),s("el-menu-item",{attrs:{index:"2"}},[s("i",{staticClass:"el-icon-menu",staticStyle:{color:"white"}}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("项目管理")])]),t._v(" "),s("el-submenu",{attrs:{index:"3"}},[s("template",{slot:"title"},[s("i",{staticClass:"el-icon-location",staticStyle:{color:"white"}}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("用例管理")])]),t._v(" "),s("el-menu-item",{attrs:{index:"3-1"}},[t._v("功能脑图管理")]),t._v(" "),s("el-menu-item",{attrs:{index:"3-3"}},[t._v("自动化用例集管理")])],2),t._v(" "),s("el-submenu",{attrs:{index:"4"}},[s("template",{slot:"title"},[s("i",{staticClass:"el-icon-location",staticStyle:{color:"white"}}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("数据库管理")])]),t._v(" "),s("el-menu-item",{attrs:{index:"4-1"}},[t._v("数据源管理")]),t._v(" "),s("el-menu-item",{attrs:{index:"4-2"}},[t._v("脚本管理")])],2),t._v(" "),s("el-submenu",{attrs:{index:"5"}},[s("template",{slot:"title"},[s("i",{staticClass:"el-icon-document",staticStyle:{color:"white"}}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("任务管理")])]),t._v(" "),s("el-menu-item",{attrs:{index:"5-1"}},[t._v("普通任务管理")]),t._v(" "),s("el-menu-item",{attrs:{index:"5-2"}},[t._v("定时任务管理")]),t._v(" "),s("el-menu-item",{attrs:{index:"5-3"}},[t._v("执行记录管理")])],2),t._v(" "),s("el-menu-item",{attrs:{index:"7"}},[s("i",{staticClass:"el-icon-document",staticStyle:{color:"white"}}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("调试工具")])]),t._v(" "),s("el-submenu",{attrs:{index:"8"}},[s("template",{slot:"title"},[s("i",{staticClass:"el-icon-document",staticStyle:{color:"white"}}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("配置管理")])]),t._v(" "),s("el-menu-item",{attrs:{index:"8-1"}},[t._v("钉钉通知")]),t._v(" "),s("el-menu-item",{attrs:{index:"8-2"}},[t._v("邮箱管理")])],2),t._v(" "),s("el-menu-item",{attrs:{index:"9"}},[s("i",{staticClass:"el-icon-document",staticStyle:{color:"white"}}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("个人中心")])])],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{height:"80px",margin:"20px"}},[e("h2",{staticStyle:{color:"white"}},[this._v("Teemo")]),this._v(" "),e("p",{staticStyle:{"font-weight":"normal","font-size":"smaller",color:"#eaeaea"}},[this._v("AutoTest For Api")])])}]};var r={created:function(){var t=this;setTimeout(function(){t.activeTab=t.$store.state.worktab.current.name},500)},watch:{"$store.state.worktab.current":function(t){this.activeTab=t.name}},computed:{worktabs:function(){return this.$store.state.worktab.list}},data:function(){return{activeTab:"main"}},methods:{clickTab:function(t){this.$router.push(this.worktabs[1*t.index].path)},removeTab:function(t){this.$store.dispatch("worktabRemove",t)}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cp-worktab"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-remove":t.removeTab,"tab-click":t.clickTab},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},t._l(t.worktabs,function(t){return a("el-tab-pane",{key:t.name,attrs:{label:t.tabname,name:t.name,closable:"main"!==t.name}})}),1)],1)},staticRenderFns:[]},d={name:"App",components:{Headers:a("VU/8")(l,n,!1,function(t){a("Dd12")},"data-v-572baf03",null).exports,Worktab:a("VU/8")(r,c,!1,null,null,null).exports},data:function(){return{login:a("VtmL")}},computed:{closingPage:function(){return this.$store.state.closingPage}}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return"/"===this.$route.path?e("div",{staticClass:"main",style:{backgroundImage:"url("+this.login+")"},attrs:{id:"app"}},[e("router-view")],1):e("el-container",{staticStyle:{height:"100%"}},[e("el-aside",{staticClass:"el-aside",staticStyle:{height:"100%",padding:"0",margin:"0","background-color":"#2c3259"},attrs:{width:"210px"}},[e("headers")],1),this._v(" "),e("el-main",{staticStyle:{height:"100%",padding:"0"}},[e("worktab"),this._v(" "),e("div",{staticStyle:{"background-color":"ghostwhite",padding:"20px"}},[e("div",{staticStyle:{"background-color":"white",padding:"20px",height:"100%"},attrs:{id:"app"}},[e("keep-alive",{attrs:{exclude:this.closingPage}},[e("router-view")],1)],1)]),this._v(" "),e("div",{staticStyle:{"text-align":"right"}},[e("h5",{staticStyle:{"margin-right":"20px"}},[this._v("备案/许可证编号:"),e("a",{attrs:{href:"http://www.beian.miit.gov.cn/"}},[this._v("浙ICP备20012551号")])])])],1)],1)},staticRenderFns:[]};var p=a("VU/8")(d,u,!1,function(t){a("hU/K")},null,null).exports,m=a("/ocq"),h=a("mvHQ"),f=a.n(h),v={data:function(){return{logining:!1,loginInfo:{userName:"",password:""},rules2:{userName:[{required:!0,message:"please enter your account",trigger:"change"}],password:[{required:!0,message:"enter your password",trigger:"change"}]},checked:!1}},methods:{handleSubmit:function(){var t=this;this.$refs.ruleForm2.validate(function(e){e&&t.$axios.post("/apis/login",t.loginInfo).then(function(e){!0===e.data.success?(localStorage.setItem("userInfo",f()(e.data.data)),t.$router.push({path:"/main"})):t.$alert(e.data.msg,"登入失败")})})}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-container"},[a("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm login-page",attrs:{model:t.loginInfo,rules:t.rules2,"status-icon":"","label-position":"left","label-width":"0px"}},[a("h3",{staticClass:"title",staticStyle:{color:"white"}},[t._v("Teemo Login")]),t._v(" "),a("el-form-item",{attrs:{prop:"userName"}},[a("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"用户名"},model:{value:t.loginInfo.userName,callback:function(e){t.$set(t.loginInfo,"userName",e)},expression:"loginInfo.userName"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},model:{value:t.loginInfo.password,callback:function(e){t.$set(t.loginInfo,"password",e)},expression:"loginInfo.password"}})],1),t._v(" "),a("el-checkbox",{staticClass:"rememberme",staticStyle:{color:"white",float:"left",margin:"5px 0  10px 0"},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("Remember Me\n    ")]),t._v(" "),a("el-link",{staticStyle:{float:"right"},attrs:{type:"primary",href:"https://www.baidu.com"}},[t._v("没有账号？点击注册")]),t._v(" "),a("el-form-item",{staticStyle:{width:"100%"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:t.logining},on:{click:t.handleSubmit}},[t._v("Login")])],1)],1)],1)},staticRenderFns:[]};var b=a("VU/8")(v,g,!1,function(t){a("qeQr")},"data-v-1166b567",null).exports,y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"添加环境",visible:t.$store.state.addenvshow,"append-to-body":!0,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.$store.state,"addenvshow",e)},close:t.closeAddEnv}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"环境名称",prop:"envName"}},[a("el-input",{attrs:{maxlength:"30"},model:{value:t.form.envName,callback:function(e){t.$set(t.form,"envName",e)},expression:"form.envName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"域名",prop:"host"}},[a("el-input",{attrs:{maxlength:"50"},model:{value:t.form.host,callback:function(e){t.$set(t.form,"host",e)},expression:"form.host"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"端口号",prop:"port"}},[a("el-input",{attrs:{maxlength:"6"},model:{value:t.form.port,callback:function(e){t.$set(t.form,"port",t._n(e))},expression:"form.port"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addEnv}},[t._v("添 加")]),t._v(" "),a("el-button",{on:{click:t.closeAddEnv}},[t._v("取 消")])],1)],1)},staticRenderFns:[]},_=a("VU/8")({data:function(){return{rules:{envName:[{required:!0,message:"请输入环境名称",trigger:"blur"}],host:[{required:!0,message:"请输入域名",trigger:"blur"}],port:[{required:!0,message:"请输入端口号",trigger:"blur"},{type:"number",message:"端口号必须为数字",trigger:"blur"}]},form:{envName:"",host:"",port:""}}},methods:{addEnv:function(){var t=this,e={envName:this.form.envName,host:this.form.host,port:this.form.port};this.$refs.form.validate(function(a){a&&(t.$store.commit("appendEnv",e),t.closeAddEnv())})},closeAddEnv:function(){this.$refs.form.resetFields(),this.$store.commit("changeAddEnvShow",!1)}}},y,!1,null,null,null).exports,k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"修改环境",visible:t.$store.state.editenvshow,"append-to-body":!0,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.$store.state,"editenvshow",e)},close:t.closeEditEnv}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"环境名称",prop:"envName"}},[a("el-input",{model:{value:t.form.envName,callback:function(e){t.$set(t.form,"envName",e)},expression:"form.envName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"域名",prop:"host"}},[a("el-input",{model:{value:t.form.host,callback:function(e){t.$set(t.form,"host",e)},expression:"form.host"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"端口号",prop:"port"}},[a("el-input",{model:{value:t.form.port,callback:function(e){t.$set(t.form,"port",t._n(e))},expression:"form.port"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.editEnv}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:t.closeEditEnv}},[t._v("取 消")])],1)],1)},staticRenderFns:[]},x=a("VU/8")({data:function(){return{rules:{envName:[{required:!0,message:"请输入环境名称",trigger:"blur"}],host:[{required:!0,message:"请输入域名",trigger:"blur"}],port:[{required:!0,message:"请输入端口号",trigger:"blur"},{type:"number",message:"端口号必须为数字",trigger:"blur"}]},form:{id:this.$store.state.envDetail.id,envId:this.$store.state.envDetail.envId,envName:this.$store.state.envDetail.envName,host:this.$store.state.envDetail.host,port:this.$store.state.envDetail.port}}},methods:{editEnv:function(){var t=this,e={id:this.form.id,envId:this.form.envId,envName:this.form.envName,host:this.form.host,port:this.form.port};this.$refs.form.validate(function(a){a&&(t.$store.commit("editEnv",e),t.closeEditEnv())})},closeEditEnv:function(){this.$store.commit("changeEditEnvShow",!1),this.$refs.form.resetFields()}},watch:{"$store.state.envDetail":function(t){this.form=t}}},k,!1,null,null,null).exports,w={data:function(){return{rules:{pname:[{required:!0,message:"请输入项目名称",trigger:"blur"}]},dialogTableVisible:!1,dialogFormVisible:!1,form:{pname:""},formLabelWidth:"80px"}},methods:{showEnv:function(){this.$store.commit("changeAddEnvShow",!0)},showEditEnv:function(t,e){var a={id:t,envId:e.envId,envName:e.envName,host:e.host,port:e.port};this.$store.commit("setEnvDetail",a),this.$store.commit("changeEditEnvShow",!0)},delEnv:function(t){this.$store.commit("rmEnvById",t)},addProject:function(){var t=this,e={pname:this.form.pname,envs:this.envList};this.$refs.form.validate(function(a){a&&t.$axios.post("/apis/project",e).then(function(e){t.$notify({title:"成功",type:"success",message:e.data.msg}),t.closeAddProjectView()}).catch(function(e){t.$notify({title:"失败",type:"error",message:e})})})},closeAddProjectView:function(){this.$refs.form.resetFields(),this.$store.commit("changeAddProjectShow",!1),this.$store.commit("clearEnvList"),this.$emit("getProjects")}},computed:{envList:function(){return this.$store.getters.getEnvList}},components:{addenv:_,editenv:x}},S={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticStyle:{height:"100%"},attrs:{title:"新增项目",visible:t.$store.state.addprojectshow,"close-on-click-modal":!1,"append-to-body":!0},on:{"update:visible":function(e){return t.$set(t.$store.state,"addprojectshow",e)},close:t.closeAddProjectView}},[a("addenv"),t._v(" "),a("editenv"),t._v(" "),a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"项目名称","label-width":t.formLabelWidth,prop:"pname"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.pname,callback:function(e){t.$set(t.form,"pname",e)},expression:"form.pname"}})],1),t._v(" "),a("br"),t._v(" "),a("div",{staticStyle:{"text-align":"left"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.showEnv}},[t._v("添加环境")])],1),t._v(" "),a("div",[a("el-divider",{attrs:{"content-position":"left"}},[t._v("项目环境")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.envList,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"envName",label:"环境名称",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"host",label:"域名",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"port",label:"端口号"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.showEditEnv(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.delEnv(e.$index)}}},[t._v("移除")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addProject}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:t.closeAddProjectView}},[t._v("取 消")])],1)],1)},staticRenderFns:[]},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticStyle:{height:"100%"},attrs:{title:"项目详情",visible:t.$store.state.projectdetailshow,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.$store.state,"projectdetailshow",e)},close:t.closeDetail}},[a("el-form",{ref:"form"},[a("el-form-item",{attrs:{label:"项目名称","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:t.$store.state.projectDetail.name,callback:function(e){t.$set(t.$store.state.projectDetail,"name",e)},expression:"$store.state.projectDetail.name"}})],1),t._v(" "),a("br"),t._v(" "),a("div",[a("el-divider",{attrs:{"content-position":"left"}},[t._v("项目环境")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.envList,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"envName",label:"环境名称",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"host",label:"域名",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"port",label:"端口号"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.closeDetail}},[t._v("关 闭")])],1)],1)},staticRenderFns:[]},T={data:function(){return{rules:{pname:[{required:!0,message:"请输入项目名称",trigger:"blur"}]},dialogTableVisible:!1,dialogFormVisible:!1,form:{pname:""},formLabelWidth:"80px"}},methods:{showEnv:function(){this.$store.commit("changeAddEnvShow",!0)},showEditEnv:function(t,e){var a={id:t,envId:e.envId,envName:e.envName,host:e.host,port:e.port};this.$store.commit("setEnvDetail",a),this.$store.commit("changeEditEnvShow",!0)},delEnv:function(t){this.$store.commit("rmEnvById",t)},editProject:function(){var t=this,e={pid:this.$store.state.projectDetail.id,pname:this.form.pname,envs:this.envList};this.$refs.form.validate(function(a){a&&t.$axios.put("/apis/project/"+e.pid,e).then(function(e){200===e.data.code?(t.$notify({title:"成功",type:"success",message:e.data.msg}),t.closeAddProjectView(),t.$emit("getProjects")):t.$notify({title:"失败",type:"warning",message:e.data.msg})}).catch(function(e){t.$notify({title:"失败",type:"error",message:e})})})},closeAddProjectView:function(){this.$refs.form.resetFields(),this.$store.commit("changeEditProjectShow",!1),this.$store.commit("clearEnvList"),this.$store.commit("setProjectDetail","")}},computed:{envList:function(){return this.$store.getters.getEnvList}},components:{addenv:_,editenv:x},watch:{"$store.state.projectDetail.name":function(){this.form.pname=this.$store.state.projectDetail.name}}},D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticStyle:{height:"100%"},attrs:{title:"编辑项目",visible:t.$store.state.editprojectshow,"close-on-click-modal":!1,"append-to-body":!0},on:{"update:visible":function(e){return t.$set(t.$store.state,"editprojectshow",e)},close:t.closeAddProjectView}},[a("addenv"),t._v(" "),a("editenv"),t._v(" "),a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"项目名称","label-width":t.formLabelWidth,prop:"pname"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.pname,callback:function(e){t.$set(t.form,"pname",e)},expression:"form.pname"}})],1),t._v(" "),a("br"),t._v(" "),a("div",{staticStyle:{"text-align":"left"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.showEnv}},[t._v("添加环境")])],1),t._v(" "),a("div",[a("el-divider",{attrs:{"content-position":"left"}},[t._v("项目环境")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.envList,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"envName",label:"环境名称",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"host",label:"域名",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"port",label:"端口号"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.showEditEnv(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.delEnv(e.$index)}}},[t._v("移除")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.editProject}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:t.closeAddProjectView}},[t._v("取 消")])],1)],1)},staticRenderFns:[]},C={name:"Project",methods:{getProjects:function(){var t=this;this.loading=!0,this.page=1,this.$axios.get("/apis/project/1?filter="+this.search_val).then(function(e){200===e.data.code?(t.projectLists=e.data.data.list,t.total=e.data.data.total):t.$notify({title:"失败",type:"warning",message:e.data.msg}),t.loading=!1}).catch(function(e){t.$notify({title:"失败",type:"error",message:e})})},getProjectsByName:function(t){var e=this;this.$axios.get("/apis/project/"+t+"?filter="+this.search_val).then(function(a){e.loading=!0,e.page=t,200===a.data.code?(e.projectLists=a.data.data.list,e.total=a.data.data.total):e.$notify({title:"失败",type:"warning",message:a.data.msg}),e.loading=!1}).catch(function(t){e.$notify({title:"失败",type:"error",message:t})})},addProject:function(){this.$store.commit("changeAddProjectShow",!0)},showProjectDetail:function(t){var e=this;this.$axios.get("/apis/project/"+t.pid+"/info").then(function(t){e.$store.commit("setProjectDetail",t.data.data),e.$store.commit("changeProjectDetailShow",!0)})},updateProject:function(t){var e=this;this.$store.commit("changeEditProjectShow",!0),this.$axios.get("/apis/project/"+t.pid+"/info").then(function(t){e.$store.commit("setProjectDetail",t.data.data),e.$store.commit("setEnvList",t.data.data.envs)})},deleteProject:function(t){var e=this;this.$confirm("确定要删除吗？").then(function(a){e.$axios.delete("/apis/project/"+t.pid).then(function(t){200===t.data.code?e.$notify({title:"操作成功",type:"success",message:t.data.msg}):e.$notify({title:"操作失败",type:"warning",message:t.data.msg}),e.page=1,e.getProjects()}).catch(function(t){e.$notify({title:"操作失败",type:"error",message:t})})})}},data:function(){return{page:1,total:0,search_val:"",projectLists:[],loading:!0,items:["","success","info","danger","warning"],dialogVisible:!1}},components:{AddProject:a("VU/8")(w,S,!1,null,null,null).exports,ProjectDetail:a("VU/8")({data:function(){return{formLabelWidth:"80px"}},methods:{closeDetail:function(){this.$store.commit("changeProjectDetailShow",!1),this.$store.commit("clearEnvList")}},computed:{envList:function(){return this.$store.getters.getProjectDetail.envList}},components:{}},$,!1,null,null,null).exports,EditProject:a("VU/8")(T,D,!1,null,null,null).exports},created:function(){this.getProjects()}},E={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"project"}},[s("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/main"}}},[t._v("首页")]),t._v(" "),s("el-breadcrumb-item",[t._v("项目管理")])],1),t._v(" "),s("div",{staticClass:"header"},[s("span",[s("el-input",{attrs:{placeholder:"请输入项目名称","prefix-icon":"el-icon-search"},model:{value:t.search_val,callback:function(e){t.search_val=e},expression:"search_val"}})],1),t._v(" "),s("span",[s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getProjectsByName(1)}}},[t._v("搜索")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.addProject}},[t._v("新增")])],1)]),t._v(" "),s("div",{attrs:{id:"addproject"}},[s("add-project",{on:{getProjects:t.getProjects}})],1),t._v(" "),s("ProjectDetail"),t._v(" "),s("EditProject",{on:{getProjects:t.getProjects}}),t._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.projectLists,"max-height":"80%",height:"800","default-sort":{prop:"updateTime",order:"descending"}}},[s("div",{staticStyle:{"text-align":"left",margin:"30px"},attrs:{slot:"empty"},slot:"empty"},[s("div",[s("img",{attrs:{src:a("N9nc"),alt:"",width:"140px",height:"140px"}})]),t._v(" "),s("p",[t._v("没有查询到数据呦～")])]),t._v(" "),s("el-table-column",{attrs:{fixed:"left",prop:"pname",label:"项目名称",width:"200","show-overflow-tooltip":!0}}),t._v(" "),s("el-table-column",{attrs:{prop:"env",label:"环境",width:"500","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.envs,function(a){return s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:a.host+":"+a.port,placement:"top-start"}},[s("el-tag",{key:a.envName,staticStyle:{"margin-left":"5px"},attrs:{type:t.items[e.row.envs.indexOf(a)%5],effect:"light",size:"mini"}},[t._v("\n            "+t._s(a.envName)+"\n          ")])],1)})}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"300"}}),t._v(" "),s("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"300"}}),t._v(" "),s("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"primary",size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),t.showProjectDetail(e.row)}}},[t._v("\n          查看\n        ")]),t._v(" "),s("el-button",{attrs:{size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),t.updateProject(e.row)}}},[t._v("\n          编辑\n        ")]),t._v(" "),s("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),t.deleteProject(e.row)}}},[t._v("\n          移除\n        ")])]}}])})],1),t._v(" "),s("el-footer",{attrs:{id:"footer"}},[s("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"current-page":t.page},on:{"current-change":t.getProjectsByName,"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e}}})],1)],1)},staticRenderFns:[]};var N=a("VU/8")(C,E,!1,function(t){a("iNtw")},"data-v-f686d232",null).exports,I={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticStyle:{height:"100%"},attrs:{title:"新增数据源配置",visible:t.$store.state.adddatabaseshow,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.$store.state,"adddatabaseshow",e)},close:t.closeAddDatabaseView}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"form",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"类型","label-width":t.formLabelWidth,prop:"dbType"}},[a("el-select",{staticStyle:{float:"left"},attrs:{placeholder:"请选择"},model:{value:t.form.dbType,callback:function(e){t.$set(t.form,"dbType",e)},expression:"form.dbType"}},t._l(t.dbOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"数据源名","label-width":t.formLabelWidth,prop:"dbType"}},[a("el-input",{attrs:{placeholder:"请输入数据源名",autocomplete:"off"},model:{value:t.form.dbName,callback:function(e){t.$set(t.form,"dbName",e)},expression:"form.dbName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"数据库","label-width":t.formLabelWidth,prop:"dbLibraryName"}},[a("el-input",{attrs:{placeholder:"请输入数据库",autocomplete:"off"},model:{value:t.form.dbLibraryName,callback:function(e){t.$set(t.form,"dbLibraryName",e)},expression:"form.dbLibraryName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"主机域名","label-width":t.formLabelWidth,prop:"host"}},[a("el-input",{attrs:{placeholder:"请输入主机域名",autocomplete:"off"},model:{value:t.form.host,callback:function(e){t.$set(t.form,"host",e)},expression:"form.host"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"端口号","label-width":t.formLabelWidth,prop:"port"}},[a("el-input",{attrs:{placeholder:"请输入端口号",type:"number",autocomplete:"off"},model:{value:t.form.port,callback:function(e){t.$set(t.form,"port",t._n(e))},expression:"form.port"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"账号","label-width":t.formLabelWidth,prop:"user"}},[a("el-input",{attrs:{placeholder:"请输入数据库账号",autocomplete:"off"},model:{value:t.form.user,callback:function(e){t.$set(t.form,"user",e)},expression:"form.user"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码","label-width":t.formLabelWidth,prop:"pwd"}},[a("el-input",{attrs:{placeholder:"请输入数据库密码","show-password":""},model:{value:t.form.pwd,callback:function(e){t.$set(t.form,"pwd",e)},expression:"form.pwd"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addDataBase}},[t._v("保 存")]),t._v(" "),a("el-button",{attrs:{type:"success"},on:{click:t.testConnect}},[t._v("Test Connect")]),t._v(" "),a("el-button",{on:{click:t.closeAddDatabaseView}},[t._v("取 消")])],1)],1)},staticRenderFns:[]},P={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticStyle:{height:"100%"},attrs:{title:"编辑数据源配置",visible:t.$store.state.editdatabaseshow,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.$store.state,"editdatabaseshow",e)},close:t.closeEditDatabaseView}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"form",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"类型","label-width":t.formLabelWidth,prop:"dbType"}},[a("el-select",{staticStyle:{float:"left"},attrs:{placeholder:"请选择"},model:{value:t.form.dbType,callback:function(e){t.$set(t.form,"dbType",e)},expression:"form.dbType"}},t._l(t.dbOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"数据源名","label-width":t.formLabelWidth,prop:"dbName"}},[a("el-input",{attrs:{placeholder:"请输入数据源名",autocomplete:"off"},model:{value:t.form.dbName,callback:function(e){t.$set(t.form,"dbName",e)},expression:"form.dbName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"数据库","label-width":t.formLabelWidth,prop:"dbLibraryName"}},[a("el-input",{attrs:{placeholder:"请输入数据库",autocomplete:"off"},model:{value:t.form.dbLibraryName,callback:function(e){t.$set(t.form,"dbLibraryName",e)},expression:"form.dbLibraryName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"主机域名","label-width":t.formLabelWidth,prop:"host"}},[a("el-input",{attrs:{placeholder:"请输入主机域名",autocomplete:"off"},model:{value:t.form.host,callback:function(e){t.$set(t.form,"host",e)},expression:"form.host"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"端口号","label-width":t.formLabelWidth,prop:"port",type:"number"}},[a("el-input",{attrs:{placeholder:"请输入端口号",autocomplete:"off"},model:{value:t.form.port,callback:function(e){t.$set(t.form,"port",t._n(e))},expression:"form.port"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"账号","label-width":t.formLabelWidth,prop:"user"}},[a("el-input",{attrs:{placeholder:"请输入数据库账号",autocomplete:"off"},model:{value:t.form.user,callback:function(e){t.$set(t.form,"user",e)},expression:"form.user"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码","label-width":t.formLabelWidth,prop:"pwd"}},[a("el-input",{attrs:{placeholder:"请输入数据库密码","show-password":""},model:{value:t.form.pwd,callback:function(e){t.$set(t.form,"pwd",e)},expression:"form.pwd"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.editDataBase}},[t._v("保 存")]),t._v(" "),a("el-button",{attrs:{type:"success"},on:{click:t.testConnect}},[t._v("Test Connect")]),t._v(" "),a("el-button",{on:{click:t.closeEditDatabaseView}},[t._v("取 消")])],1)],1)},staticRenderFns:[]},V={name:"DataBases",methods:{getDataBases:function(){var t=this;this.page=1,this.loading=!0,this.$axios.get("/apis/database/1?filter="+this.search_val).then(function(e){200===e.data.code?(t.dataBaseLists=e.data.data.list,t.total=e.data.data.total):t.$notify({type:"warning",message:e.data.msg}),t.loading=!1}).catch(function(e){t.$notify({type:"error",message:e})})},getDataBasesByName:function(t){var e=this;this.page=t,this.loading=!0,this.$axios.get("/apis/database/"+t+"?dbName="+this.search_dbName+"&dbType="+this.search_dbType).then(function(t){200===t.data.code?(e.dataBaseLists=t.data.data.list,e.total=t.data.data.total):e.$notify({type:"warning",message:t.data.msg}),e.loading=!1}).catch(function(t){e.$notify({type:"error",message:t})})},addDataBase:function(){this.$store.commit("changeAddDataBaseShow",!0)},updateDataBase:function(t){var e=this;this.$store.commit("changeEditDataBaseShow",!0),this.$axios.get("/apis/database/"+t.dbId+"/info").then(function(t){e.$store.commit("setDatabaseDetail",t.data.data)})},deleteDatabase:function(t){var e=this;this.$confirm("确定要删除吗？").then(function(a){e.$axios.delete("/apis/database/"+t.dbId).then(function(t){200===t.data.code?e.$notify({title:"成功",type:"success",message:t.data.msg}):e.$notify({title:"失败",type:"warning",message:t.data.msg}),e.page=1,e.getDataBases()}).catch(function(t){e.$notify({title:"失败",type:"error",message:t})})})}},data:function(){return{page:1,total:0,search_dbName:"",search_dbType:"",dataBaseLists:[],loading:!0,items:["","success","info","danger","warning"],dbOptions:[{value:"100",label:"Mysql"},{value:"200",label:"Redis"}],dialogVisible:!1,options:[{value:"产品服务数据库",label:"产品服务数据库"},{value:"支付服务数据库",label:"支付服务数据库"}]}},components:{AddDataBase:a("VU/8")({data:function(){return{rules:{dbType:[{required:!0,message:"请输入数据源类型",trigger:"blur"}],dbName:[{required:!0,message:"请输入数据源名称",trigger:"blur"}],dbLibraryName:[{required:!0,message:"请输入数据库名称",trigger:"blur"}],host:[{required:!0,message:"域名不能为空",trigger:"blur"}],port:[{required:!0,message:"端口号不能为空",trigger:"blur"},{type:"number",message:"端口号必须为数字",trigger:"blur"}]},dialogTableVisible:!1,dialogFormVisible:!1,form:{dbType:"100",dbName:"",dbLibraryName:"",host:"",port:"",user:"",pwd:""},dbOptions:[{value:"100",label:"Mysql"},{value:"200",label:"Redis"}],formLabelWidth:"80px",loading:!1}},methods:{addDataBase:function(){var t=this;this.$refs.form.validate(function(e){e&&t.$axios.post("/apis/database/",t.form).then(function(e){t.$notify({title:"成功",type:"success",message:e.data.msg}),t.closeAddDatabaseView(),t.$emit("getDataBases")}).catch(function(e){t.$notify({title:"失败",type:"error",message:e})})})},testConnect:function(){var t=this;this.$refs.form.validate(function(e){e&&(t.loading=!0,t.$axios.post("/apis/database/testConnect",t.form).then(function(e){t.loading=!1,200===e.data.code?t.$notify({title:"操作成功",type:"success",message:e.data.msg}):t.$notify({title:"操作失败",type:"error",message:e.data.msg})}).catch(function(e){t.$notify({title:"失败",type:"error",message:e})}))})},closeAddDatabaseView:function(){this.$refs.form.resetFields(),this.$store.commit("changeAddDataBaseShow",!1)}},computed:{},components:{}},I,!1,null,null,null).exports,EditDataBase:a("VU/8")({data:function(){return{rules:{dbType:[{required:!0,message:"请输入数据源类型",trigger:"blur"}],dbName:[{required:!0,message:"请输入数据源名称",trigger:"blur"}],dbLibraryName:[{required:!0,message:"请输入数据库名称",trigger:"blur"}],host:[{required:!0,message:"域名不能为空",trigger:"blur"}],port:[{required:!0,message:"端口号不能为空",trigger:"blur"},{type:"number",message:"端口号必须为数字",trigger:"blur"}]},dialogTableVisible:!1,dialogFormVisible:!1,form:{},dbOptions:[{value:"100",label:"Mysql"},{value:"200",label:"Redis"}],formLabelWidth:"80px",loading:!1}},methods:{editDataBase:function(){var t=this,e={dbType:this.form.dbType,dbId:this.form.dbId,dbName:this.form.dbName,dbLibraryName:this.form.dbLibraryName,host:this.form.host,port:this.form.port,user:this.form.user,pwd:this.form.pwd};this.$refs.form.validate(function(a){a&&t.$axios.put("/apis/database/"+e.dbId,e).then(function(e){t.$notify({title:"成功",type:"success",message:e.data.msg}),t.$emit("getDataBases"),t.closeEditDatabaseView()}).catch(function(e){t.$notify({title:"失败",type:"error",message:e})})})},testConnect:function(){var t=this;this.$refs.form.validate(function(e){e&&(t.loading=!0,t.$axios.post("/apis/database/testConnect",t.form).then(function(e){t.loading=!1,200===e.data.code?t.$notify({title:"操作成功",type:"success",message:e.data.msg}):t.$notify({title:"操作失败",type:"error",message:e.data.msg})}).catch(function(e){t.$notify({title:"失败",type:"error",message:e})}))})},closeEditDatabaseView:function(){this.$store.commit("changeEditDataBaseShow",!1),this.$refs.form.resetFields()}},watch:{"$store.state.databaseDetail":function(){this.form=this.$store.state.databaseDetail}}},P,!1,null,null,null).exports},created:function(){this.getDataBases()}},j={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"database"}},[s("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/main"}}},[t._v("首页")]),t._v(" "),s("el-breadcrumb-item",[t._v("数据库管理")]),t._v(" "),s("el-breadcrumb-item",[t._v("数据源管理")])],1),t._v(" "),s("div",{staticClass:"header"},[s("span",[s("el-input",{attrs:{placeholder:"请输入数据源名称","prefix-icon":"el-icon-search"},model:{value:t.search_dbName,callback:function(e){t.search_dbName=e},expression:"search_dbName"}})],1),t._v(" "),s("span",[s("el-select",{staticStyle:{float:"left"},attrs:{placeholder:"请选择类型",clearable:"true"},model:{value:t.search_dbType,callback:function(e){t.search_dbType=e},expression:"search_dbType"}},t._l(t.dbOptions,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),s("span",[s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getDataBasesByName(1)}}},[t._v("搜索")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.addDataBase}},[t._v("新增")])],1)]),t._v(" "),s("AddDataBase",{on:{getDataBases:t.getDataBases}}),t._v(" "),s("EditDataBase",{on:{getDataBases:t.getDataBases}}),t._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.dataBaseLists,"max-height":"80%",height:"800","default-sort":{prop:"updatetime",order:"descending"}}},[s("div",{staticStyle:{"text-align":"left",margin:"30px"},attrs:{slot:"empty"},slot:"empty"},[s("div",[s("img",{attrs:{src:a("N9nc"),alt:"",width:"140px",height:"140px"}})]),t._v(" "),s("p",[t._v("没有查询到数据呦～")])]),t._v(" "),s("el-table-column",{attrs:{fixed:"left",prop:"dbName",label:"数据源名称",width:"200","show-overflow-tooltip":!0}}),t._v(" "),s("el-table-column",{attrs:{prop:"dbLibraryName",label:"数据库",width:"200","show-overflow-tooltip":!0}}),t._v(" "),s("el-table-column",{attrs:{prop:"host",label:"类型",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return["100"===e.row.dbType?s("el-tag",{attrs:{effect:"light"}},[t._v("\n          mysql\n        ")]):s("el-tag",{attrs:{effect:"light",type:"warning"}},[t._v("\n          redis\n        ")])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"host",label:"域名",width:"300"}}),t._v(" "),s("el-table-column",{attrs:{prop:"port",label:"端口号",width:"100"}}),t._v(" "),s("el-table-column",{attrs:{prop:"user",label:"账号",width:"300"}}),t._v(" "),s("el-table-column",{attrs:{prop:"createtime",label:"创建时间",width:"300"}}),t._v(" "),s("el-table-column",{attrs:{prop:"updatetime",label:"更新时间",width:"300"}}),t._v(" "),s("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),t.updateDataBase(e.row)}}},[t._v("\n          编辑\n        ")]),t._v(" "),s("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),t.deleteDatabase(e.row)}}},[t._v("\n          移除\n        ")])]}}])})],1),t._v(" "),s("el-footer",{attrs:{id:"footer"}},[s("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"current-page":t.page},on:{"current-change":function(e){return t.getDataBasesByName(t.page)},"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e}}})],1)],1)},staticRenderFns:[]};var L=a("VU/8")(V,j,!1,function(t){a("nzt7")},"data-v-71fd9ac4",null).exports,A={data:function(){return this.caseHistorySettings={xAxisType:"time",area:!0,yAxisType:["KMB","percent"],yAxisName:["用例数","成功率"],axisSite:{right:["成功率"]}},this.todayCaseSettings={roseType:"radius"},{autoRunning:{days:"",hours:"",minutes:"",tasks:"",autoRunningLoading:""},todayRunning:{executeCaseTodayNum:"",successRate:"",todayRunningLoading:""},caseRepertory:{setNum:"",caseNum:"",caseRepertoryLoading:""},taskRepertory:{taskNum:"",timingTaskNum:"",taskRepertoryLoading:""},caseHistory:{columns:["日期","成功用例","成功率","失败用例"],rows:[{"日期":"2018-01-01","成功用例":1393,"失败用例":1093,"成功率":.32},{"日期":"2018-01-02","成功用例":3530,"失败用例":3230,"成功率":.26},{"日期":"2018-01-03","成功用例":2923,"失败用例":2623,"成功率":.76},{"日期":"2018-01-04","成功用例":1723,"失败用例":1423,"成功率":.49},{"日期":"2018-01-05","成功用例":3792,"失败用例":3492,"成功率":.323},{"日期":"2018-01-06","成功用例":4593,"失败用例":4293,"成功率":.78},{"日期":"2018-01-07","成功用例":4593,"失败用例":4293,"成功率":.78}]},todayCase:{columns:["用例类别","数量"],rows:[]},todayTask:{columns:["任务情况","数量"],rows:[]},chartData:{columns:["word","count"],rows:this.getRows()}}},methods:{getAutoRunning:function(){var t=this;this.autoRunning.autoRunningLoading=!0,this.$axios.get("/apis/dataStatistics/executeInfoNow").then(function(e){200===e.data.code?(t.autoRunning.days=e.data.data.executeTime.day,t.autoRunning.hours=e.data.data.executeTime.hour,t.autoRunning.minutes=e.data.data.executeTime.minute,t.autoRunning.tasks=e.data.data.executeTaskNumNow):t.$notify({title:"操作失败",type:"warning",message:e.data.msg})}).catch(function(e){t.$notify({title:"操作失败",type:"error",message:e})}),this.autoRunning.autoRunningLoading=!1},getTodayRunning:function(){var t=this;this.todayRunning.todayRunningLoading=!0,this.$axios.get("/apis/dataStatistics/todayInfo").then(function(e){200===e.data.code?(t.todayRunning.executeCaseTodayNum=e.data.data.executeCaseTodayNum,t.todayRunning.successRate=100*parseFloat(e.data.data.successRate)):t.$notify({title:"操作失败",type:"warning",message:e.data.msg})}).catch(function(e){t.$notify({title:"操作失败",type:"error",message:e})}),this.todayRunning.todayRunningLoading=!1},getTodayCaseInfo:function(){var t=this;this.$axios.get("/apis/dataStatistics/todayCaseInfo").then(function(e){200===e.data.code?(t.todayCase.rows.push({"用例类别":"成功用例数","数量":e.data.data.successNum}),t.todayCase.rows.push({"用例类别":"失败用例数","数量":e.data.data.falseNum})):t.$notify({title:"操作失败",type:"warning",message:e.data.msg})}).catch(function(e){t.$notify({title:"操作失败",type:"error",message:e})})},getTodayTASKInfo:function(){var t=this;this.$axios.get("/apis/dataStatistics/taskExecuteInfo").then(function(e){200===e.data.code?(t.todayTask.rows.push({"任务情况":"执行中","数量":e.data.data.taskIsStartNum}),t.todayTask.rows.push({"任务情况":"执行完毕","数量":e.data.data.taskIsEndNum})):t.$notify({title:"操作失败",type:"warning",message:e.data.msg})}).catch(function(e){t.$notify({title:"操作失败",type:"error",message:e})})},getCaseRepertory:function(){var t=this;this.caseRepertory.caseRepertoryLoading=!0,this.$axios.get("/apis/dataStatistics/setInfo").then(function(e){200===e.data.code?(t.caseRepertory.setNum=e.data.data.testCaseSetNum,t.caseRepertory.caseNum=e.data.data.testCaseNum):t.$notify({title:"操作失败",type:"warning",message:e.data.msg})}).catch(function(e){t.$notify({title:"操作失败",type:"error",message:e})}),this.caseRepertory.caseRepertoryLoading=!1},getTaskRepertory:function(){var t=this;this.taskRepertory.taskRepertoryLoading=!0,this.$axios.get("/apis/dataStatistics/taskInfo").then(function(e){200===e.data.code?(t.taskRepertory.taskNum=e.data.data.taskNum,t.taskRepertory.timingTaskNum=e.data.data.taskIsTimingNum):t.$notify({title:"操作失败",type:"warning",message:e.data.msg})}).catch(function(e){t.$notify({title:"操作失败",type:"error",message:e})}),this.taskRepertory.taskRepertoryLoading=!1},getRows:function(){return[{word:"用例集",count:2},{word:"测试用例",count:2},{word:"自动化测试",count:2},{word:"接口",count:2},{word:"测试报告",count:2},{word:"实时调试",count:2},{word:"函数助手",count:1},{word:"接口测试",count:2},{word:"Teemo",count:5},{word:"提效",count:1},{word:"回归测试",count:1},{word:"定时任务",count:2},{word:"手动任务",count:2},{word:"项目",count:2},{word:"涨工资",count:3},{word:"升职加薪",count:2},{word:"迎娶白富美",count:2},{word:"自动化进阶之路",count:2},{word:"测试开发",count:3},{word:"奥利给",count:1},{word:"努力奋斗",count:1},{word:"加油",count:1},{word:"自动化成神",count:3},{word:"数据库脚本",count:2},{word:"数据源",count:2},{word:"HTTP",count:2},{word:"HTTPS",count:2},{word:"WebClient",count:2},{word:"PostMan",count:2},{word:"Jmeter",count:2},{word:"Java",count:2},{word:"Python",count:2},{word:"Mysql",count:2},{word:"Redis",count:2},{word:"Requests",count:2},{word:"HttpClient",count:2},{word:"Pytest",count:2},{word:"TestNG",count:2},{word:"JUnit 4",count:2},{word:"Unittest",count:2},{word:"HttpRunner",count:2},{word:"RobotFrameWork",count:2},{word:"Excel",count:2},{word:"Jenkins",count:2},{word:"SpringBoot",count:2},{word:"Maven",count:2},{word:"Docker",count:2},{word:"Linux",count:2},{word:"Windows",count:2},{word:"Vue",count:2},{word:"Echarts",count:2},{word:"Swagger",count:2},{word:"关键字驱动",count:2},{word:"自动化框架",count:2},{word:"数据驱动",count:2},{word:"单元测试框架",count:2},{word:"接口关联",count:2},{word:"接口断言",count:2},{word:"参数化",count:2},{word:"邮件通知",count:2}]}},created:function(){this.getAutoRunning(),this.getTodayRunning(),this.getCaseRepertory(),this.getTaskRepertory(),this.getTodayCaseInfo(),this.getTodayTASKInfo()}},O={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"main"}},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/main"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("/")])],1),t._v(" "),a("div",[a("el-card",{staticClass:"card",attrs:{shadow:"hover","v-loading":t.autoRunning.autoRunningLoading}},[a("div",{staticClass:"chead",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("自动化已运行")]),t._v(" "),a("el-tag",{staticClass:"tag",attrs:{effect:"dark",size:"mini"}},[t._v("持续")])],1),t._v(" "),a("span",{staticClass:"content",staticStyle:{color:"deepskyblue"}},[t._v(" "+t._s(t.autoRunning.days)+" 天 "+t._s(t.autoRunning.hours)+" 小时 "+t._s(t.autoRunning.minutes)+" 分钟")]),t._v(" "),a("div",{staticClass:"bottom"},[a("span",[t._v("正在执行任务 "+t._s(t.autoRunning.tasks)+" 个")])])]),t._v(" "),a("el-card",{staticClass:"card",attrs:{shadow:"hover","v-loading":t.todayRunning.todayRunningLoading}},[a("div",{staticClass:"chead",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("今日执行情况")]),t._v(" "),a("el-tag",{staticClass:"tag",attrs:{effect:"dark",size:"mini",type:"warning"}},[t._v("运行")])],1),t._v(" "),a("span",{staticClass:"content",staticStyle:{color:"#ffcd32"}},[t._v("已执行用例 "+t._s(t.todayRunning.executeCaseTodayNum)+" 条")]),t._v(" "),a("div",{staticClass:"bottom"},[a("span",[t._v("成功率 "+t._s(parseFloat(t.todayRunning.successRate).toFixed(2))+"% ")])])]),t._v(" "),a("el-card",{staticClass:"card",attrs:{shadow:"hover","v-loading":t.caseRepertory.caseRepertoryLoading}},[a("div",{staticClass:"chead",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("用例库")]),t._v(" "),a("el-tag",{staticClass:"tag",attrs:{effect:"dark",size:"mini",type:"danger"}},[t._v("库存")])],1),t._v(" "),a("span",{staticClass:"content",staticStyle:{color:"#ff4d51"}},[t._v("用例集库存 "+t._s(t.caseRepertory.setNum)+" 条")]),t._v(" "),a("div",{staticClass:"bottom"},[a("span",[t._v("包含用例 "+t._s(t.caseRepertory.caseNum)+" 条")])])]),t._v(" "),a("el-card",{staticClass:"card",attrs:{shadow:"hover","v-loading":t.taskRepertory.taskRepertoryLoading}},[a("div",{staticClass:"chead",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("任务库")]),t._v(" "),a("el-tag",{staticClass:"tag",attrs:{effect:"dark",size:"mini",type:"success"}},[t._v("库存")])],1),t._v(" "),a("span",{staticClass:"content",staticStyle:{color:"#13ce66"}},[t._v("普通任务 "+t._s(t.taskRepertory.taskNum)+" 个")]),t._v(" "),a("div",{staticClass:"bottom"},[a("span",[t._v("已开启定时任务 "+t._s(t.taskRepertory.timingTaskNum)+" 个")])])])],1),t._v(" "),a("div",[a("h3",[t._v("近7日用例执行情况")]),t._v(" "),a("ve-line",{attrs:{data:t.caseHistory,settings:t.caseHistorySettings}})],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("div",{staticClass:"today"},[a("h3",[t._v("今日用例执行")]),t._v(" "),a("ve-ring",{attrs:{data:t.todayCase,settings:t.todayCaseSettings}})],1),t._v(" "),a("div",{staticClass:"today"},[a("h3",[t._v("任务执行")]),t._v(" "),a("ve-ring",{attrs:{data:t.todayTask}})],1)]),t._v(" "),a("ve-wordcloud",{attrs:{data:t.chartData}})],1)},staticRenderFns:[]};var z=a("VU/8")(A,O,!1,function(t){a("0ZwN")},"data-v-7a27bffe",null).exports,R=a("E5Az"),F=a.n(R);a("vX90"),a("spg9"),a("hD67"),a("4/hK"),a("PsxY");a("7bwT"),a("afnM"),a("vq+x"),a("aGTD"),a("JGZi"),a("jQeI"),a("PgJU"),a("5IAE"),a("tWbI"),a("JGZi"),a("uqUb"),a("ezqs");var q={name:"Code",data:function(){return{editor:"",curCode:"",cmOptions:{value:this.curCode,mode:this.mime,theme:this.theme?this.theme:"ambiance",readOnly:this.readOnly,indentWithTabs:!0,smartIndent:!0,lineNumbers:!0,matchBrackets:!0,autofocus:!0,extraKeys:{Ctrl:"autocomplete"},hintOptions:{tables:{users:["name","score","birthDate"],countries:["name","population","size"]}},lineWrapping:!0,foldGutter:!0,autoCloseBrackets:!0,autoRefresh:!0,placeholder:"请输入..."}}},props:{mime:[String],value:[Object,String],theme:[String],readOnly:[Boolean]},mounted:function(){var t=this;this.editor=this.$refs.myCode,this.editor.codemirror.focus(),this.editor.codemirror.setCursor(2,1),setTimeout(function(){t.editor.codemirror.refresh()},1)},methods:{changeData:function(){this.$emit("input",this.curCode)}},watch:{value:{handler:function(t,e){this.curCode=t},immediate:!0},theme:function(t){this.cmOptions.theme=t},mime:function(t){console.log(t),this.cmOptions.mode=t},readOnly:function(t){this.cmOptions.readOnly=t}},components:{codemirror:R.codemirror}},B={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("codemirror",{ref:"myCode",staticClass:"code",attrs:{options:t.cmOptions},on:{changes:t.changeData},model:{value:t.curCode,callback:function(e){t.curCode=e},expression:"curCode"}})],1)},staticRenderFns:[]};var K=a("VU/8")(q,B,!1,function(t){a("p7hB")},"data-v-cb2e8742",null).exports,U={data:function(){return{loading:"",rules:{dbId:[{required:!0,message:"请选择数据库",trigger:"blur"}],sqlValue:[{required:!0,message:"sql不能为空",trigger:"blur"}],scriptName:[{required:!0,message:"脚本名称不能为空",trigger:"blur"}]},dialogTableVisible:!1,dialogFormVisible:!1,dbOptions:[],sqls:"",form:{scriptName:"",dbId:""},formLabelWidth:"80px"}},methods:{getDataBases:function(){var t=this;this.$axios.get("/apis/database/").then(function(e){200===e.data.code?t.dbOptions=e.data.data:t.$notify({type:"warning",message:e.data.msg}),t.loading=!1}).catch(function(e){t.$notify({type:"error",message:e})})},addScript:function(){var t=this,e=[];this.sqls.replace(/\n/g,"").split(";").forEach(function(t){""!==t&&e.push({script:t.replace(/(^\s+)|(\s+$)/g,""),saveParam:!0})});var a={dbId:this.form.dbId,scriptName:this.form.scriptName,sqlScript:f()(e)};this.$refs.form.validate(function(e){e&&t.$axios.post("/apis/script/",a).then(function(e){200===e.data.code?(t.$notify({title:"成功",type:"success",message:e.data.msg}),t.closeAddScriptView(),t.$emit("getScripts")):t.$notify({title:"失败",type:"error",message:e.data.msg})}).catch(function(e){t.$notify({type:"error",message:e})})})},testScript:function(){var t=this,e=[];this.sqls.replace(/\n/g,"").split(";").forEach(function(t){""!==t&&e.push({script:t.replace(/(^\s+)|(\s+$)/g,""),saveParam:!0})});var a={dbId:this.form.dbId,scriptName:this.form.scriptName,sqlScript:f()(e)};this.$refs.form.validate(function(e){e&&t.$axios.post("/apis/sqlExecute/",a).then(function(e){200===e.data.code?t.$notify({title:"调试成功",type:"success",message:e.data.msg+"本次共执行"+e.data.data.total+"条sql,全部成功！"}):t.$notify({title:"调试失败",type:"error",showClose:!0,duration:1e4,dangerouslyUseHTMLString:!0,message:"SQL调试出现异常！本次共执行"+e.data.data.total+"条sql,失败"+e.data.data.error+"条,详情请查看<strong style='color: indianred'>NetWork</strong>"})})})},closeAddScriptView:function(){this.$refs.form.resetFields(),this.$store.commit("changeAddScriptShow",!1),this.form={scriptName:"",dbId:""},this.sqls=""}},computed:{},components:{Code:K},created:function(){this.getDataBases()}},W={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticStyle:{height:"100%"},attrs:{title:"新增数据库脚本",visible:t.$store.state.addscriptshow,width:"60%","close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.$store.state,"addscriptshow",e)},close:t.closeAddScriptView}},[a("el-form",{ref:"form",staticStyle:{"text-align":"left"},attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"数据源","label-width":t.formLabelWidth,prop:"dbId"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择数据源"},model:{value:t.form.dbId,callback:function(e){t.$set(t.form,"dbId",e)},expression:"form.dbId"}},t._l(t.dbOptions,function(t){return a("el-option",{attrs:{label:t.dbName,value:t.dbId}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"脚本名称","label-width":t.formLabelWidth,prop:"scriptName"}},[a("el-input",{attrs:{placeholder:"请输入脚本名称",autocomplete:"off"},model:{value:t.form.scriptName,callback:function(e){t.$set(t.form,"scriptName",e)},expression:"form.scriptName"}})],1),t._v(" "),a("Code",{attrs:{mime:"sql"},model:{value:t.sqls,callback:function(e){t.sqls=e},expression:"sqls"}})],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addScript}},[t._v("保 存")]),t._v(" "),a("el-button",{attrs:{type:"success"},on:{click:t.testScript}},[t._v("调 试")]),t._v(" "),a("el-button",{on:{click:t.closeAddScriptView}},[t._v("取 消")])],1)],1)},staticRenderFns:[]},H={data:function(){return{loading:"",sqlValue:"",rules:{dbId:[{required:!0,message:"请选择数据库",trigger:"blur"}],sqlValue:[{required:!0,message:"sql不能为空",trigger:"blur"}],scriptName:[{required:!0,message:"脚本名称不能为空",trigger:"blur"}]},dialogTableVisible:!1,dialogFormVisible:!1,dbOptions:[],sqls:"",form:{scriptId:"",scriptName:"",dbId:"",sqlScript:""},formLabelWidth:"80px"}},methods:{getDataBases:function(){var t=this;this.$axios.get("/apis/database/").then(function(e){200===e.data.code?t.dbOptions=e.data.data:t.$notify({type:"warning",message:e.data.msg}),t.loading=!1}).catch(function(e){t.$notify({type:"error",message:e})})},editScript:function(){var t=this,e=[];this.sqls.replace(/\n/g,"").split(";").forEach(function(t){""!==t&&e.push({script:t.replace(/(^\s+)|(\s+$)/g,""),saveParam:!0})});var a={dbId:this.form.dbId,scriptId:this.form.scriptId,scriptName:this.form.scriptName,sqlScript:f()(e)};this.$refs.form.validate(function(e){e&&t.$axios.put("/apis/script/"+t.form.scriptId,a).then(function(e){200===e.data.code?(t.$notify({title:"成功",type:"success",message:e.data.msg}),t.closeEditScriptView(),t.$emit("getScripts")):t.$notify({title:"失败",type:"error",message:e.data.msg})}).catch(function(e){t.$notify({title:"失败",type:"error",message:e})})})},testScript:function(){var t=this,e=[];this.sqls.replace(/\n/g,"").split(";").forEach(function(t){""!==t&&e.push({script:t.replace(/(^\s+)|(\s+$)/g,""),saveParam:!0})});var a={dbId:this.form.dbId,scriptName:this.form.scriptName,sqlScript:f()(e)};this.$refs.form.validate(function(e){e&&t.$axios.post("/apis/sqlExecute/",a).then(function(e){200===e.data.code?t.$notify({title:"调试成功",type:"success",message:e.data.msg+"本次共执行"+e.data.data.total+"条sql,全部成功！"}):t.$notify({title:"调试失败",type:"error",showClose:!0,duration:1e4,dangerouslyUseHTMLString:!0,message:"SQL调试出现异常！本次共执行"+e.data.data.total+"条sql,失败"+e.data.data.error+"条,详情请查看<strong style='color: indianred'>NetWork</strong>"})})})},closeEditScriptView:function(){this.$refs.form.resetFields(),this.$store.commit("changeEditScriptShow",!1),this.form={scriptName:"",dbId:""},this.sqls=""}},computed:{},watch:{"$store.state.scriptDetail":function(){var t=this;this.form.scriptId=this.$store.state.scriptDetail.scriptId,this.form.sqlScript=this.$store.state.scriptDetail.sqlScript,this.form.dbId=this.$store.state.scriptDetail.dbId,this.form.scriptName=this.$store.state.scriptDetail.scriptName;JSON.parse(this.$store.state.scriptDetail.sqlScript).forEach(function(e){""!==e.script&&(t.sqls+=e.script+";\n")})}},components:{Code:K},created:function(){this.getDataBases()}},J={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticStyle:{height:"100%"},attrs:{title:"编辑数据库脚本",visible:t.$store.state.editscriptshow,width:"60%","close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.$store.state,"editscriptshow",e)},close:t.closeEditScriptView}},[a("el-form",{ref:"form",staticStyle:{"text-align":"left"},attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"数据源","label-width":t.formLabelWidth,prop:"dbId"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择数据源"},model:{value:t.form.dbId,callback:function(e){t.$set(t.form,"dbId",e)},expression:"form.dbId"}},t._l(t.dbOptions,function(t){return a("el-option",{attrs:{label:t.dbName,value:t.dbId}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"脚本名称","label-width":t.formLabelWidth,prop:"scriptName"}},[a("el-input",{attrs:{placeholder:"请输入脚本名称",autocomplete:"off"},model:{value:t.form.scriptName,callback:function(e){t.$set(t.form,"scriptName",e)},expression:"form.scriptName"}})],1),t._v(" "),a("Code",{attrs:{mime:"sql"},model:{value:t.sqls,callback:function(e){t.sqls=e},expression:"sqls"}})],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.editScript}},[t._v("保 存")]),t._v(" "),a("el-button",{attrs:{type:"success"},on:{click:t.testScript}},[t._v("调 试")]),t._v(" "),a("el-button",{on:{click:t.closeEditScriptView}},[t._v("取 消")])],1)],1)},staticRenderFns:[]},G={name:"Script",methods:{getDataBases:function(){var t=this;this.$axios.get("/apis/database/").then(function(e){200===e.data.code?t.dbOptions=e.data.data:t.$notify({title:"成功",type:"warning",message:e.data.msg}),t.loading=!1}).catch(function(e){t.$notify({title:"失败",type:"error",message:e})})},getScripts:function(t){var e=this;this.$axios.get("/apis/script/"+t+"?scriptName="+this.search_val+"&dbId="+this.value).then(function(t){e.loading=!0,200===t.data.code?(e.scriptLists=t.data.data.list,e.total=t.data.data.total):e.$notify({type:"warning",message:t.data.msg}),e.loading=!1}).catch(function(t){e.$notify({type:"error",message:t})})},addScript:function(){this.$store.commit("changeAddScriptShow",!0)},updateScript:function(t){var e=this;this.$store.commit("changeEditScriptShow",!0),this.$axios.get("/apis/script/"+t.scriptId+"/info").then(function(t){e.$store.commit("setScriptDetail",t.data.data)})},deleteScript:function(t){var e=this;this.$confirm("确定要删除吗？").then(function(a){e.$axios.delete("/apis/script/"+t.scriptId).then(function(t){200===t.data.code?e.$notify({title:"成功",type:"success",message:t.data.msg}):e.$notify({title:"失败",type:"warning",message:t.data.msg}),e.page=1,e.getScripts(1)}).catch(function(t){e.$notify({title:"失败",type:"error",message:t})})})}},data:function(){return{value:"",page:1,total:0,search_val:"",dbOptions:[],scriptLists:[],loading:!0,items:["","success","info","danger","warning"],dialogVisible:!1}},components:{AddScript:a("VU/8")(U,W,!1,null,null,null).exports,EditScript:a("VU/8")(H,J,!1,null,null,null).exports},created:function(){this.getScripts(1),this.getDataBases()}},M={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"script"}},[s("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/main"}}},[t._v("首页")]),t._v(" "),s("el-breadcrumb-item",[t._v("数据库管理")]),t._v(" "),s("el-breadcrumb-item",[t._v("脚本管理")])],1),t._v(" "),s("div",{staticClass:"header"},[s("span",[s("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择数据源"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.dbOptions,function(t){return s("el-option",{key:t.dbId,attrs:{label:t.dbName,value:t.dbId}})}),1)],1),t._v(" "),s("span",[s("el-input",{attrs:{placeholder:"请输入脚本名称","prefix-icon":"el-icon-search"},model:{value:t.search_val,callback:function(e){t.search_val=e},expression:"search_val"}})],1),t._v(" "),s("span",[s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getScripts(1)}}},[t._v("搜索")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.addScript}},[t._v("新增")])],1)]),t._v(" "),s("AddScript",{on:{getScripts:function(e){return t.getScripts(1)}}}),t._v(" "),s("EditScript",{on:{getScripts:function(e){return t.getScripts(1)}}}),t._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.scriptLists,"max-height":"80%",height:"800","default-sort":{prop:"updatetime",order:"descending"}}},[s("div",{staticStyle:{"text-align":"left",margin:"30px"},attrs:{slot:"empty"},slot:"empty"},[s("div",[s("img",{attrs:{src:a("N9nc"),alt:"",width:"140px",height:"140px"}})]),t._v(" "),s("p",[t._v("没有查询到数据呦～")])]),t._v(" "),s("el-table-column",{attrs:{fixed:"left",prop:"scriptName",label:"脚本名称",width:"200","show-overflow-tooltip":!0}}),t._v(" "),s("el-table-column",{attrs:{prop:"sqlScript",label:"脚本内容",width:"300","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(JSON.parse(e.row.sqlScript),function(a){return s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:a.script,placement:"top-start"}},[s("el-tag",{staticStyle:{"margin-left":"5px"},attrs:{type:t.items[JSON.parse(e.row.sqlScript).indexOf(a)%5],effect:"light",size:"mini"}},[t._v("\n            sql\n          ")])],1)})}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"db.dbName",label:"所属数据源",width:"300","show-overflow-tooltip":!0}}),t._v(" "),s("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"300"}}),t._v(" "),s("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"300"}}),t._v(" "),s("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),t.updateScript(e.row)}}},[t._v("\n          编辑\n        ")]),t._v(" "),s("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),t.deleteScript(e.row)}}},[t._v("\n          移除\n        ")])]}}])})],1),t._v(" "),s("el-footer",{attrs:{id:"footer"}},[s("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"current-page":t.page},on:{"current-change":function(e){return t.getScripts(t.page)},"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e}}})],1)],1)},staticRenderFns:[]};var Y=a("VU/8")(G,M,!1,function(t){a("madm")},"data-v-40947eab",null).exports,X={name:"",data:function(){return{importData:{data:{text:"测试用例名称",id:1},children:[]},xmindShow:!1}},methods:{exportData:function(t){console.log(t)},saveData:function(t){this.xmindShow=!1}}},Q={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"minder-container"}},[a("el-button",{on:{click:function(e){t.xmindShow=!0}}},[t._v("新增用例")]),t._v(" "),a("el-drawer",{attrs:{visible:t.xmindShow,direction:"ttb",size:"90%"},on:{"update:visible":function(e){t.xmindShow=e}}},[a("div",{staticStyle:{height:"800px"}},[a("minder",{ref:"minder",attrs:{importData:t.importData},on:{exportData:t.exportData,saveData:t.saveData}})],1)])],1)},staticRenderFns:[]};var Z=a("VU/8")(X,Q,!1,function(t){a("VDpJ")},"data-v-210b1d44",null).exports,tt={name:"",data:function(){return{importData:{data:{text:"测试用例名称",id:1},children:[]},xmindShow:!1}},methods:{exportData:function(t){console.log(t)},saveData:function(t){this.xmindShow=!1}}},et={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"minder-container"}},[a("el-button",{on:{click:function(e){t.xmindShow=!0}}},[t._v("新增用例")]),t._v(" "),a("el-drawer",{attrs:{visible:t.xmindShow,direction:"ttb",size:"90%"},on:{"update:visible":function(e){t.xmindShow=e}}},[a("div",{staticStyle:{height:"800px"}},[a("minder",{ref:"minder",attrs:{importData:t.importData},on:{exportData:t.exportData,saveData:t.saveData}})],1)])],1)},staticRenderFns:[]};a("VU/8")(tt,et,!1,function(t){a("A0DI")},"data-v-5542fc40",null).exports;var at={data:function(){return{activeName:"apiInfo",activeNameForApi:"params",setId:"",contentType:1,assertType:1,methodOptions:[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"DELETE",label:"DELETE"}],api:{url:"",method:"GET"},params:[{key:"",value:""}],headers:[{key:"",value:""}],globalVariables:[{key:"",value:""}],globalHeaders:[{key:"",value:""}],globalCookies:[{key:"",value:""}],formParams:[{key:"",value:""}],urlParams:[{key:"",value:""}],cookies:[{key:"",value:""}],json:"",saves:[{saveFrom:"",saveBy:"",key:"",jsonpath:"",regex:""}],asserts:[{assertBy:"",jsonpath:"",regex:"",relation:"",expect:""}],delayTime:"0",jsonAssert:"",caseInfo:{caseDesc:""},rules:{caseDesc:[{required:!0,message:"请输入用例描述",trigger:"blur"}]}}},methods:{handleClick:function(t,e){console.log(t,e)},addParamKv:function(){this.params.push({key:"",value:""})},delParamKv:function(t){this.params.splice(this.params.indexOf(t),1)},addHeaderKv:function(){this.headers.push({key:"",value:""})},delHeaderKv:function(t){this.headers.splice(this.headers.indexOf(t),1)},addFormParamKv:function(){this.formParams.push({key:"",value:""})},delFormParamKv:function(t){this.formParams.splice(this.formParams.indexOf(t),1)},addUrlParamKv:function(){this.urlParams.push({key:"",value:""})},delUrlParamKv:function(t){this.urlParams.splice(this.urlParams.indexOf(t),1)},addCookieKv:function(){this.cookies.push({key:"",value:""})},delCookieKv:function(t){this.cookies.splice(this.cookies.indexOf(t),1)},addGlobalVariableKv:function(){this.globalVariables.push({key:"",value:""})},delGlobalVariableKv:function(t){this.globalVariables.splice(this.globalVariables.indexOf(t),1)},addGlobalCookieKv:function(){this.globalCookies.push({key:"",value:""})},delGlobalCookieKv:function(t){this.globalCookies.splice(this.globalCookies.indexOf(t),1)},addGlobalHeaderKv:function(){this.globalHeaders.push({key:"",value:""})},delGlobalHeaderKv:function(t){this.globalHeaders.splice(this.globalHeaders.indexOf(t),1)},addSaveKv:function(){this.saves.push({saveFrom:"",saveBy:"",key:"",jsonpath:"",regex:""})},delSaveKv:function(t){this.saves.splice(this.saves.indexOf(t),1)},clearSave:function(t){t.jsonpath="",t.regex=""},clearAssert:function(t){t.jsonpath="",t.regex=""},addAssertKv:function(){this.asserts.push({assertBy:"",jsonpath:"",regex:"",relation:"",expect:""})},delAssertKv:function(t){this.asserts.splice(this.asserts.indexOf(t),1)},addCase:function(){var t=this,e={},a=this.api.url,s={},i={},o={},l={},n={},r={},c=[],d=[];if(1===this.contentType){for(var u in this.formParams){if(1===this.formParams.length&&""===this.formParams[0].key){e=null;break}e[this.formParams[u].key]=this.formParams[u].value}null!==e&&(e=f()(e))}else if(2===this.contentType){var p=[];for(var m in e=null,this.urlParams){if(1===this.urlParams.length&&""===this.urlParams[0].key)break;var h=this.urlParams[m].key,v=this.urlParams[m].value;p.push(h+"="+v)}0!==p.length&&(a=a+"?"+p.join("&"))}else e=this.json;for(var g in this.params){if(1===this.params.length&&""===this.params[0].key){s=null;break}s[this.params[g].key]=this.params[g].value}for(var b in null!==s&&(s=f()(s)),this.headers){if(1===this.headers.length&&""===this.headers[0].key){i=null;break}i[this.headers[b].key]=this.headers[b].value}for(var y in null!==i&&(i=f()(i)),this.cookies){if(1===this.cookies.length&&""===this.cookies[0].key){o=null;break}o[this.cookies[y].key]=this.cookies[y].value}for(var _ in null!=o&&(o=f()(o)),this.globalVariables){if(1===this.globalVariables.length&&""===this.globalVariables[0].key){l=null;break}l[this.globalVariables[_].key]=this.globalVariables[_].value}for(var k in null!==l&&(l=f()(l)),this.globalHeaders){if(1===this.globalHeaders.length&&""===this.globalHeaders[0].key){n=null;break}n[this.globalHeaders[k].key]=this.globalHeaders[k].value}for(var x in null!==n&&(n=f()(n)),this.globalCookies){if(1===this.globalCookies.length&&""===this.globalCookies[0].key){r=null;break}r[this.globalCookies[x].key]=this.globalCookies[x].value}for(var w in null!==r&&(r=f()(r)),this.saves){if(1===this.saves.length&&""===this.saves[0].key){c=null;break}var S={jexpression:this.saves[w].jsonpath,paramKey:this.saves[w].key,regex:this.saves[w].regex,saveFrom:this.saves[w].saveFrom,saveType:this.saves[w].saveBy};c.push(S)}for(var $ in this.asserts){if(1===this.asserts.length&&""===this.asserts[0].expect){d=null;break}var T={verifyType:this.asserts[$].assertBy,rexpression:this.asserts[$].regex,jexpression:this.asserts[$].jsonpath,expect:this.asserts[$].expect,relationShip:this.asserts[$].relation};d.push(T)}var D={body:e,contentType:this.contentType,caseDesc:this.caseInfo.caseDesc,caseType:1,cookies:o,delayTime:this.delayTime,globalVariables:l,globalCookies:r,globalHeaders:n,header:i,jsonAssert:this.jsonAssert?this.jsonAssert:null,url:a,method:this.api.method,param:s,saves:c,verify:d,setId:this.setId};this.$refs.caseInfo.validate(function(e){e&&t.$axios.post("/apis/testcase/",D).then(function(e){t.loading=!0,200===e.data.code?(t.$store.commit("changeAddcaseForApiShow",!1),t.$notify({title:"操作成功",type:"success",message:e.data.msg}),t.$emit("getCaseInfo")):t.$notify({title:"操作失败",type:"warning",message:e.data.msg})}).catch(function(e){t.$notify({title:"操作失败",type:"error",message:e})})})},closeAddCase:function(){this.api={url:"",method:"GET"},this.params=[{key:"",value:""}],this.urlParams=[{key:"",value:""}],this.headers=[{key:"",value:""}],this.cookie=[{key:"",value:""}],this.formParams=[{key:"",value:""}],this.globalVariables=[{key:"",value:""}],this.globalHeaders=[{key:"",value:""}],this.globalCookies=[{key:"",value:""}],this.json="",this.saves=[{saveFrom:"",saveBy:"",key:"",jsonpath:"",regex:""}],this.asserts=[{assertBy:"",jsonpath:"",regex:"",relation:"",expect:""}],this.delayTime="0",this.jsonAssert="",this.caseInfo.caseDesc="",this.activeName="apiInfo",this.activeNameForApi="params",this.contentType=1,this.assertType=1,this.$refs.caseInfo.resetFields(),this.$store.commit("changeAddcaseForApiShow",!1)}},computed:{jsonFormatObject:function(){if(""===this.json)return{};try{return JSON.parse(this.json)}catch(t){return{msg:"JSON格式化错误！"+t}}}},watch:{"$store.state.caseSetInfo":function(t){this.setId=t.setId}},components:{Code:K}},st={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticStyle:{height:"100%"},attrs:{visible:t.$store.state.addcaseforapishow,"close-on-click-modal":!1,"append-to-body":!0,width:"70%"},on:{"update:visible":function(e){return t.$set(t.$store.state,"addcaseforapishow",e)},close:t.closeAddCase}},[a("div",{attrs:{id:"caseAdd"}},[a("h2",{staticStyle:{"text-align":"left"}},[t._v("添加接口用例")]),t._v(" "),a("el-form",{ref:"caseInfo",staticClass:"demo-ruleForm",attrs:{model:t.caseInfo,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用例描述",prop:"caseDesc"}},[a("el-input",{model:{value:t.caseInfo.caseDesc,callback:function(e){t.$set(t.caseInfo,"caseDesc",e)},expression:"caseInfo.caseDesc"}})],1),t._v(" "),a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"接口基本信息",name:"apiInfo"}},[a("el-input",{attrs:{placeholder:"Enter Request URL"},model:{value:t.api.url,callback:function(e){t.$set(t.api,"url",e)},expression:"api.url"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{slot:"prepend",placeholder:"Request Method"},slot:"prepend",model:{value:t.api.method,callback:function(e){t.$set(t.api,"method",e)},expression:"api.method"}},[a("el-option",{attrs:{label:"GET",value:"GET"}}),t._v(" "),a("el-option",{attrs:{label:"POST",value:"POST"}}),t._v(" "),a("el-option",{attrs:{label:"PUT",value:"PUT"}}),t._v(" "),a("el-option",{attrs:{label:"DELETE",value:"DELETE"}})],1),t._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search",disabled:""},slot:"append"})],1),t._v(" "),a("el-tabs",{staticStyle:{"margin-top":"15px"},attrs:{type:"border-card"},on:{"tab-click":t.handleClick},model:{value:t.activeNameForApi,callback:function(e){t.activeNameForApi=e},expression:"activeNameForApi"}},[a("el-tab-pane",{attrs:{label:"Params",name:"params"}},[a("h5",[t._v("Query Params")]),t._v(" "),t._l(t.params,function(e){return a("div",{staticClass:"demo-input-suffix",staticStyle:{"margin-bottom":"10px"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"KEY",size:"small"},model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"param.key"}}),t._v("\n              -\n              "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"VALUE",size:"small"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"param.value"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",round:"",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:t.addParamKv}},[t._v("ADD")]),t._v(" "),1!==t.params.length?a("el-button",{attrs:{type:"danger",round:"",icon:"el-icon-remove-outline",size:"small"},on:{click:function(a){return t.delParamKv(e)}}},[t._v("DELETE")]):t._e()],1)})],2),t._v(" "),a("el-tab-pane",{attrs:{label:"Headers",name:"headers"}},[a("h5",[t._v("Headers")]),t._v(" "),t._l(t.headers,function(e){return a("div",{staticClass:"demo-input-suffix",staticStyle:{"margin-bottom":"10px"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"KEY",size:"small"},model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"header.key"}}),t._v("\n            -\n            "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"VALUE",size:"small"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"header.value"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",round:"",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:t.addHeaderKv}},[t._v("ADD")]),t._v(" "),1!==t.headers.length?a("el-button",{attrs:{type:"danger",round:"",icon:"el-icon-remove-outline",size:"small"},on:{click:function(a){return t.delHeaderKv(e)}}},[t._v("DELETE")]):t._e()],1)})],2),t._v(" "),a("el-tab-pane",{attrs:{label:"Cookies",name:"cookies"}},[a("h5",[t._v("Cookies")]),t._v(" "),t._l(t.cookies,function(e){return a("div",{staticClass:"demo-input-suffix",staticStyle:{"margin-bottom":"10px"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"KEY",size:"small"},model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"cookie.key"}}),t._v("\n              -\n              "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"VALUE",size:"small"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"cookie.value"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",round:"",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:t.addCookieKv}},[t._v("ADD")]),t._v(" "),1!==t.cookies.length?a("el-button",{attrs:{type:"danger",round:"",icon:"el-icon-remove-outline",size:"small"},on:{click:function(a){return t.delCookieKv(e)}}},[t._v("DELETE")]):t._e()],1)})],2),t._v(" "),"GET"!==t.api.method?a("el-tab-pane",{attrs:{label:"Body",name:"body"}},[a("el-radio-group",{model:{value:t.contentType,callback:function(e){t.contentType=e},expression:"contentType"}},[a("el-radio",{attrs:{label:1}},[t._v("form-data")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("x-www-form-urlencoded")]),t._v(" "),a("el-radio",{attrs:{label:3}},[t._v("json")])],1),t._v(" "),t._l(t.formParams,function(e){return 1===t.contentType?a("div",{staticClass:"demo-input-suffix",staticStyle:{"margin-top":"20px"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"KEY",size:"small"},model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"formParam.key"}}),t._v("\n              -\n              "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"VALUE",size:"small"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"formParam.value"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",round:"",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:t.addFormParamKv}},[t._v("ADD")]),t._v(" "),1!==t.formParams.length?a("el-button",{attrs:{type:"danger",round:"",icon:"el-icon-remove-outline",size:"small"},on:{click:function(a){return t.delFormParamKv(e)}}},[t._v("DELETE")]):t._e()],1):t._e()}),t._v(" "),t._l(t.urlParams,function(e){return 2===t.contentType?a("div",{staticClass:"demo-input-suffix",staticStyle:{"margin-top":"20px"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"KEY",size:"small"},model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"urlParam.key"}}),t._v("\n              -\n              "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"VALUE",size:"small"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"urlParam.value"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",round:"",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:t.addUrlParamKv}},[t._v("ADD")]),t._v(" "),1!==t.urlParams.length?a("el-button",{attrs:{type:"danger",round:"",icon:"el-icon-remove-outline",size:"small"},on:{click:function(a){return t.delUrlParamKv(e)}}},[t._v("DELETE")]):t._e()],1):t._e()}),t._v(" "),3===t.contentType?a("div",{staticClass:"demo-input-suffix",staticStyle:{"margin-top":"20px"}},[a("Code",{attrs:{mime:"application/json"},model:{value:t.json,callback:function(e){t.json=e},expression:"json"}}),t._v(" "),a("json-viewer",{staticStyle:{height:"auto",width:"100%",float:"right"},attrs:{value:this.jsonFormatObject,"expand-depth":5,copyable:"",boxed:"",sort:""}})],1):t._e()],2):t._e()],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"关联参数设置",name:"paramSave"}},[a("strong",[t._v("关联参数")]),t._v(" "),a("el-tooltip",{attrs:{content:"KEY为自定义的变量名，可供后续用例使用，可选择从响应体或者响应头提取，可选择关联方式为JSONPATH OR 正则表达式",placement:"top"}},[a("i",{staticClass:"el-icon-question"})]),t._v(" "),t._l(t.saves,function(e){return a("div",{staticStyle:{"margin-top":"20px"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"saveFrom",size:"small"},model:{value:e.saveFrom,callback:function(a){t.$set(e,"saveFrom",a)},expression:"save.saveFrom"}},[a("el-option",{attrs:{label:"Response Body",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"Response Header",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"Cookie",value:"3"}})],1),t._v(" "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"KEY",size:"small"},model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"save.key"}}),t._v(" "),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"saveBy",size:"small"},on:{change:function(a){return t.clearSave(e)}},model:{value:e.saveBy,callback:function(a){t.$set(e,"saveBy",a)},expression:"save.saveBy"}},[a("el-option",{attrs:{label:"JSONPATH",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"REGEX",value:"2"}})],1),t._v(" "),"2"!==e.saveBy?a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"JSONPATH",size:"small"},model:{value:e.jsonpath,callback:function(a){t.$set(e,"jsonpath",a)},expression:"save.jsonpath"}}):t._e(),t._v(" "),"2"===e.saveBy?a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"REGEX",size:"small"},model:{value:e.regex,callback:function(a){t.$set(e,"regex",a)},expression:"save.regex"}}):t._e(),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",round:"",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:t.addSaveKv}},[t._v("ADD")]),t._v(" "),1!==e.length?a("el-button",{attrs:{type:"danger",round:"",icon:"el-icon-remove-outline",size:"small"},on:{click:function(a){return t.delSaveKv(e)}}},[t._v("DELETE")]):t._e()],1)})],2),t._v(" "),a("el-tab-pane",{attrs:{label:"断言设置",name:"verify"}},[a("strong",[t._v("Assertion")]),t._v(" "),a("el-tooltip",{attrs:{content:"设置相关断言，可选择正则断言 OR JSONPATH 断言,支持多种关系选择",placement:"top"}},[a("i",{staticClass:"el-icon-question"})]),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("el-radio-group",{model:{value:t.assertType,callback:function(e){t.assertType=e},expression:"assertType"}},[a("el-radio",{attrs:{label:1}},[t._v("\n            Assert Point\n            "),a("el-tooltip",{attrs:{content:"断言点添加",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("\n            JSON Assert\n            "),a("el-tooltip",{attrs:{content:"JSON断言添加，只会比对JSON中存在的字段是否一致",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1)],1),t._v(" "),t._l(t.asserts,function(e){return 1===t.assertType?a("div",{staticStyle:{"margin-top":"20px"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"assertBy",size:"small"},on:{change:function(a){return t.clearAssert(e)}},model:{value:e.assertBy,callback:function(a){t.$set(e,"assertBy",a)},expression:"assert.assertBy"}},[a("el-option",{attrs:{label:"JSONPATH",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"REGEX",value:"2"}})],1),t._v(" "),"2"!==e.assertBy?a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"JSONPATH",size:"small"},model:{value:e.jsonpath,callback:function(a){t.$set(e,"jsonpath",a)},expression:"assert.jsonpath"}}):t._e(),t._v(" "),"2"===e.assertBy?a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"REGEX",size:"small"},model:{value:e.regex,callback:function(a){t.$set(e,"regex",a)},expression:"assert.regex"}}):t._e(),t._v(" "),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"relation",size:"small"},model:{value:e.relation,callback:function(a){t.$set(e,"relation",a)},expression:"assert.relation"}},[a("el-option",{attrs:{label:"is",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"not",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"contains",value:"3"}}),t._v(" "),a("el-option",{attrs:{label:"not contains",value:"4"}}),t._v(" "),a("el-option",{attrs:{label:"in",value:"5"}}),t._v(" "),a("el-option",{attrs:{label:"not in",value:"6"}}),t._v(" "),a("el-option",{attrs:{label:"is null",value:"7"}}),t._v(" "),a("el-option",{attrs:{label:"not null",value:"8"}}),t._v(" "),a("el-option",{attrs:{label:">",value:"9"}}),t._v(" "),a("el-option",{attrs:{label:"<",value:"10"}}),t._v(" "),a("el-option",{attrs:{label:">=",value:"11"}}),t._v(" "),a("el-option",{attrs:{label:"<=",value:"12"}})],1),t._v(" "),"7"===e.relation||"8"===e.relation?a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"EXPECT",size:"small",disabled:""},model:{value:e.expect,callback:function(a){t.$set(e,"expect",a)},expression:"assert.expect"}}):t._e(),t._v(" "),"7"!==e.relation&&"8"!==e.relation?a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"EXPECT",size:"small"},model:{value:e.expect,callback:function(a){t.$set(e,"expect",a)},expression:"assert.expect"}}):t._e(),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",round:"",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:t.addAssertKv}},[t._v("ADD")]),t._v(" "),1!==t.asserts.length?a("el-button",{attrs:{type:"danger",round:"",icon:"el-icon-remove-outline",size:"small"},on:{click:function(a){return t.delAssertKv(e)}}},[t._v("DELETE")]):t._e()],1):t._e()}),t._v(" "),2===t.assertType?a("div",{staticStyle:{"margin-top":"30px"}},[a("Code",{attrs:{mime:"application/json"},model:{value:t.jsonAssert,callback:function(e){t.jsonAssert=e},expression:"jsonAssert"}})],1):t._e()],2),t._v(" "),a("el-tab-pane",{attrs:{label:"延迟时间",name:"delayTime"}},[a("el-form-item",{attrs:{label:"延迟时间(s)"}},[a("el-input",{model:{value:t.delayTime,callback:function(e){t.delayTime=e},expression:"delayTime"}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"全局属性注入",name:"cookieAndHeader"}},[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"Global Variables"}},[a("h5",[t._v("Global Variables")]),t._v(" "),t._l(t.globalVariables,function(e){return a("div",{staticClass:"demo-input-suffix",staticStyle:{"margin-bottom":"10px"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"KEY",size:"small"},model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"globalVariable.key"}}),t._v("\n              -\n              "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"VALUE",size:"small"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"globalVariable.value"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",round:"",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:t.addGlobalVariableKv}},[t._v("ADD")]),t._v(" "),1!==t.globalVariables.length?a("el-button",{attrs:{type:"danger",round:"",icon:"el-icon-remove-outline",size:"small"},on:{click:function(a){return t.delGlobalVariableKv(e)}}},[t._v("DELETE")]):t._e()],1)})],2),t._v(" "),a("el-tab-pane",{attrs:{label:"Global Headers"}},[a("h5",[t._v("Global Headers")]),t._v(" "),t._l(t.globalHeaders,function(e){return a("div",{staticClass:"demo-input-suffix",staticStyle:{"margin-bottom":"10px"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"KEY",size:"small"},model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"globalHeader.key"}}),t._v("\n              -\n              "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"VALUE",size:"small"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"globalHeader.value"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",round:"",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:t.addGlobalHeaderKv}},[t._v("ADD")]),t._v(" "),1!==t.globalHeaders.length?a("el-button",{attrs:{type:"danger",round:"",icon:"el-icon-remove-outline",size:"small"},on:{click:function(a){return t.delGlobalHeaderKv(e)}}},[t._v("DELETE")]):t._e()],1)})],2),t._v(" "),a("el-tab-pane",{attrs:{label:"Global Cookies"}},[a("h5",[t._v("Global Cookies")]),t._v(" "),t._l(t.globalCookies,function(e){return a("div",{staticClass:"demo-input-suffix",staticStyle:{"margin-bottom":"10px"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"KEY",size:"small"},model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"globalCookie.key"}}),t._v("\n              -\n              "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"VALUE",size:"small"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"globalCookie.value"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",round:"",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:t.addGlobalCookieKv}},[t._v("ADD")]),t._v(" "),1!==t.globalCookies.length?a("el-button",{attrs:{type:"danger",round:"",icon:"el-icon-remove-outline",size:"small"},on:{click:function(a){return t.delGlobalCookieKv(e)}}},[t._v("DELETE")]):t._e()],1)})],2)],1)],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addCase}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:t.closeAddCase}},[t._v("取 消")])],1)])},staticRenderFns:[]},it={data:function(){return{caseId:"",activeName:"apiInfo",activeNameForApi:"params",setId:"",contentType:1,assertType:1,methodOptions:[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"DELETE",label:"DELETE"}],api:{url:"",method:"GET"},params:[{key:"",value:""}],headers:[{key:"",value:""}],globalVariables:[{key:"",value:""}],globalHeaders:[{key:"",value:""}],globalCookies:[{key:"",value:""}],formParams:[{key:"",value:""}],urlParams:[{key:"",value:""}],cookies:[{key:"",value:""}],json:"",saves:[{saveFrom:"",saveBy:"",key:"",jsonpath:"",regex:""}],asserts:[{assertBy:"",jsonpath:"",regex:"",relation:"",expect:""}],delayTime:"0",jsonAssert:"",caseInfo:{caseDesc:""},rules:{caseDesc:[{required:!0,message:"请输入用例描述",trigger:"blur"}]}}},methods:{handleClick:function(t,e){console.log(t,e)},addParamKv:function(){this.params.push({key:"",value:""})},delParamKv:function(t){this.params.splice(this.params.indexOf(t),1)},addHeaderKv:function(){this.headers.push({key:"",value:""})},delHeaderKv:function(t){this.headers.splice(this.headers.indexOf(t),1)},addFormParamKv:function(){this.formParams.push({key:"",value:""})},delFormParamKv:function(t){this.formParams.splice(this.formParams.indexOf(t),1)},addUrlParamKv:function(){this.urlParams.push({key:"",value:""})},delUrlParamKv:function(t){this.urlParams.splice(this.urlParams.indexOf(t),1)},addCookieKv:function(){this.cookies.push({key:"",value:""})},delCookieKv:function(t){this.cookies.splice(this.cookies.indexOf(t),1)},addGlobalCookieKv:function(){this.globalCookies.push({key:"",value:""})},addGlobalVariableKv:function(){this.globalVariables.push({key:"",value:""})},delGlobalVariableKv:function(t){this.globalVariables.splice(this.globalVariables.indexOf(t),1)},delGlobalCookieKv:function(t){this.globalCookies.splice(this.globalCookies.indexOf(t),1)},addGlobalHeaderKv:function(){this.globalHeaders.push({key:"",value:""})},delGlobalHeaderKv:function(t){this.globalHeaders.splice(this.globalHeaders.indexOf(t),1)},addSaveKv:function(){this.saves.push({saveFrom:"",saveBy:"",key:"",jsonpath:"",regex:""})},delSaveKv:function(t){this.saves.splice(this.saves.indexOf(t),1)},clearSave:function(t){t.jsonpath="",t.regex=""},clearAssert:function(t){t.jsonpath="",t.regex=""},addAssertKv:function(){this.asserts.push({assertBy:"",jsonpath:"",regex:"",relation:"",expect:""})},delAssertKv:function(t){this.asserts.splice(this.asserts.indexOf(t),1)},updateCase:function(){var t=this,e={},a=this.api.url,s={},i={},o={},l={},n={},r={},c=[],d=[];if(1===this.contentType){for(var u in this.formParams){if(1===this.formParams.length&&""===this.formParams[0].key){e=null;break}e[this.formParams[u].key]=this.formParams[u].value}null!==e&&(e=f()(e))}else if(2===this.contentType){var p=[];for(var m in e=null,this.urlParams){if(1===this.urlParams.length&&""===this.urlParams[0].key)break;var h=this.urlParams[m].key,v=this.urlParams[m].value;p.push(h+"="+v)}0!==p.length&&(a=a+"?"+p.join("&"))}else e=this.json;for(var g in this.params){if(1===this.params.length&&""===this.params[0].key){s=null;break}s[this.params[g].key]=this.params[g].value}for(var b in null!==s&&(s=f()(s)),this.headers){if(1===this.headers.length&&""===this.headers[0].key){i=null;break}i[this.headers[b].key]=this.headers[b].value}for(var y in null!==i&&(i=f()(i)),this.cookies){if(1===this.cookies.length&&""===this.cookies[0].key){o=null;break}o[this.cookies[y].key]=this.cookies[y].value}for(var _ in null!=o&&(o=f()(o)),this.globalVariables){if(1===this.globalVariables.length&&""===this.globalVariables[0].key){l=null;break}l[this.globalVariables[_].key]=this.globalVariables[_].value}for(var k in null!==l&&(l=f()(l)),this.globalHeaders){if(1===this.globalHeaders.length&&""===this.globalHeaders[0].key){n=null;break}n[this.globalHeaders[k].key]=this.globalHeaders[k].value}for(var x in null!==n&&(n=f()(n)),this.globalCookies){if(1===this.globalCookies.length&&""===this.globalCookies[0].key){r=null;break}r[this.globalCookies[x].key]=this.globalCookies[x].value}for(var w in null!==r&&(r=f()(r)),this.saves){if(1===this.saves.length&&""===this.saves[0].key){c=null;break}var S={caseId:this.caseId,jexpression:this.saves[w].jsonpath,paramKey:this.saves[w].key,regex:this.saves[w].regex,saveFrom:this.saves[w].saveFrom,saveType:this.saves[w].saveBy};c.push(S)}for(var $ in this.asserts){if(1===this.asserts.length&&""===this.asserts[0].expect){d=null;break}var T={caseId:this.caseId,verifyType:this.asserts[$].assertBy,rexpression:this.asserts[$].regex,jexpression:this.asserts[$].jsonpath,expect:this.asserts[$].expect,relationShip:this.asserts[$].relation};d.push(T)}var D={caseId:this.caseId,body:e,contentType:this.contentType,caseDesc:this.caseInfo.caseDesc,caseType:1,cookies:o,delayTime:this.delayTime,globalVariables:l,globalCookies:r,globalHeaders:n,header:i,jsonAssert:this.jsonAssert?this.jsonAssert:null,url:a,method:this.api.method,param:s,saves:c,verify:d,setId:this.setId};this.$refs.caseInfo.validate(function(e){e&&t.$axios.put("/apis/testcase/"+t.caseId,D).then(function(e){t.loading=!0,200===e.data.code?(t.closeEditCase(),t.$notify({title:"操作成功",type:"success",message:e.data.msg}),t.$emit("getCaseInfo")):t.$notify({title:"操作失败",type:"warning",message:e.data.msg})}).catch(function(e){t.$notify({title:"操作失败",type:"error",message:e})})})},closeEditCase:function(){this.api={url:"",method:"GET"},this.params=[{key:"",value:""}],this.urlParams=[{key:"",value:""}],this.headers=[{key:"",value:""}],this.cookie=[{key:"",value:""}],this.formParams=[{key:"",value:""}],this.globalVariables=[{key:"",value:""}],this.globalHeaders=[{key:"",value:""}],this.globalCookies=[{key:"",value:""}],this.json="",this.saves=[{caseId:this.caseId,saveFrom:"",saveBy:"",key:"",jsonpath:"",regex:""}],this.asserts=[{caseId:this.caseId,assertBy:"",jsonpath:"",regex:"",relation:"",expect:""}],this.delayTime="0",this.jsonAssert="",this.caseInfo.caseDesc="",this.activeName="apiInfo",this.activeNameForApi="params",this.contentType=1,this.assertType=1,this.$refs.caseInfo.resetFields(),this.$store.commit("changeEditcaseForApiShow",!1)}},computed:{jsonFormatObject:function(){if(""===this.json)return{};try{return JSON.parse(this.json)}catch(t){return{msg:"JSON格式化错误！"+t}}}},watch:{"$store.state.caseInfo":function(t){if(this.setId=t.setId,this.caseId=t.caseId,this.caseInfo.caseDesc=t.caseDesc,this.delayTime=t.delayTime,this.jsonAssert=t.jsonAssert,this.api.method=t.method,this.api.url=-1!==t.url.indexOf("?")?t.url.split("?")[0]:t.url,this.contentType=parseInt(t.contentType),1===this.contentType){if(null!=t.body){var e=JSON.parse(t.body);for(var a in this.formParams=[],e)this.formParams.push({key:a,value:e[a]})}}else if(2===this.contentType){if(-1!==t.url.indexOf("?")){var s=t.url.split("?")[1].split("&");for(var i in this.urlParams=[],s){var o=s[i].split("=")[0],l=s[i].split("=")[1];console.log(o),console.log(l),this.urlParams.push({key:o,value:l})}}}else this.json=t.body?t.body:"";if(null!==t.cookies&&""!==t.cookies){var n=JSON.parse(t.cookies);for(var r in this.cookies=[],n)this.cookies.push({key:r,value:n[r]})}if(null!==t.globalVariables&&""!==t.globalVariables){var c=JSON.parse(t.globalVariables);for(var d in this.globalVariables=[],c)this.globalVariables.push({key:d,value:c[d]})}if(null!==t.globalCookies&&""!==t.globalCookies){var u=JSON.parse(t.globalCookies);for(var p in this.globalCookies=[],u)this.globalCookies.push({key:p,value:u[p]})}if(null!==t.globalHeaders&&""!==t.globalHeaders){var m=JSON.parse(t.globalHeaders);for(var h in this.globalHeaders=[],m)this.globalHeaders.push({key:h,value:m[h]})}if(null!==t.header&&""!==t.header){var f=JSON.parse(t.header);for(var v in this.headers=[],f)this.headers.push({key:v,value:f[v]})}if(null!==t.param&&""!==t.param){var g=JSON.parse(t.param);for(var b in this.params=[],g)this.params.push({key:b,value:g[b]})}if(null!==t.saves&&0!==t.saves.length)for(var y in this.saves=[],t.saves){var _={caseId:this.caseId,saveFrom:t.saves[y].saveFrom,saveBy:t.saves[y].saveType,key:t.saves[y].paramKey,jsonpath:t.saves[y].jexpression,regex:t.saves[y].regex};this.saves.push(_)}if(null!==t.verify&&0!==t.verify.length)for(var k in this.asserts=[],t.verify){var x={caseId:this.caseId,assertBy:t.verify[k].verifyType,jsonpath:t.verify[k].jexpression,regex:t.verify[k].rexpression,relation:t.verify[k].relationShip,expect:t.verify[k].expect};this.asserts.push(x)}}},components:{Code:K}},ot={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticStyle:{height:"100%"},attrs:{visible:t.$store.state.editcaseforapishow,"close-on-click-modal":!1,"append-to-body":!0,width:"70%"},on:{"update:visible":function(e){return t.$set(t.$store.state,"editcaseforapishow",e)},close:t.closeEditCase}},[a("div",{attrs:{id:"caseAdd"}},[a("h2",{staticStyle:{"text-align":"left"}},[t._v("编辑接口用例")]),t._v(" "),a("el-form",{ref:"caseInfo",staticClass:"demo-ruleForm",attrs:{model:t.caseInfo,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用例描述",prop:"caseDesc"}},[a("el-input",{model:{value:t.caseInfo.caseDesc,callback:function(e){t.$set(t.caseInfo,"caseDesc",e)},expression:"caseInfo.caseDesc"}})],1),t._v(" "),a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"接口基本信息",name:"apiInfo"}},[a("el-input",{attrs:{placeholder:"Enter Request URL"},model:{value:t.api.url,callback:function(e){t.$set(t.api,"url",e)},expression:"api.url"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{slot:"prepend",placeholder:"Request Method"},slot:"prepend",model:{value:t.api.method,callback:function(e){t.$set(t.api,"method",e)},expression:"api.method"}},[a("el-option",{attrs:{label:"GET",value:"GET"}}),t._v(" "),a("el-option",{attrs:{label:"POST",value:"POST"}}),t._v(" "),a("el-option",{attrs:{label:"PUT",value:"PUT"}}),t._v(" "),a("el-option",{attrs:{label:"DELETE",value:"DELETE"}})],1),t._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search",disabled:""},slot:"append"})],1),t._v(" "),a("el-tabs",{staticStyle:{"margin-top":"15px"},attrs:{type:"border-card"},on:{"tab-click":t.handleClick},model:{value:t.activeNameForApi,callback:function(e){t.activeNameForApi=e},expression:"activeNameForApi"}},[a("el-tab-pane",{attrs:{label:"Params",name:"params"}},[a("h5",[t._v("Query Params")]),t._v(" "),t._l(t.params,function(e){return a("div",{staticClass:"demo-input-suffix",staticStyle:{"margin-bottom":"10px"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"KEY",size:"small"},model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"param.key"}}),t._v("\n                -\n                "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"VALUE",size:"small"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"param.value"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",round:"",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:t.addParamKv}},[t._v("ADD")]),t._v(" "),1!==t.params.length?a("el-button",{attrs:{type:"danger",round:"",icon:"el-icon-remove-outline",size:"small"},on:{click:function(a){return t.delParamKv(e)}}},[t._v("DELETE")]):t._e()],1)})],2),t._v(" "),a("el-tab-pane",{attrs:{label:"Headers",name:"headers"}},[a("h5",[t._v("Headers")]),t._v(" "),t._l(t.headers,function(e){return a("div",{staticClass:"demo-input-suffix",staticStyle:{"margin-bottom":"10px"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"KEY",size:"small"},model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"header.key"}}),t._v("\n                -\n                "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"VALUE",size:"small"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"header.value"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",round:"",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:t.addHeaderKv}},[t._v("ADD")]),t._v(" "),1!==t.headers.length?a("el-button",{attrs:{type:"danger",round:"",icon:"el-icon-remove-outline",size:"small"},on:{click:function(a){return t.delHeaderKv(e)}}},[t._v("DELETE")]):t._e()],1)})],2),t._v(" "),a("el-tab-pane",{attrs:{label:"Cookies",name:"cookies"}},[a("h5",[t._v("Cookies")]),t._v(" "),t._l(t.cookies,function(e){return a("div",{staticClass:"demo-input-suffix",staticStyle:{"margin-bottom":"10px"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"KEY",size:"small"},model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"cookie.key"}}),t._v("\n                -\n                "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"VALUE",size:"small"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"cookie.value"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",round:"",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:t.addCookieKv}},[t._v("ADD")]),t._v(" "),1!==t.cookies.length?a("el-button",{attrs:{type:"danger",round:"",icon:"el-icon-remove-outline",size:"small"},on:{click:function(a){return t.delCookieKv(e)}}},[t._v("DELETE")]):t._e()],1)})],2),t._v(" "),"GET"!==t.api.method?a("el-tab-pane",{attrs:{label:"Body",name:"body"}},[a("el-radio-group",{model:{value:t.contentType,callback:function(e){t.contentType=e},expression:"contentType"}},[a("el-radio",{attrs:{label:1}},[t._v("form-data")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("x-www-form-urlencoded")]),t._v(" "),a("el-radio",{attrs:{label:3}},[t._v("json")])],1),t._v(" "),t._l(t.formParams,function(e){return 1===t.contentType?a("div",{staticClass:"demo-input-suffix",staticStyle:{"margin-top":"20px"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"KEY",size:"small"},model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"formParam.key"}}),t._v("\n                -\n                "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"VALUE",size:"small"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"formParam.value"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",round:"",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:t.addFormParamKv}},[t._v("ADD")]),t._v(" "),1!==t.formParams.length?a("el-button",{attrs:{type:"danger",round:"",icon:"el-icon-remove-outline",size:"small"},on:{click:function(a){return t.delFormParamKv(e)}}},[t._v("DELETE")]):t._e()],1):t._e()}),t._v(" "),t._l(t.urlParams,function(e){return 2===t.contentType?a("div",{staticClass:"demo-input-suffix",staticStyle:{"margin-top":"20px"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"KEY",size:"small"},model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"urlParam.key"}}),t._v("\n                -\n                "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"VALUE",size:"small"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"urlParam.value"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",round:"",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:t.addUrlParamKv}},[t._v("ADD")]),t._v(" "),1!==t.urlParams.length?a("el-button",{attrs:{type:"danger",round:"",icon:"el-icon-remove-outline",size:"small"},on:{click:function(a){return t.delUrlParamKv(e)}}},[t._v("DELETE")]):t._e()],1):t._e()}),t._v(" "),3===t.contentType?a("div",{staticClass:"demo-input-suffix",staticStyle:{"margin-top":"20px"}},[a("Code",{attrs:{mime:"application/json"},model:{value:t.json,callback:function(e){t.json=e},expression:"json"}}),t._v(" "),a("json-viewer",{staticStyle:{height:"auto",width:"100%",float:"right"},attrs:{value:this.jsonFormatObject,"expand-depth":5,copyable:"",boxed:"",sort:""}})],1):t._e()],2):t._e()],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"关联参数设置",name:"paramSave"}},[a("strong",[t._v("关联参数")]),t._v(" "),a("el-tooltip",{attrs:{content:"KEY为自定义的变量名，可供后续用例使用，可选择从响应体或者响应头提取，可选择关联方式为JSONPATH OR 正则表达式",placement:"top"}},[a("i",{staticClass:"el-icon-question"})]),t._v(" "),t._l(t.saves,function(e){return a("div",{staticStyle:{"margin-top":"20px"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"saveFrom",clearable:"",size:"small"},model:{value:e.saveFrom,callback:function(a){t.$set(e,"saveFrom",a)},expression:"save.saveFrom"}},[a("el-option",{attrs:{label:"Response Body",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"Response Header",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"Cookie",value:"3"}})],1),t._v(" "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"KEY",size:"small"},model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"save.key"}}),t._v(" "),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"saveBy",clearable:"",size:"small"},on:{change:function(a){return t.clearSave(e)}},model:{value:e.saveBy,callback:function(a){t.$set(e,"saveBy",a)},expression:"save.saveBy"}},[a("el-option",{attrs:{label:"JSONPATH",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"REGEX",value:"2"}})],1),t._v(" "),"2"!==e.saveBy?a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"JSONPATH",size:"small"},model:{value:e.jsonpath,callback:function(a){t.$set(e,"jsonpath",a)},expression:"save.jsonpath"}}):t._e(),t._v(" "),"2"===e.saveBy?a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"REGEX",size:"small"},model:{value:e.regex,callback:function(a){t.$set(e,"regex",a)},expression:"save.regex"}}):t._e(),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",round:"",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:t.addSaveKv}},[t._v("ADD")]),t._v(" "),1!==e.length?a("el-button",{attrs:{type:"danger",round:"",icon:"el-icon-remove-outline",size:"small"},on:{click:function(a){return t.delSaveKv(e)}}},[t._v("DELETE")]):t._e()],1)})],2),t._v(" "),a("el-tab-pane",{attrs:{label:"断言设置",name:"verify"}},[a("strong",[t._v("Assertion")]),t._v(" "),a("el-tooltip",{attrs:{content:"设置相关断言，可选择正则断言 OR JSONPATH 断言,支持多种关系选择",placement:"top"}},[a("i",{staticClass:"el-icon-question"})]),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("el-radio-group",{model:{value:t.assertType,callback:function(e){t.assertType=e},expression:"assertType"}},[a("el-radio",{attrs:{label:1}},[t._v("\n              Assert Point\n              "),a("el-tooltip",{attrs:{content:"断言点添加",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("\n              JSON Assert\n              "),a("el-tooltip",{attrs:{content:"JSON断言添加，只会比对JSON中存在的字段是否一致",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1)],1),t._v(" "),t._l(t.asserts,function(e){return 1===t.assertType?a("div",{staticStyle:{"margin-top":"20px"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"assertBy",clearable:"",size:"small"},on:{change:function(a){return t.clearAssert(e)}},model:{value:e.assertBy,callback:function(a){t.$set(e,"assertBy",a)},expression:"assert.assertBy"}},[a("el-option",{attrs:{label:"JSONPATH",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"REGEX",value:"2"}})],1),t._v(" "),"2"!==e.assertBy?a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"JSONPATH",size:"small"},model:{value:e.jsonpath,callback:function(a){t.$set(e,"jsonpath",a)},expression:"assert.jsonpath"}}):t._e(),t._v(" "),"2"===e.assertBy?a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"REGEX",size:"small"},model:{value:e.regex,callback:function(a){t.$set(e,"regex",a)},expression:"assert.regex"}}):t._e(),t._v(" "),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"relation",clearable:"",size:"small"},model:{value:e.relation,callback:function(a){t.$set(e,"relation",a)},expression:"assert.relation"}},[a("el-option",{attrs:{label:"is",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"not",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"contains",value:"3"}}),t._v(" "),a("el-option",{attrs:{label:"not contains",value:"4"}}),t._v(" "),a("el-option",{attrs:{label:"in",value:"5"}}),t._v(" "),a("el-option",{attrs:{label:"not in",value:"6"}}),t._v(" "),a("el-option",{attrs:{label:"is null",value:"7"}}),t._v(" "),a("el-option",{attrs:{label:"not null",value:"8"}}),t._v(" "),a("el-option",{attrs:{label:">",value:"9"}}),t._v(" "),a("el-option",{attrs:{label:"<",value:"10"}}),t._v(" "),a("el-option",{attrs:{label:">=",value:"11"}}),t._v(" "),a("el-option",{attrs:{label:"<=",value:"12"}})],1),t._v(" "),"7"===e.relation||"8"===e.relation?a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"EXPECT",size:"small",disabled:""},model:{value:e.expect,callback:function(a){t.$set(e,"expect",a)},expression:"assert.expect"}}):t._e(),t._v(" "),"7"!==e.relation&&"8"!==e.relation?a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"EXPECT",size:"small"},model:{value:e.expect,callback:function(a){t.$set(e,"expect",a)},expression:"assert.expect"}}):t._e(),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",round:"",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:t.addAssertKv}},[t._v("ADD")]),t._v(" "),1!==t.asserts.length?a("el-button",{attrs:{type:"danger",round:"",icon:"el-icon-remove-outline",size:"small"},on:{click:function(a){return t.delAssertKv(e)}}},[t._v("DELETE")]):t._e()],1):t._e()}),t._v(" "),2===t.assertType?a("div",{staticStyle:{"margin-top":"30px"}},[a("Code",{attrs:{mime:"application/json"},model:{value:t.jsonAssert,callback:function(e){t.jsonAssert=e},expression:"jsonAssert"}})],1):t._e()],2),t._v(" "),a("el-tab-pane",{attrs:{label:"延迟时间",name:"delayTime"}},[a("el-form-item",{attrs:{label:"延迟时间(s)"}},[a("el-input",{model:{value:t.delayTime,callback:function(e){t.delayTime=e},expression:"delayTime"}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"全局属性注入",name:"cookieAndHeader"}},[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"Global Variables"}},[a("h5",[t._v("Global Variables")]),t._v(" "),t._l(t.globalVariables,function(e){return a("div",{staticClass:"demo-input-suffix",staticStyle:{"margin-bottom":"10px"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"KEY",size:"small"},model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"globalVariable.key"}}),t._v("\n                -\n                "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"VALUE",size:"small"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"globalVariable.value"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",round:"",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:t.addGlobalVariableKv}},[t._v("ADD")]),t._v(" "),1!==t.globalVariables.length?a("el-button",{attrs:{type:"danger",round:"",icon:"el-icon-remove-outline",size:"small"},on:{click:function(a){return t.delGlobalVariableKv(e)}}},[t._v("DELETE")]):t._e()],1)})],2),t._v(" "),a("el-tab-pane",{attrs:{label:"Global Headers"}},[a("h5",[t._v("Global Headers")]),t._v(" "),t._l(t.globalHeaders,function(e){return a("div",{staticClass:"demo-input-suffix",staticStyle:{"margin-bottom":"10px"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"KEY",size:"small"},model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"globalHeader.key"}}),t._v("\n                -\n                "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"VALUE",size:"small"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"globalHeader.value"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",round:"",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:t.addGlobalHeaderKv}},[t._v("ADD")]),t._v(" "),1!==t.globalHeaders.length?a("el-button",{attrs:{type:"danger",round:"",icon:"el-icon-remove-outline",size:"small"},on:{click:function(a){return t.delGlobalHeaderKv(e)}}},[t._v("DELETE")]):t._e()],1)})],2),t._v(" "),a("el-tab-pane",{attrs:{label:"Global Cookies"}},[a("h5",[t._v("Global Cookies")]),t._v(" "),t._l(t.globalCookies,function(e){return a("div",{staticClass:"demo-input-suffix",staticStyle:{"margin-bottom":"10px"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"KEY",size:"small"},model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"globalCookie.key"}}),t._v("\n                -\n                "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"VALUE",size:"small"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"globalCookie.value"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",round:"",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:t.addGlobalCookieKv}},[t._v("ADD")]),t._v(" "),1!==t.globalCookies.length?a("el-button",{attrs:{type:"danger",round:"",icon:"el-icon-remove-outline",size:"small"},on:{click:function(a){return t.delGlobalCookieKv(e)}}},[t._v("DELETE")]):t._e()],1)})],2)],1)],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.updateCase}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:t.closeEditCase}},[t._v("取 消")])],1)])},staticRenderFns:[]},lt={data:function(){return{logs:"",scrollLock:!1,logView:!1,setUpResult:[],executedRows:[],executedRate:0,successRate:0,caseNum:0,executeNum:0,success:0,error:0,drawer:!1,path:this.$websockerUrl+JSON.parse(localStorage.getItem("userInfo")).userId,socket:"",logSocket:"",setId:"",setName:"",loading:!0,activeNames:["setup"],activeName:"first",scripts:[],tScripts:[],setUpScripts:[],tearDownScripts:[],stScripts:[],tdScripts:[],cases:[],envInfo:{project:"",env:""},projects:[],envs:[],rules:{project:[{required:!0,message:"请选择项目",trigger:"change"}],env:[{required:!0,message:"请选择环境",trigger:"change"}]},filterMethod:function(t,e){return-1!==e.label.indexOf(t)}}},methods:{handleClick:function(t,e){console.log(t,e)},showAddCaseForApi:function(){this.$store.commit("changeAddcaseForApiShow",!0)},getScripts:function(){var t=this;this.loading=!0,this.$axios.get("/apis/script/list").then(function(e){e.data.data.forEach(function(e){t.scripts.push({key:e.scriptId,label:e.scriptName+"(DB)"}),t.tScripts.push({key:e.scriptId,label:e.scriptName+"(DB)"}),t.stScripts.push({scriptId:e.scriptId,scriptType:"DB"}),t.tdScripts.push({scriptId:e.scriptId,scriptType:"DB"})})}),this.$axios.get("/apis/testcaseset/list").then(function(e){e.data.data.forEach(function(e){t.scripts.push({key:e.setId,label:e.setName+"(SET)"}),t.tScripts.push({key:e.setId,label:e.setName+"(SET)"}),t.stScripts.push({scriptId:e.setId,scriptType:"SET"}),t.tdScripts.push({scriptId:e.setId,scriptType:"SET"})})}),this.loading=!1},getCaseInfo:function(){var t=this;this.loading=!0,this.$axios.get("/apis/testcaseset/"+this.setId+"/info").then(function(e){200===e.data.code?(t.setId=e.data.data.setId,t.setName=e.data.data.setName,t.envInfo.project=e.data.data.projectId,t.cases=e.data.data.testCase,null!==e.data.data.setupScript&&JSON.parse(e.data.data.setupScript).forEach(function(e){t.setUpScripts.push(e.scriptId)}),null!==e.data.data.teardownScript&&JSON.parse(e.data.data.teardownScript).forEach(function(e){t.tearDownScripts.push(e.scriptId)})):t.$notify({title:"操作失败",type:"warning",message:e.data.msg})}).catch(function(e){t.$notify({title:"操作失败",type:"error",message:e})}),this.loading=!1},updateCase:function(t){var e=this;this.$axios.get("/apis/testcase/"+t.caseId+"/info").then(function(t){e.$store.commit("setCaseInfo",t.data.data),e.$store.commit("changeEditcaseForApiShow",!0)})},upCase:function(t){var e=this,a=new FormData;a.append("caseId",t.caseId),a.append("move","up"),this.$axios.put("/apis/testcase/"+t.caseId+"/order",a).then(function(t){200===t.data.code?e.$notify({title:"操作成功",type:"success",message:t.data.msg}):e.$notify({title:"操作失败",type:"warning",message:t.data.msg}),e.getCaseInfo()}).catch(function(t){e.$notify({title:"操作失败",type:"error",message:t})})},downCase:function(t){var e=this,a=new FormData;a.append("caseId",t.caseId),a.append("move","down"),this.$axios.put("/apis/testcase/"+t.caseId+"/order",a).then(function(t){200===t.data.code?e.$notify({title:"操作成功",type:"success",message:t.data.msg}):e.$notify({title:"操作失败",type:"warning",message:t.data.msg}),e.getCaseInfo()}).catch(function(t){e.$notify({title:"操作失败",type:"error",message:t})})},copyTestCase:function(t){var e=this;this.$confirm("确定要复制吗？").then(function(a){e.$axios.post("/apis/testcase/copyTestCase/"+t.caseId).then(function(t){200===t.data.code?e.$notify({title:"操作成功",type:"success",message:t.data.msg}):e.$notify({title:"操作失败",type:"warning",message:t.data.msg}),e.getCaseInfo()}).catch(function(t){e.$notify({title:"操作失败",type:"error",message:t})})})},deleteTestCase:function(t){var e=this;this.$confirm("确定要删除吗？").then(function(a){e.$axios.delete("/apis/testcase/"+t.caseId).then(function(t){200===t.data.code?e.$notify({title:"操作成功",type:"success",message:t.data.msg}):e.$notify({title:"操作失败",type:"warning",message:t.data.msg}),e.getCaseInfo()}).catch(function(t){e.$notify({title:"操作失败",type:"error",message:t})})})},getProjects:function(){var t=this;this.$axios.get("/apis/project/list").then(function(e){t.projects=e.data.data}).catch(function(e){t.$notify({title:"失败",type:"error",message:e})})},getEnvs:function(){var t=this;this.envInfo.env="",this.$axios.get("/apis/project/env?projectId="+this.envInfo.project).then(function(e){200===e.data.code?t.envs=e.data.data:t.$notify({title:"操作失败",type:"warning",message:e.data.msg})}).catch(function(e){t.$notify({title:"操作失败",type:"error",message:e})})},closeView:function(){this.setName="",this.$refs.envInfo.resetFields(),this.envs=[],this.envInfo={project:"",env:""},this.activeName="first",this.setUpScripts=[],this.tearDownScripts=[],this.tScripts=[],this.scripts=[],this.stScripts=[],this.tdScripts=[],this.activeNames=["setup"],this.clearLog(),this.getScripts()},saveSetupScript:function(){var t=this,e=[];for(var a in console.log(this.stScripts),this.setUpScripts)for(var s in this.stScripts)this.setUpScripts[a]===this.stScripts[s].scriptId&&(console.log(this.stScripts[s].scriptId),e.push(this.stScripts[s]));var i=new FormData;i.append("setupScript",f()(e)),this.$axios.put("/apis/testcaseset/setup/"+this.setId,i).then(function(e){200===e.data.code?t.$notify({title:"操作成功",type:"success",message:e.data.msg}):t.$notify({title:"操作失败",type:"warning",message:e.data.msg})}).catch(function(e){t.$notify({title:"操作失败",type:"error",message:e})})},saveteardownScript:function(){var t=this,e=[];for(var a in this.tearDownScripts)for(var s in this.tdScripts)this.tearDownScripts[a]===this.tdScripts[s].scriptId&&e.push(this.tdScripts[s]);var i=new FormData;i.append("teardownScript",f()(e)),this.$axios.put("/apis/testcaseset/teardown/"+this.setId,i).then(function(e){200===e.data.code?t.$notify({title:"操作成功",type:"success",message:e.data.msg}):t.$notify({title:"操作失败",type:"warning",message:e.data.msg})}).catch(function(e){t.$notify({title:"操作失败",type:"error",message:e})})},testCaseSet:function(){var t=this;this.$refs.envInfo.validate(function(e){if(e){var a=new FormData;a.append("envId",t.envInfo.env),t.$axios.post("/apis/testcaseset/execute/"+t.setId,a).then(function(e){200===e.data.code||t.$notify({title:"操作失败",type:"warning",message:e.data.msg,position:"top-left"})}).catch(function(e){t.$notify({title:"操作失败",type:"error",message:e,position:"top-left"})}),t.clearLog(),t.drawer=!0}else t.activeName="forth"})},fixScript:function(t){this.drawer=!1,this.closeView(),this.$store.commit("changeAddCaseShow",!1),this.$emit("addCase",t.scriptId)},clearLog:function(){this.success=0,this.error=0,this.executeNum=0,this.caseNum=0,this.executedRate=0,this.successRate=0,this.setUpResult=[],this.executedRows=[]},resetSetUp:function(){this.setUpScripts=[]},resetTearDown:function(){this.tearDownScripts=[]},init:function(){"undefined"==typeof WebSocket?alert("您的浏览器不支持socket"):(this.socket=new WebSocket(this.path),this.socket.onopen=this.open,this.socket.onerror=this.error,this.socket.onmessage=this.getMessage)},open:function(){console.log("socket连接成功")},error:function(){console.log("连接错误")},getMessage:function(t){console.log(t.data);var e=JSON.parse(t.data);"executedRow"===e.type&&this.executedRows.push(e),"testResult"===e.type&&(this.executedRate=parseFloat(e.executedRate),this.successRate=parseFloat(e.successRate),this.error=e.error,this.success=e.success,this.caseNum=e.caseNum,this.executeNum=e.executedNum),"setUpResult"===e.type&&this.setUpResult.push(e)},send:function(){this.socket.send(params)},close:function(){console.log("socket已经关闭")},lookLogs:function(t){this.logs=t.replace(/\n/g,"<br/>"),this.logView=!0},changeRun:function(t,e){var a=this;this.$axios.put("/apis/testcase/"+t+"/isRun/"+(1===e?0:1)).then(function(t){200===t.data.code?a.$notify({title:"操作成功",type:"success",message:t.data.msg}):a.$notify({title:"操作失败",type:"warning",message:t.data.msg}),a.getCaseInfo()}).catch(function(t){a.$notify({title:"操作失败",type:"error",message:t})})}},created:function(){this.getProjects(),this.getScripts()},mounted:function(){this.init()},destroyed:function(){this.socket.onclose=this.close},computed:{},components:{AddCaseForApi:a("VU/8")(at,st,!1,null,null,null).exports,EditCaseForApi:a("VU/8")(it,ot,!1,null,null,null).exports},watch:{"$store.state.caseSetInfo":function(t){var e=this;this.setId=t.setId,this.setName=t.setName,this.envInfo.project=t.projectId,this.getEnvs(),this.cases=t.testCase,null!==t.setupScript&&JSON.parse(t.setupScript).forEach(function(t){e.setUpScripts.push(t.scriptId)}),null!==t.teardownScript&&JSON.parse(t.teardownScript).forEach(function(t){e.tearDownScripts.push(t.scriptId)})}}},nt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticStyle:{height:"100%"},attrs:{visible:t.$store.state.addcaseshow,"close-on-click-modal":t.scrollLock,width:"80%","lock-scroll":t.scrollLock},on:{"update:visible":function(e){return t.$set(t.$store.state,"addcaseshow",e)},close:t.closeView}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:""===t.setName,expression:"setName === ''"}],attrs:{id:"caseTest"}},[a("el-card",{staticStyle:{"margin-bottom":"30px"},attrs:{shadow:"hover"}},[a("h3",[a("strong",{staticStyle:{color:"#dd6161"}},[t._v(t._s(t.setName))])]),t._v(" "),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"primary",round:"",icon:"el-icon-caret-right"},on:{click:t.testCaseSet}},[t._v("调试")]),t._v(" "),a("el-button",{attrs:{type:"primary",round:""},on:{click:function(e){t.drawer=!0}}},[t._v("实时结果")])],1)]),t._v(" "),a("AddCaseForApi",{on:{getCaseInfo:t.getCaseInfo}}),t._v(" "),a("EditCaseForApi",{on:{getCaseInfo:t.getCaseInfo}}),t._v(" "),a("el-card",{attrs:{shadow:"hover"}},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{staticStyle:{"text-align":"left"},attrs:{label:"前/后置脚本添加",name:"first"}},[a("h3",[t._v("脚本列表")]),t._v(" "),a("el-collapse",{attrs:{accordion:""},model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"前置脚本",name:"setup"}},[a("div",{staticStyle:{"text-align":"left"},attrs:{id:"setup_script"}},[a("el-transfer",{attrs:{filterable:"","filter-method":t.filterMethod,"filter-placeholder":"请输入脚本名称",data:t.scripts,titles:["脚本列表","前置脚本列表"]},model:{value:t.setUpScripts,callback:function(e){t.setUpScripts=e},expression:"setUpScripts"}}),t._v(" "),a("div",{staticStyle:{"text-align":"left"}},[a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary",round:""},on:{click:t.saveSetupScript}},[t._v("保存")]),t._v(" "),a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"danger",round:""},on:{click:t.resetSetUp}},[t._v("重置")])],1)],1)]),t._v(" "),a("el-collapse-item",{attrs:{title:"后置脚本",name:"teardown"}},[a("div",{staticStyle:{"text-align":"left"},attrs:{id:"teardown_script"}},[a("el-transfer",{attrs:{filterable:"","filter-method":t.filterMethod,"filter-placeholder":"请输入脚本名称",data:t.tScripts,titles:["脚本列表","后置脚本列表"]},model:{value:t.tearDownScripts,callback:function(e){t.tearDownScripts=e},expression:"tearDownScripts"}})],1),t._v(" "),a("div",{staticStyle:{"text-align":"left"}},[a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary",round:""},on:{click:t.saveteardownScript}},[t._v("保存")]),t._v(" "),a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"danger",round:""},on:{click:t.resetTearDown}},[t._v("重置")])],1)])],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"用例列表",name:"third"}},[a("div",{attrs:{id:"cases"}},[a("h3",{staticStyle:{"text-align":"left"}},[t._v("用例列表")]),t._v(" "),a("el-button",{staticStyle:{float:"left",margin:"10px"},attrs:{type:"primary"},on:{click:t.showAddCaseForApi}},[t._v("添加接口用例")]),t._v(" "),a("el-button",{staticStyle:{float:"left",margin:"10px"},attrs:{type:"primary"},on:{click:function(t){}}},[t._v("添加数据库用例")]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{float:"left"},attrs:{data:t.cases,stripe:"",height:"500px","default-sort":{prop:"sorting",order:"ascending"}}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"isRun",width:"80",label:"是否执行"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return t.changeRun(t.cases[e.$index].caseId,t.cases[e.$index].isRun)}},model:{value:1===t.cases[e.$index].isRun,callback:function(a){t.$set(t.cases[e.$index],"isRun === 1",a)},expression:"cases[scope.$index].isRun === 1"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"caseDesc",label:"用例名称",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{prop:"method",label:"Method",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"url",label:"URL",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{prop:"caseType",label:"用例类别"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"===t.cases[e.$index].caseType?a("p",[t._v("接口用例")]):a("p",[t._v("数据库用例")])]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"400"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),t.upCase(e.row)}}},[t._v("\n                上移\n              ")]),t._v(" "),a("el-button",{attrs:{type:"info",size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),t.downCase(e.row)}}},[t._v("\n                下移\n              ")]),t._v(" "),a("el-button",{attrs:{type:"warning",size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),t.copyTestCase(e.row)}}},[t._v("\n                复制\n              ")]),t._v(" "),a("el-button",{attrs:{size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),t.updateCase(e.row)}}},[t._v("\n                编辑\n              ")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),t.deleteTestCase(e.row)}}},[t._v("\n                移除\n              ")])]}}])})],1)],1)]),t._v(" "),a("el-tab-pane",{staticStyle:{"text-align":"left"},attrs:{label:"调试环境",name:"forth"}},[a("h3",[t._v("调试环境")]),t._v(" "),a("el-form",{ref:"envInfo",staticClass:"demo-ruleForm",staticStyle:{float:"left"},attrs:{model:t.envInfo,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"项目",prop:"project"}},[a("el-select",{attrs:{placeholder:"请选择项目",disabled:""},on:{change:t.getEnvs},model:{value:t.envInfo.project,callback:function(e){t.$set(t.envInfo,"project",e)},expression:"envInfo.project"}},t._l(t.projects,function(t){return a("el-option",{key:t.pid,attrs:{label:t.pname,value:t.pid}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"环境",prop:"env"}},[a("el-select",{attrs:{placeholder:"请选择调试环境"},model:{value:t.envInfo.env,callback:function(e){t.$set(t.envInfo,"env",e)},expression:"envInfo.env"}},t._l(t.envs,function(t){return a("el-option",{key:t.envId,attrs:{label:t.envName,value:t.envId}})}),1)],1)],1)],1)],1)],1)],1),t._v(" "),a("el-drawer",{attrs:{title:"实时执行记录",visible:t.drawer,direction:"rtl",size:"80%"},on:{"update:visible":function(e){t.drawer=e}}},[a("div",{staticStyle:{margin:"10px",display:"inline"}},[a("el-card",{staticStyle:{width:"45%",height:"30%",margin:"10px","text-align":"left",float:"left"},attrs:{shadow:"always"}},[a("div",{staticStyle:{"margin-bottom":"20px"}},[a("strong",[t._v("执行进度")])]),t._v(" "),a("h5",[t._v(t._s(t.executedRate)+"%")]),t._v(" "),100===t.executedRate?a("el-progress",{attrs:{percentage:t.executedRate,"show-text":!1,status:"success"}}):a("el-progress",{attrs:{percentage:t.executedRate,"show-text":!1}}),t._v(" "),a("div",{staticStyle:{"font-size":"8px","font-weight":"bold","margin-top":"20px"}},[a("span",[t._v("已执行用例数："+t._s(t.executeNum))])]),t._v(" "),a("div",{staticStyle:{"font-size":"8px","font-weight":"bold","margin-top":"20px"}},[a("span",[t._v("用例总数："+t._s(t.caseNum))])])],1),t._v(" "),a("el-card",{staticStyle:{width:"45%",height:"30%",margin:"10px","text-align":"left",float:"left"},attrs:{shadow:"always"}},[a("div",{staticStyle:{"margin-bottom":"20px"}},[a("strong",[t._v("成功率")])]),t._v(" "),a("h5",[t._v(t._s(t.successRate)+"%")]),t._v(" "),0===t.error?a("el-progress",{attrs:{percentage:t.successRate,"show-text":!1,status:"success"}}):a("el-progress",{attrs:{percentage:t.successRate,"show-text":!1,status:"exception"}}),t._v(" "),a("div",[a("p",{staticStyle:{"font-size":"8px","font-weight":"bold","margin-top":"20px"}},[a("span",[t._v("成功数："+t._s(t.success))]),a("span",{staticStyle:{"margin-left":"60px"}},[t._v("失败数："+t._s(t.error))])])]),t._v(" "),a("div",{staticStyle:{"font-size":"8px","font-weight":"bold","margin-top":"20px"}},[a("span",[t._v("用例总数："+t._s(t.caseNum))])])],1)],1),t._v(" "),a("div",{staticStyle:{height:"auto",display:"inline"}},[a("el-card",{staticStyle:{margin:"10px",width:"45%",float:"left"},attrs:{shadow:"always"}},[a("h4",[t._v("前置脚本")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.setUpResult,stripe:"",height:"300"}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"scriptName",label:"脚本名称",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"success",label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.success?a("el-tag",{attrs:{type:"success"}},[t._v("成功")]):a("el-tag",{attrs:{type:"danger"}},[t._v("失败")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.success?a("el-button",{attrs:{type:"success",icon:"el-icon-check",circle:"",size:"mini"}}):a("el-button",{attrs:{type:"primary",icon:"el-icon-s-claim",round:"",size:"mini"},on:{click:function(a){return t.fixScript(e.row)}}},[t._v("fix")])]}}])})],1)],1),t._v(" "),a("el-card",{staticStyle:{margin:"10px",width:"45%",float:"left"},attrs:{shadow:"always"}},[a("h4",[t._v("测试步骤")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.executedRows,stripe:"",height:"300"}},[a("el-table-column",{attrs:{prop:"index",label:"序号",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{prop:"caseName",label:"用例名称",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"执行状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.status?a("el-tag",{attrs:{type:"success"}},[t._v("成功")]):a("el-tag",{attrs:{type:"danger"}},[t._v("失败")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"logs",label:"日志",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",round:"",icon:"el-icon-tickets",size:"mini"},on:{click:function(a){return t.lookLogs(e.row.logs)}}},[t._v("detail")])]}}])})],1)],1)],1)]),t._v(" "),a("el-dialog",{attrs:{title:"日志详情",visible:t.logView,width:"60%","append-to-body":!0},on:{"update:visible":function(e){t.logView=e}}},[a("div",{domProps:{innerHTML:t._s(t.logs)}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.logView=!1}}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]},rt=a("VU/8")(lt,nt,!1,null,null,null).exports,ct={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticStyle:{height:"100%"},attrs:{title:"编辑用例集",visible:t.$store.state.editcasesetshow,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.$store.state,"editcasesetshow",e)},close:t.closeEditCaseSetView}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"名称","label-width":t.formLabelWidth,prop:"setName"}},[a("el-input",{attrs:{placeholder:"请输入用例集名称",autocomplete:"off"},model:{value:t.form.setName,callback:function(e){t.$set(t.form,"setName",e)},expression:"form.setName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"步骤","label-width":t.formLabelWidth,prop:"setDesc"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请在此填写描述",rows:15},model:{value:t.form.setDesc,callback:function(e){t.$set(t.form,"setDesc",e)},expression:"form.setDesc"}})],1),t._v(" "),a("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"所属项目","label-width":t.formLabelWidth,prop:"projectId"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择项目"},model:{value:t.form.projectId,callback:function(e){t.$set(t.form,"projectId",e)},expression:"form.projectId"}},t._l(t.projects,function(t){return a("el-option",{key:t.pid,attrs:{label:t.pname,value:t.pid}})}),1)],1),t._v(" "),a("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"状态","label-width":t.formLabelWidth,prop:"caseSetStatus"}},[a("el-select",{attrs:{placeholder:"请选择状态"},model:{value:t.form.setStatus,callback:function(e){t.$set(t.form,"setStatus",e)},expression:"form.setStatus"}},[a("el-option",{attrs:{label:"待完成",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"待维护",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"已完成",value:"2"}})],1)],1),t._v(" "),a("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"启用","label-width":t.formLabelWidth}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.form.valid,callback:function(e){t.$set(t.form,"valid",e)},expression:"form.valid"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.editCaseSet}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:t.closeEditCaseSetView}},[t._v("取 消")])],1)],1)},staticRenderFns:[]},dt=a("VU/8")({data:function(){return{projects:[],rules:{projectId:[{required:!0,message:"请选择项目",trigger:"change"}],setName:[{required:!0,message:"请输入用例集名称",trigger:"blur"}],setDesc:[{required:!0,message:"请输入用例集步骤描述",trigger:"change"}]},dialogTableVisible:!1,dialogFormVisible:!1,form:{setId:"",projectId:"",setName:"",setDesc:"",setStatus:"",valid:!0},formLabelWidth:"80px"}},methods:{editCaseSet:function(){var t=this,e=this.form.setId,a={setId:this.form.setId,projectId:this.form.projectId,setName:this.form.setName,setDesc:this.form.setDesc,setStatus:this.form.setStatus,valid:this.form.valid?1:0};this.$refs.form.validate(function(s){s&&t.$axios.put("/apis/testcaseset/"+e,a).then(function(e){t.$notify({title:"成功",type:"success",message:e.data.msg}),t.closeEditCaseSetView(),t.$emit("getCaseSet")}).catch(function(e){t.$notify({title:"失败",type:"error",message:e})})})},closeEditCaseSetView:function(){this.$refs.form.resetFields(),this.form={setId:"",projectId:"",setName:"",setDesc:"",setStatus:"",valid:!0},this.$store.commit("changeEditCaseSetShow",!1)},getProjects:function(){var t=this;this.$axios.get("/apis/project/list").then(function(e){t.projects=e.data.data}).catch(function(e){t.$notify({title:"失败",type:"error",message:e})})}},computed:{},components:{},watch:{"$store.state.caseSetDetail":function(){this.form.projectId=this.$store.state.caseSetDetail.projectId,this.form.setName=this.$store.state.caseSetDetail.setName,this.form.setDesc=this.$store.state.caseSetDetail.setDesc,this.form.setStatus=this.$store.state.caseSetDetail.setStatus,this.form.setId=this.$store.state.caseSetDetail.setId,this.form.valid="1"===this.$store.state.caseSetDetail.valid}},created:function(){this.getProjects()}},ct,!1,null,null,null).exports,ut={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticStyle:{height:"100%"},attrs:{title:"新增用例集",visible:t.$store.state.addcasesetshow,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.$store.state,"addcasesetshow",e)},close:t.closeAddCaseSetView}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"名称","label-width":t.formLabelWidth,prop:"setName"}},[a("el-input",{attrs:{placeholder:"请输入用例集名称",autocomplete:"off"},model:{value:t.form.setName,callback:function(e){t.$set(t.form,"setName",e)},expression:"form.setName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"步骤","label-width":t.formLabelWidth,prop:"setDesc"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请在此填写描述",rows:15},model:{value:t.form.setDesc,callback:function(e){t.$set(t.form,"setDesc",e)},expression:"form.setDesc"}})],1),t._v(" "),a("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"所属项目","label-width":t.formLabelWidth,prop:"projectId"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择项目"},model:{value:t.form.projectId,callback:function(e){t.$set(t.form,"projectId",e)},expression:"form.projectId"}},t._l(t.projects,function(t){return a("el-option",{key:t.pid,attrs:{label:t.pname,value:t.pid}})}),1)],1),t._v(" "),a("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"状态","label-width":t.formLabelWidth,prop:"caseSetStatus"}},[a("el-select",{attrs:{placeholder:"请选择状态"},model:{value:t.form.setStatus,callback:function(e){t.$set(t.form,"setStatus",e)},expression:"form.setStatus"}},[a("el-option",{attrs:{label:"待完成",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"待维护",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"已完成",value:"2"}})],1)],1),t._v(" "),a("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"启用","label-width":t.formLabelWidth}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.form.valid,callback:function(e){t.$set(t.form,"valid",e)},expression:"form.valid"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addCaseSet}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:t.closeAddCaseSetView}},[t._v("取 消")])],1)],1)},staticRenderFns:[]},pt={name:"CaseSet",methods:{getCaseSet:function(t){var e=this;this.page=t,this.loading=!0,this.$axios.get("/apis/testcaseset/"+t,{params:{set_name:this.search_val,project_id:this.projectId,set_status:this.setStatus}}).then(function(t){200===t.data.code?(e.caseSetLists=t.data.data.list,e.total=t.data.data.total):e.$notify({title:"操作失败",type:"warning",message:t.data.msg}),e.loading=!1}).catch(function(t){e.$notify({title:"操作失败",type:"error",message:t})})},addCaseSet:function(){this.$store.commit("changeAddCaseSetShow",!0)},addCase:function(t){var e=this;this.$store.commit("changeAddCaseShow",!0),this.$axios.get("/apis/testcaseset/"+t+"/info").then(function(t){e.loading=!0,200===t.data.code?e.$store.commit("setCaseSetInfo",t.data.data):e.$notify({title:"操作失败",type:"warning",message:t.data.msg}),e.loading=!1}).catch(function(t){e.$notify({title:"操作失败",type:"error",message:t})})},updateCaseSet:function(t){var e=this;this.$store.commit("changeEditCaseSetShow",!0),this.$axios.get("/apis/testcaseset/"+t.setId+"/info").then(function(t){e.$store.commit("setCaseSetDetail",t.data.data)})},copyCaseSet:function(t){var e=this;this.$confirm("确定要复制吗？").then(function(a){e.$axios.post("/apis/testcaseset/copySet/"+t.setId).then(function(t){200===t.data.code?e.$notify({title:"操作成功",type:"success",message:t.data.msg}):e.$notify({title:"操作失败",type:"warning",message:t.data.msg}),e.page=1,e.getCaseSet(1)}).catch(function(t){e.$notify({title:"操作失败",type:"error",message:t})})})},deleteCaseSet:function(t){var e=this;this.$confirm("确定要删除吗？").then(function(a){e.$axios.delete("/apis/testcaseset/"+t.setId).then(function(t){200===t.data.code?e.$notify({title:"操作成功",type:"success",message:t.data.msg}):e.$notify({title:"操作失败",type:"warning",message:t.data.msg}),e.page=1,e.getCaseSet(1)}).catch(function(t){e.$notify({title:"操作失败",type:"error",message:t})})})},getProjects:function(){var t=this;this.$axios.get("/apis/project/list").then(function(e){t.projects=e.data.data}).catch(function(e){t.$notify({title:"失败",type:"error",message:e})})}},data:function(){return{page:1,total:0,search_val:"",projectId:"",setStatus:"",projects:[],caseSetLists:[],loading:!1,items:["","success","info","danger","warning"],dialogVisible:!1}},components:{AddCase:rt,AddCaseSet:a("VU/8")({data:function(){return{projects:[],rules:{projectId:[{required:!0,message:"请选择项目",trigger:"change"}],setName:[{required:!0,message:"请输入用例集名称",trigger:"blur"}],setDesc:[{required:!0,message:"请输入用例集步骤描述",trigger:"change"}]},dialogTableVisible:!1,dialogFormVisible:!1,form:{projectId:"",setName:"",setDesc:"",setStatus:"0",valid:!0},formLabelWidth:"80px"}},methods:{addCaseSet:function(){var t=this,e={projectId:this.form.projectId,setName:this.form.setName,setDesc:this.form.setDesc,setStatus:this.form.setStatus,valid:this.form.valid?1:0};this.$refs.form.validate(function(a){a&&t.$axios.post("/apis/testcaseset/",e).then(function(e){t.$notify({title:"成功",type:"success",message:e.data.msg}),t.closeAddCaseSetView(),t.$emit("getCaseSet")}).catch(function(e){t.$notify({title:"失败",type:"error",message:e})})})},closeAddCaseSetView:function(){this.$refs.form.resetFields(),this.$store.commit("changeAddCaseSetShow",!1)},getProjects:function(){var t=this;this.$axios.get("/apis/project/list").then(function(e){t.projects=e.data.data}).catch(function(e){t.$notify({title:"失败",type:"error",message:e})})}},computed:{},components:{},created:function(){this.getProjects()}},ut,!1,null,null,null).exports,EditCaseSet:dt},created:function(){this.getCaseSet(1),this.getProjects()}},mt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"case"}},[s("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/main"}}},[t._v("首页")]),t._v(" "),s("el-breadcrumb-item",[t._v("用例管理")]),t._v(" "),s("el-breadcrumb-item",[t._v("用例集管理")])],1),t._v(" "),s("div",{staticClass:"header"},[s("span",[s("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择项目"},model:{value:t.projectId,callback:function(e){t.projectId=e},expression:"projectId"}},t._l(t.projects,function(t){return s("el-option",{key:t.pid,attrs:{label:t.pname,value:t.pid}})}),1)],1),t._v(" "),s("span",[s("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择状态"},model:{value:t.setStatus,callback:function(e){t.setStatus=e},expression:"setStatus"}},[s("el-option",{attrs:{label:"待完成",value:"0"}}),t._v(" "),s("el-option",{attrs:{label:"待维护",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"已完成",value:"2"}})],1)],1),t._v(" "),s("span",[s("el-input",{attrs:{placeholder:"请输入用例集名称","prefix-icon":"el-icon-search"},model:{value:t.search_val,callback:function(e){t.search_val=e},expression:"search_val"}})],1),t._v(" "),s("span",[s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getCaseSet(1)}}},[t._v("搜索")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.addCaseSet}},[t._v("新增")])],1)]),t._v(" "),s("AddCase",{on:{getCaseSet:function(e){return t.getCaseSet(1)},addCase:t.addCase}}),t._v(" "),s("AddCaseSet",{on:{getCaseSet:function(e){return t.getCaseSet(1)}}}),t._v(" "),s("EditCaseSet",{on:{getCaseSet:function(e){return t.getCaseSet(1)}}}),t._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.caseSetLists,"max-height":"80%",height:"600","default-sort":{prop:"createTime",order:"descending"}}},[s("div",{staticStyle:{"text-align":"left",margin:"30px"},attrs:{slot:"empty"},slot:"empty"},[s("div",[s("img",{attrs:{src:a("N9nc"),alt:"",width:"140px",height:"140px"}})]),t._v(" "),s("p",[t._v("没有查询到数据呦～")])]),t._v(" "),s("el-table-column",{attrs:{fixed:"left",prop:"setName",label:"用例集名称",width:"200","show-overflow-tooltip":!0}}),t._v(" "),s("el-table-column",{attrs:{prop:"setDesc",label:"用例集描述",width:"400","show-overflow-tooltip":!0}}),t._v(" "),s("el-table-column",{attrs:{prop:"setStatus",label:"状态",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return["0"===e.row.setStatus?s("p",[t._v("待完成")]):t._e(),t._v(" "),"1"===e.row.setStatus?s("p",[t._v("待维护")]):t._e(),t._v(" "),"2"===e.row.setStatus?s("p",[t._v("已完成")]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"是否启用",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return["0"===e.row.valid?s("el-tag",{attrs:{type:"danger"}},[t._v("禁用")]):t._e(),t._v(" "),"1"===e.row.valid?s("el-tag",{attrs:{type:"success"}},[t._v("启用")]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"300"}}),t._v(" "),s("el-table-column",{attrs:{fixed:"right",label:"操作",width:"400"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticStyle:{"margin-bottom":"10px"}},[s("el-button",{attrs:{type:"primary",size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),t.addCase(e.row.setId)}}},[t._v("\n              调试/添加用例\n            ")]),t._v(" "),s("el-button",{attrs:{type:"warning",size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),t.copyCaseSet(e.row)}}},[t._v("\n              复制\n            ")]),t._v(" "),s("el-button",{attrs:{size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),t.updateCaseSet(e.row)}}},[t._v("\n              编辑\n            ")]),t._v(" "),s("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),t.deleteCaseSet(e.row)}}},[t._v("\n              移除\n            ")])],1)]}}])})],1),t._v(" "),s("el-footer",{attrs:{id:"footer"}},[s("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"current-page":t.page},on:{"current-change":function(e){return t.getCaseSet(t.page)},"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e}}})],1)],1)},staticRenderFns:[]};var ht=a("VU/8")(pt,mt,!1,function(t){a("DFnS")},"data-v-7185d256",null).exports,ft={data:function(){return{webhooks:[],rules:{taskName:[{required:!0,message:"请输入任务名称",trigger:"change"}],isParallel:[{required:!0,message:"执行方式不能为空",trigger:"change"}],times:[{required:!0,message:"请输入轮询次数",trigger:"change"},{type:"number",message:"轮询次数必须为数字",trigger:"change"}],dingId:[{required:!0,message:"请选择机器人",trigger:"change"}]},rules2:{set:[{required:!0,message:"请选择用例集",trigger:"change"}],env:[{required:!0,message:"请选择执行环境",trigger:"change"}]},options:[{value:0,label:"串行"},{value:1,label:"并发"}],setOptions:[],envOptions:[],dialogTableVisible:!1,dialogFormVisible:!1,form:{taskName:"",taskDesc:"",isParallel:"",times:0,isDing:!1,dingId:""},formLabelWidth:"120px",addTestSetShow:!1,form2:{env:"",set:""},testSets:[]}},methods:{addTask:function(){var t=this,e={isTiming:0,taskName:this.form.taskName,taskDesc:this.form.taskDesc,isParallel:this.form.isParallel,testSets:f()(this.testSets),times:this.form.times,isDing:this.form.isDing?1:0,dingId:this.form.dingId};this.$refs.form.validate(function(a){a&&t.$axios.post("/apis/task/",e).then(function(e){200===e.data.code?t.$notify({title:"成功",type:"success",message:e.data.msg}):t.$notify({title:"失败",type:"error",message:e.data.msg}),t.closeAddTaskView(),t.$emit("getTasks")}).catch(function(e){t.$notify({title:"失败",type:"error",message:e})})})},getDings:function(){var t=this;this.loading=!0,this.$axios.get("/apis/Dingding/list").then(function(e){200===e.data.code?t.webhooks=e.data.data:t.$notify({title:"操作失败",type:"warning",message:e.data.msg}),t.loading=!1}).catch(function(e){t.$notify({title:"操作失败",type:"error",message:e})})},closeAddTaskView:function(){this.$refs.form.resetFields(),this.$store.commit("changeAddTaskShow",!1)},showAddTestSet:function(){var t=this;this.$axios.get("/apis/testcaseset/list").then(function(e){200===e.data.code?e.data.data.forEach(function(e){t.setOptions.push({setName:e.setName,setId:e.setId})}):t.$notify({title:"操作失败",type:"warning",message:e.data.msg})}).catch(function(e){t.$notify({title:"操作失败",type:"error",message:e})}),this.addTestSetShow=!0},getEnvsOfSet:function(){var t=this;this.envOptions=[],this.$axios.get("/apis/testcaseset/"+this.form2.set.setId+"/env").then(function(e){200===e.data.code?e.data.data.forEach(function(e){t.envOptions.push({envName:e.envName,envId:e.envId})}):t.$notify({title:"操作失败",type:"warning",message:e.data.msg})}).catch(function(e){t.$notify({title:"操作失败",type:"error",message:e})})},addSet:function(){var t=this;this.$refs.form2.validate(function(e){e&&(t.testSets.push({setName:t.form2.set.setName,setId:t.form2.set.setId,envName:t.form2.env.envName,envId:t.form2.env.envId}),t.addTestSetShow=!1,t.form2={env:"",set:""})})},delSet:function(t){this.testSets.splice(t,1)},closeAddTestSetShow:function(){this.$refs.form2.resetFields(),this.setOptions=[],this.envOptions=[],this.form2={env:"",set:""},this.addTestSetShow=!1}},mounted:function(){this.getDings()},computed:{},components:{}},vt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticStyle:{height:"100%"},attrs:{title:"新增任务",visible:t.$store.state.addtaskshow,"close-on-click-modal":!1,"append-to-body":!0},on:{"update:visible":function(e){return t.$set(t.$store.state,"addtaskshow",e)},close:t.closeAddTaskView}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"任务名称","label-width":t.formLabelWidth,prop:"taskName"}},[a("el-input",{attrs:{placeholder:"请输入任务名称",autocomplete:"off"},model:{value:t.form.taskName,callback:function(e){t.$set(t.form,"taskName",e)},expression:"form.taskName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"任务描述","label-width":t.formLabelWidth,prop:"taskDesc"}},[a("el-input",{attrs:{placeholder:"请输入任务描述",autocomplete:"off",type:"textarea",autosize:{minRows:3,maxRows:5}},model:{value:t.form.taskDesc,callback:function(e){t.$set(t.form,"taskDesc",e)},expression:"form.taskDesc"}})],1),t._v(" "),a("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"执行方式","label-width":t.formLabelWidth,prop:"isParallel"}},[a("el-select",{attrs:{placeholder:"请选择执行方式"},model:{value:t.form.isParallel,callback:function(e){t.$set(t.form,"isParallel",e)},expression:"form.isParallel"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"轮询次数","label-width":t.formLabelWidth,prop:"times"}},[a("el-input",{attrs:{placeholder:"请输入轮询次数",autocomplete:"off"},model:{value:t.form.times,callback:function(e){t.$set(t.form,"times",t._n(e))},expression:"form.times"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"钉钉通知开关","label-width":t.formLabelWidth}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.form.isDing,callback:function(e){t.$set(t.form,"isDing",e)},expression:"form.isDing"}})],1),t._v(" "),t.form.isDing?a("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"钉钉机器人","label-width":t.formLabelWidth,prop:"dingId"}},[a("el-select",{attrs:{placeholder:"请选择机器人"},model:{value:t.form.dingId,callback:function(e){t.$set(t.form,"dingId",e)},expression:"form.dingId"}},t._l(t.webhooks,function(t){return a("el-option",{key:t.descId,attrs:{label:t.desc,value:t.descId}})}),1)],1):t._e(),t._v(" "),a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"添加用例集",visible:t.addTestSetShow,"append-to-body":!0},on:{"update:visible":function(e){t.addTestSetShow=e},close:t.closeAddTestSetShow}},[a("el-form",{ref:"form2",attrs:{model:t.form2,rules:t.rules2}},[a("el-form-item",{attrs:{label:"用例集","label-width":t.formLabelWidth,prop:"set"}},[a("el-select",{attrs:{placeholder:"请选择用例集",filterable:"","value-key":"setId"},on:{change:t.getEnvsOfSet},model:{value:t.form2.set,callback:function(e){t.$set(t.form2,"set",e)},expression:"form2.set"}},t._l(t.setOptions,function(t){return a("el-option",{key:t.setId,attrs:{label:t.setName,value:t}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"执行环境","label-width":t.formLabelWidth,prop:"env"}},[a("el-select",{attrs:{placeholder:"请选择执行环境",filterable:"",clearable:"","value-key":"envId"},model:{value:t.form2.env,callback:function(e){t.$set(t.form2,"env",e)},expression:"form2.env"}},t._l(t.envOptions,function(t){return a("el-option",{key:t.envId,attrs:{label:t.envName,value:t}})}),1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addSet}},[t._v("添 加")]),t._v(" "),a("el-button",{on:{click:t.closeAddTestSetShow}},[t._v("取 消")])],1)],1),t._v(" "),a("div",{staticStyle:{"text-align":"left"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.showAddTestSet}},[t._v("添加用例集")]),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("用例集列表")]),t._v(" "),a("el-card",{attrs:{shadow:"hover"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.testSets,stripe:"",height:"300"}},[a("el-table-column",{attrs:{prop:"index",label:"序号",type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"setName",label:"用例集名称",width:"400"}}),t._v(" "),a("el-table-column",{attrs:{prop:"envName",label:"执行环境",width:"280"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return t.delSet(e.$index)}}},[t._v("移除")])]}}])})],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addTask}},[t._v("保 存")]),t._v(" "),a("el-button",{on:{click:t.closeAddTaskView}},[t._v("取 消")])],1)],1)},staticRenderFns:[]},gt={data:function(){return{webhooks:[],rules:{taskName:[{required:!0,message:"请输入任务名称",trigger:"change"}],isParallel:[{required:!0,message:"执行方式不能为空",trigger:"change"}],times:[{required:!0,message:"请输入轮询次数",trigger:"change"},{type:"number",message:"轮询次数必须为数字",trigger:"change"}],dingId:[{required:!0,message:"请选择机器人",trigger:"change"}]},rules2:{set:[{required:!0,message:"请选择用例集",trigger:"change"}],env:[{required:!0,message:"请选择执行环境",trigger:"change"}]},options:[{value:0,label:"串行"},{value:1,label:"并发"}],setOptions:[],envOptions:[],dialogTableVisible:!1,dialogFormVisible:!1,form:{taskId:"",taskName:"",taskDesc:"",isParallel:"",times:0,isDing:!1,dingId:""},formLabelWidth:"120px",addTestSetShow:!1,form2:{env:"",set:""},testSets:[],loading:!0}},methods:{editTask:function(){var t=this,e={isTiming:0,taskName:this.form.taskName,taskDesc:this.form.taskDesc,isParallel:this.form.isParallel,testSets:f()(this.testSets),times:this.form.times,taskId:this.form.taskId,dingId:this.form.dingId,isDing:this.form.isDing?1:0};this.$refs.form.validate(function(a){a&&t.$axios.put("/apis/task/"+t.form.taskId,e).then(function(e){200===e.data.code?t.$notify({title:"成功",type:"success",message:e.data.msg}):t.$notify({title:"失败",type:"error",message:e.data.msg}),t.closeEditTaskView(),t.$emit("getTasks")}).catch(function(e){t.$notify({title:"失败",type:"error",message:e})})})},getDings:function(){var t=this;this.loading=!0,this.$axios.get("/apis/Dingding/list").then(function(e){200===e.data.code?t.webhooks=e.data.data:t.$notify({title:"操作失败",type:"warning",message:e.data.msg}),t.loading=!1}).catch(function(e){t.$notify({title:"操作失败",type:"error",message:e})})},closeEditTaskView:function(){this.loading=!0,this.$refs.form.resetFields(),this.$store.commit("changeEditTaskShow",!1)},showAddTestSet:function(){var t=this;this.$axios.get("/apis/testcaseset/list").then(function(e){200===e.data.code?e.data.data.forEach(function(e){t.setOptions.push({setName:e.setName,setId:e.setId})}):t.$notify({title:"操作失败",type:"warning",message:e.data.msg})}).catch(function(e){t.$notify({title:"操作失败",type:"error",message:e})}),this.addTestSetShow=!0},getEnvsOfSet:function(){var t=this;this.envOptions=[],this.$axios.get("/apis/testcaseset/"+this.form2.set.setId+"/env").then(function(e){200===e.data.code?e.data.data.forEach(function(e){t.envOptions.push({envName:e.envName,envId:e.envId})}):t.$notify({title:"操作失败",type:"warning",message:e.data.msg})}).catch(function(e){t.$notify({title:"操作失败",type:"error",message:e})})},addSet:function(){var t=this;this.$refs.form2.validate(function(e){e&&(t.testSets.push({setName:t.form2.set.setName,setId:t.form2.set.setId,envName:t.form2.env.envName,envId:t.form2.env.envId}),t.addTestSetShow=!1,t.form2={env:"",set:""})})},delSet:function(t){this.testSets.splice(t,1)},closeAddTestSetShow:function(){this.$refs.form2.resetFields(),this.setOptions=[],this.envOptions=[],this.form2={env:"",set:""},this.addTestSetShow=!1}},mounted:function(){this.getDings()},computed:{},components:{},watch:{"$store.state.taskDetail":function(){this.form=this.$store.state.taskDetail,this.form.isParallel=parseInt(this.$store.state.taskDetail.isParallel),this.testSets=this.form.testSetList,this.form.isDing=1===this.$store.state.taskDetail.isDing,this.loading=!1}}},bt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticStyle:{height:"100%"},attrs:{title:"更改配置",visible:t.$store.state.edittaskshow,"close-on-click-modal":!1,"append-to-body":!0},on:{"update:visible":function(e){return t.$set(t.$store.state,"edittaskshow",e)},close:t.closeEditTaskView}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"form",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"任务名称","label-width":t.formLabelWidth,prop:"taskName"}},[a("el-input",{attrs:{placeholder:"请输入任务名称",autocomplete:"off"},model:{value:t.form.taskName,callback:function(e){t.$set(t.form,"taskName",e)},expression:"form.taskName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"任务描述","label-width":t.formLabelWidth,prop:"taskDesc"}},[a("el-input",{attrs:{placeholder:"请输入任务描述",autocomplete:"off",type:"textarea",autosize:{minRows:3,maxRows:5}},model:{value:t.form.taskDesc,callback:function(e){t.$set(t.form,"taskDesc",e)},expression:"form.taskDesc"}})],1),t._v(" "),a("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"执行方式","label-width":t.formLabelWidth,prop:"isParallel"}},[a("el-select",{attrs:{placeholder:"请选择执行方式"},model:{value:t.form.isParallel,callback:function(e){t.$set(t.form,"isParallel",e)},expression:"form.isParallel"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"轮询次数","label-width":t.formLabelWidth,prop:"times"}},[a("el-input",{attrs:{placeholder:"请输入轮询次数",autocomplete:"off"},model:{value:t.form.times,callback:function(e){t.$set(t.form,"times",t._n(e))},expression:"form.times"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"钉钉通知开关","label-width":t.formLabelWidth}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.form.isDing,callback:function(e){t.$set(t.form,"isDing",e)},expression:"form.isDing"}})],1),t._v(" "),t.form.isDing?a("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"钉钉机器人","label-width":t.formLabelWidth,prop:"dingId"}},[a("el-select",{attrs:{placeholder:"请选择机器人"},model:{value:t.form.dingId,callback:function(e){t.$set(t.form,"dingId",e)},expression:"form.dingId"}},t._l(t.webhooks,function(t){return a("el-option",{key:t.descId,attrs:{label:t.desc,value:t.descId}})}),1)],1):t._e(),t._v(" "),a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"添加用例集",visible:t.addTestSetShow,"append-to-body":!0},on:{"update:visible":function(e){t.addTestSetShow=e},close:t.closeAddTestSetShow}},[a("el-form",{ref:"form2",attrs:{model:t.form2,rules:t.rules2}},[a("el-form-item",{attrs:{label:"用例集","label-width":t.formLabelWidth,prop:"set"}},[a("el-select",{attrs:{placeholder:"请选择用例集",filterable:"","value-key":"setId"},on:{change:t.getEnvsOfSet},model:{value:t.form2.set,callback:function(e){t.$set(t.form2,"set",e)},expression:"form2.set"}},t._l(t.setOptions,function(t){return a("el-option",{key:t.setId,attrs:{label:t.setName,value:t}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"执行环境","label-width":t.formLabelWidth,prop:"env"}},[a("el-select",{attrs:{placeholder:"请选择执行环境",filterable:"",clearable:"","value-key":"envId"},model:{value:t.form2.env,callback:function(e){t.$set(t.form2,"env",e)},expression:"form2.env"}},t._l(t.envOptions,function(t){return a("el-option",{key:t.envId,attrs:{label:t.envName,value:t}})}),1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addSet}},[t._v("添 加")]),t._v(" "),a("el-button",{on:{click:t.closeAddTestSetShow}},[t._v("取 消")])],1)],1),t._v(" "),a("div",{staticStyle:{"text-align":"left"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.showAddTestSet}},[t._v("添加用例集")]),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("用例集列表")]),t._v(" "),a("el-card",{attrs:{shadow:"hover"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.testSets,stripe:"",height:"300"}},[a("el-table-column",{attrs:{prop:"index",label:"序号",type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"setName",label:"用例集名称",width:"400"}}),t._v(" "),a("el-table-column",{attrs:{prop:"envName",label:"执行环境",width:"280"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return t.delSet(e.$index)}}},[t._v("移除")])]}}])})],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.editTask}},[t._v("保 存")]),t._v(" "),a("el-button",{on:{click:t.closeEditTaskView}},[t._v("取 消")])],1)],1)},staticRenderFns:[]},yt={name:"Task",methods:{openAddTask:function(){this.$store.commit("changeAddTaskShow",!0)},openEditTask:function(t){var e=this;this.$store.commit("changeEditTaskShow",!0),this.$axios.get("/apis/task/"+t+"/info").then(function(t){e.$store.commit("setTaskDetail",t.data.data)})},startTask:function(t){var e=this;this.$confirm("是否发起任务？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$axios.post("/apis/task/startTask/"+t).then(function(t){200===t.data.code?(e.$notify({title:"操作成功",type:"success",message:t.data.msg}),e.getTasks(1)):e.$notify({title:"操作失败",type:"warning",message:t.data.msg})}).catch(function(t){e.$notify({title:"操作失败",type:"error",message:t})})})},startTasks:function(){var t=this,e=[];this.tasks.forEach(function(t){e.push(t.taskId)}),this.$confirm("是否要批量发起任务？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios.post("/apis/task/startTasks/",e).then(function(e){200===e.data.code?(t.$notify({title:"操作成功",type:"success",message:e.data.msg}),t.getTasks(1)):t.$notify({title:"操作失败",type:"warning",message:e.data.msg})}).catch(function(e){t.$notify({title:"操作失败",type:"error",message:e})})})},handleSelectionChange:function(t){this.tasks=t},getTasks:function(t){var e=this;this.page=t,this.loading=!0,this.$axios.get("/apis/task/"+t,{params:{taskName:this.search_val,isParallel:this.isParallel}}).then(function(t){200===t.data.code?(e.taskLists=t.data.data.list,e.total=t.data.data.total):e.$notify({title:"操作失败",type:"warning",message:t.data.msg}),e.loading=!1}).catch(function(t){e.$notify({title:"操作失败",type:"error",message:t})})},deleteTask:function(t){var e=this;this.$confirm("确定要删除吗？").then(function(a){e.$axios.delete("/apis/task/"+t.taskId).then(function(t){200===t.data.code?e.$notify({title:"操作成功",type:"success",message:t.data.msg}):e.$notify({title:"操作失败",type:"warning",message:t.data.msg}),e.page=1,e.getTasks(1)}).catch(function(t){e.$notify({title:"操作失败",type:"error",message:t})})})}},data:function(){return{page:1,total:0,search_val:"",projects:[],taskLists:[],isParallel:"",loading:!1,items:["","success","info","danger","warning"],dialogVisible:!1,tasks:[]}},components:{AddTasks:a("VU/8")(ft,vt,!1,null,null,null).exports,EditTask:a("VU/8")(gt,bt,!1,null,null,null).exports},created:function(){this.getTasks(1)}},_t={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"case"}},[s("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/main"}}},[t._v("首页")]),t._v(" "),s("el-breadcrumb-item",[t._v("任务管理")]),t._v(" "),s("el-breadcrumb-item",[t._v("普通任务管理")])],1),t._v(" "),s("div",{staticClass:"header"},[s("span",[s("el-input",{attrs:{placeholder:"请输入任务名称","prefix-icon":"el-icon-search"},model:{value:t.search_val,callback:function(e){t.search_val=e},expression:"search_val"}})],1),t._v(" "),s("span",[s("el-select",{attrs:{placeholder:"请选择执行方式",clearable:""},model:{value:t.isParallel,callback:function(e){t.isParallel=e},expression:"isParallel"}},[s("el-option",{attrs:{label:"串行",value:0}}),t._v(" "),s("el-option",{attrs:{label:"并发",value:1}})],1)],1),t._v(" "),s("span",[s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getTasks(1)}}},[t._v("搜索")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.openAddTask}},[t._v("新增")]),t._v(" "),s("el-button",{attrs:{type:"success"},on:{click:t.startTasks}},[t._v("批量执行")])],1)]),t._v(" "),s("AddTasks",{on:{getTasks:function(e){return t.getTasks(1)}}}),t._v(" "),s("EditTask",{on:{getTasks:function(e){return t.getTasks(1)}}}),t._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.taskLists,"max-height":"80%",height:"800","default-sort":{prop:"updateTime",order:"descending"}},on:{"selection-change":t.handleSelectionChange}},[s("div",{staticStyle:{"text-align":"left",margin:"30px"},attrs:{slot:"empty"},slot:"empty"},[s("div",[s("img",{attrs:{src:a("N9nc"),alt:"",width:"140px",height:"140px"}})]),t._v(" "),s("p",[t._v("没有查询到数据呦～")])]),t._v(" "),s("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),s("el-table-column",{attrs:{fixed:"left",prop:"taskName",label:"任务名称",width:"200","show-overflow-tooltip":!0}}),t._v(" "),s("el-table-column",{attrs:{prop:"taskDesc",label:"任务描述",width:"300","show-overflow-tooltip":!0}}),t._v(" "),s("el-table-column",{attrs:{prop:"testSetList",label:"绑定用例集",width:"500","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.testSetList,function(a){return s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:a.setName,placement:"top-start"}},[s("el-tag",{key:a.setId,staticStyle:{"margin-left":"5px"},attrs:{type:t.items[e.row.testSetList.indexOf(a)%5],effect:"light",size:"mini"}},[t._v("\n            "+t._s("用例集"+(e.row.testSetList.indexOf(a)+1))+"\n          ")])],1)})}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"isParallel",label:"执行方式",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return["0"===e.row.isParallel?s("el-tag",{attrs:{type:"primary"}},[t._v("串行")]):t._e(),t._v(" "),"1"===e.row.isParallel?s("el-tag",{attrs:{type:"success"}},[t._v("并发")]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"isDing",label:"钉钉通知",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.isDing?s("el-tag",{attrs:{type:"danger"}},[t._v("关闭")]):t._e(),t._v(" "),1===e.row.isDing?s("el-tag",{attrs:{type:"success"}},[t._v("开启")]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"300"}}),t._v(" "),s("el-table-column",{attrs:{prop:"updateTime",label:"修改时间",width:"300"}}),t._v(" "),s("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticStyle:{"margin-bottom":"10px"}},[s("el-button",{attrs:{type:"primary",size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),t.startTask(e.row.taskId)}}},[t._v("\n            执行任务\n          ")]),t._v(" "),s("el-button",{attrs:{size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),t.openEditTask(e.row.taskId)}}},[t._v("\n            更改配置\n          ")]),t._v(" "),s("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),t.deleteTask(e.row)}}},[t._v("\n            移除\n          ")])],1)]}}])})],1),t._v(" "),s("el-footer",{attrs:{id:"footer"}},[s("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"current-page":t.page},on:{"current-change":function(e){return t.getTasks(t.page)},"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e}}})],1)],1)},staticRenderFns:[]};var kt=a("VU/8")(yt,_t,!1,function(t){a("SYXr")},"data-v-1b474bc6",null).exports,xt={props:{value:{type:String,default:"*"},lable:{type:String}},data:function(){return{type:"1",cycle:{start:0,end:0},loop:{start:0,end:0},week:{start:0,end:0},work:0,last:0,appoint:[]}},computed:{value_:function(){var t=[];switch(this.type){case"1":t.push("*");break;case"2":t.push(this.cycle.start+"-"+this.cycle.end);break;case"3":t.push(this.loop.start+"/"+this.loop.end);break;case"4":t.push(this.appoint.join(","));break;case"6":t.push((0===this.last?"":this.last)+"L");break;default:t.push("?")}return this.$emit("input",t.join("")),t.join("")}},watch:{value:function(t,e){this.updateVal()}},methods:{updateVal:function(){this.value&&("?"===this.value?this.type="5":-1!==this.value.indexOf("-")?2===this.value.split("-").length&&(this.type="2",this.cycle.start=this.value.split("-")[0],this.cycle.end=this.value.split("-")[1]):-1!==this.value.indexOf("/")?2===this.value.split("/").length&&(this.type="3",this.loop.start=this.value.split("/")[0],this.loop.end=this.value.split("/")[1]):-1!==this.value.indexOf("*")?this.type="1":-1!==this.value.indexOf("L")?(this.type="6",this.last=this.value.replace("L","")):-1!==this.value.indexOf("#")?2===this.value.split("#").length&&(this.type="7",this.week.start=this.value.split("#")[0],this.week.end=this.value.split("#")[1]):-1!==this.value.indexOf("W")?(this.type="8",this.work=this.value.replace("W","")):(this.type="4",this.appoint=this.value.split(",")))}},created:function(){this.updateVal()}},wt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{val:t.value_}},[a("div",[a("el-radio",{attrs:{label:"1",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("每"+t._s(t.lable))])],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"2",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("周期")]),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[t._v("从")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:59,size:"mini"},on:{change:function(e){t.type="2"}},model:{value:t.cycle.start,callback:function(e){t.$set(t.cycle,"start",e)},expression:"cycle.start"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[t._v("至")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:2,max:59,size:"mini"},on:{change:function(e){t.type="2"}},model:{value:t.cycle.end,callback:function(e){t.$set(t.cycle,"end",e)},expression:"cycle.end"}}),t._v("\n    "+t._s(t.lable)+"\n  ")],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"3",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("循环")]),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[t._v("从")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:0,max:59,size:"mini"},on:{change:function(e){t.type="3"}},model:{value:t.loop.start,callback:function(e){t.$set(t.loop,"start",e)},expression:"loop.start"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[t._v(t._s(t.lable)+"开始，每")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:59,size:"mini"},on:{change:function(e){t.type="3"}},model:{value:t.loop.end,callback:function(e){t.$set(t.loop,"end",e)},expression:"loop.end"}}),t._v("\n    "+t._s(t.lable)+"执行一次\n  ")],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"4",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("指定")]),t._v(" "),a("el-checkbox-group",{model:{value:t.appoint,callback:function(e){t.appoint=e},expression:"appoint"}},t._l(6,function(e){return a("div",{key:e,staticStyle:{"margin-left":"10px","line-height":"25px"}},t._l(10,function(s){return a("el-checkbox",{key:s,attrs:{label:e-1+""+(s-1)},on:{change:function(e){t.type="4"}}})}),1)}),0)],1)])},staticRenderFns:[]};var St=a("VU/8")(xt,wt,!1,function(t){a("Ieq5")},null,null).exports,$t={props:{value:{type:String,default:"*"}},data:function(){return{type:"1",cycle:{start:0,end:0},loop:{start:0,end:0},week:{start:0,end:0},work:0,last:0,appoint:[]}},computed:{value_:function(){var t=[];switch(this.type){case"1":t.push("*");break;case"2":t.push(this.cycle.start+"-"+this.cycle.end);break;case"3":t.push(this.loop.start+"/"+this.loop.end);break;case"4":t.push(this.appoint.join(","));break;case"6":t.push((0===this.last?"":this.last)+"L");break;default:t.push("?")}return this.$emit("input",t.join("")),t.join("")}},watch:{value:function(t,e){this.updateVal()}},methods:{updateVal:function(){this.value&&("?"===this.value?this.type="5":-1!==this.value.indexOf("-")?2===this.value.split("-").length&&(this.type="2",this.cycle.start=this.value.split("-")[0],this.cycle.end=this.value.split("-")[1]):-1!==this.value.indexOf("/")?2===this.value.split("/").length&&(this.type="3",this.loop.start=this.value.split("/")[0],this.loop.end=this.value.split("/")[1]):-1!==this.value.indexOf("*")?this.type="1":-1!==this.value.indexOf("L")?(this.type="6",this.last=this.value.replace("L","")):-1!==this.value.indexOf("#")?2===this.value.split("#").length&&(this.type="7",this.week.start=this.value.split("#")[0],this.week.end=this.value.split("#")[1]):-1!==this.value.indexOf("W")?(this.type="8",this.work=this.value.replace("W","")):(this.type="4",this.appoint=this.value.split(",")))}},created:function(){this.updateVal()}},Tt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{val:t.value_}},[a("div",[a("el-radio",{attrs:{label:"1",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("每时")])],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"2",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("周期")]),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[t._v("从")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:0,max:23,size:"mini"},on:{change:function(e){t.type="2"}},model:{value:t.cycle.start,callback:function(e){t.$set(t.cycle,"start",e)},expression:"cycle.start"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[t._v("至")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:2,max:23,size:"mini"},on:{change:function(e){t.type="2"}},model:{value:t.cycle.end,callback:function(e){t.$set(t.cycle,"end",e)},expression:"cycle.end"}}),t._v("\n    时\n  ")],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"3",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("循环")]),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[t._v("从")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:0,max:23,size:"mini"},on:{change:function(e){t.type="3"}},model:{value:t.loop.start,callback:function(e){t.$set(t.loop,"start",e)},expression:"loop.start"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[t._v("时开始，每")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:23,size:"mini"},on:{change:function(e){t.type="3"}},model:{value:t.loop.end,callback:function(e){t.$set(t.loop,"end",e)},expression:"loop.end"}}),t._v("\n    时执行一次\n  ")],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"4",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("指定")]),t._v(" "),a("el-checkbox-group",{model:{value:t.appoint,callback:function(e){t.appoint=e},expression:"appoint"}},t._l(3,function(e){return a("div",{key:e,staticStyle:{"margin-left":"10px","line-height":"25px"}},t._l(10,function(s){return parseInt(e-1+""+(s-1))<24?a("el-checkbox",{key:s,attrs:{label:e-1+""+(s-1)},on:{change:function(e){t.type="4"}}}):t._e()}),1)}),0)],1)])},staticRenderFns:[]};var Dt=a("VU/8")($t,Tt,!1,function(t){a("jF+Z")},null,null).exports,Ct={props:{value:{type:String,default:"?"}},data:function(){return{type:"5",cycle:{start:0,end:0},loop:{start:0,end:0},week:{start:0,end:0},work:0,last:0,appoint:[]}},computed:{value_:function(){var t=[];switch(this.type){case"1":t.push("*");break;case"2":t.push(this.cycle.start+"-"+this.cycle.end);break;case"3":t.push(this.loop.start+"/"+this.loop.end);break;case"4":t.push(this.appoint.join(","));break;case"6":t.push((0===this.last?"":this.last)+"L");break;case"7":t.push(this.week.start+"#"+this.week.end);break;case"8":t.push(this.work+"W");break;default:t.push("?")}return this.$emit("input",t.join("")),t.join("")}},watch:{value:function(t,e){this.updateVal()}},methods:{updateVal:function(){this.value&&("?"===this.value?this.type="5":-1!==this.value.indexOf("-")?2===this.value.split("-").length&&(this.type="2",this.cycle.start=this.value.split("-")[0],this.cycle.end=this.value.split("-")[1]):-1!==this.value.indexOf("/")?2===this.value.split("/").length&&(this.type="3",this.loop.start=this.value.split("/")[0],this.loop.end=this.value.split("/")[1]):-1!==this.value.indexOf("*")?this.type="1":-1!==this.value.indexOf("L")?(this.type="6",this.last=this.value.replace("L","")):-1!==this.value.indexOf("#")?2===this.value.split("#").length&&(this.type="7",this.week.start=this.value.split("#")[0],this.week.end=this.value.split("#")[1]):-1!==this.value.indexOf("W")?(this.type="8",this.work=this.value.replace("W","")):(this.type="4",this.appoint=this.value.split(",")))}},created:function(){this.updateVal()}},Et={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{val:t.value_}},[a("div",[a("el-radio",{attrs:{label:"1",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("每日")])],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"5",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("不指定")])],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"2",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("周期")]),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[t._v("从")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:31,size:"mini"},on:{change:function(e){t.type="2"}},model:{value:t.cycle.start,callback:function(e){t.$set(t.cycle,"start",e)},expression:"cycle.start"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[t._v("至")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:2,max:31,size:"mini"},on:{change:function(e){t.type="2"}},model:{value:t.cycle.end,callback:function(e){t.$set(t.cycle,"end",e)},expression:"cycle.end"}}),t._v("\n    日\n  ")],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"3",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("循环")]),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[t._v("从")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:31,size:"mini"},on:{change:function(e){t.type="3"}},model:{value:t.loop.start,callback:function(e){t.$set(t.loop,"start",e)},expression:"loop.start"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[t._v("日开始，每")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:31,size:"mini"},on:{change:function(e){t.type="3"}},model:{value:t.loop.end,callback:function(e){t.$set(t.loop,"end",e)},expression:"loop.end"}}),t._v("\n    日执行一次\n  ")],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"8",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("工作日")]),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[t._v("本月")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:7,size:"mini"},on:{change:function(e){t.type="8"}},model:{value:t.work,callback:function(e){t.work=e},expression:"work"}}),t._v("\n    号，最近的工作日\n  ")],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"6",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("本月最后一天")])],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"4",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("指定")]),t._v(" "),a("el-checkbox-group",{model:{value:t.appoint,callback:function(e){t.appoint=e},expression:"appoint"}},t._l(4,function(e){return a("div",{key:e,staticStyle:{"margin-left":"10px","line-height":"25px"}},t._l(10,function(s){return parseInt(e-1+""+(s-1))<32&&(1!==e||1!==s)?a("el-checkbox",{key:s,attrs:{label:e-1+""+(s-1)},on:{change:function(e){t.type="4"}}}):t._e()}),1)}),0)],1)])},staticRenderFns:[]};var Nt=a("VU/8")(Ct,Et,!1,function(t){a("3OXz")},null,null).exports,It={props:{value:{type:String,default:"*"}},data:function(){return{type:"1",cycle:{start:0,end:0},loop:{start:0,end:0},week:{start:0,end:0},work:0,last:0,appoint:[]}},computed:{value_:function(){var t=[];switch(this.type){case"1":t.push("*");break;case"2":t.push(this.cycle.start+"-"+this.cycle.end);break;case"3":t.push(this.loop.start+"/"+this.loop.end);break;case"4":t.push(this.appoint.join(","));break;case"6":t.push((0===this.last?"":this.last)+"L");break;default:t.push("?")}return this.$emit("input",t.join("")),t.join("")}},watch:{value:function(t,e){this.updateVal()}},methods:{updateVal:function(){this.value&&("?"===this.value?this.type="5":-1!==this.value.indexOf("-")?2===this.value.split("-").length&&(this.type="2",this.cycle.start=this.value.split("-")[0],this.cycle.end=this.value.split("-")[1]):-1!==this.value.indexOf("/")?2===this.value.split("/").length&&(this.type="3",this.loop.start=this.value.split("/")[0],this.loop.end=this.value.split("/")[1]):-1!==this.value.indexOf("*")?this.type="1":-1!==this.value.indexOf("L")?(this.type="6",this.last=this.value.replace("L","")):-1!==this.value.indexOf("#")?2===this.value.split("#").length&&(this.type="7",this.week.start=this.value.split("#")[0],this.week.end=this.value.split("#")[1]):-1!==this.value.indexOf("W")?(this.type="8",this.work=this.value.replace("W","")):(this.type="4",this.appoint=this.value.split(",")))}},created:function(){this.updateVal()}},Pt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{val:t.value_}},[a("div",[a("el-radio",{attrs:{label:"1",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("每月")])],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"5",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("不指定")])],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"2",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("周期")]),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[t._v("从")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:12,size:"mini"},on:{change:function(e){t.type="2"}},model:{value:t.cycle.start,callback:function(e){t.$set(t.cycle,"start",e)},expression:"cycle.start"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[t._v("至")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:2,max:12,size:"mini"},on:{change:function(e){t.type="2"}},model:{value:t.cycle.end,callback:function(e){t.$set(t.cycle,"end",e)},expression:"cycle.end"}}),t._v("\n    月\n  ")],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"3",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("循环")]),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[t._v("从")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:12,size:"mini"},on:{change:function(e){t.type="3"}},model:{value:t.loop.start,callback:function(e){t.$set(t.loop,"start",e)},expression:"loop.start"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[t._v("月开始，每")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:12,size:"mini"},on:{change:function(e){t.type="3"}},model:{value:t.loop.end,callback:function(e){t.$set(t.loop,"end",e)},expression:"loop.end"}}),t._v("\n    月执行一次\n  ")],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"4",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("指定")]),t._v(" "),a("el-checkbox-group",{staticStyle:{"margin-left":"0px","line-height":"25px"},model:{value:t.appoint,callback:function(e){t.appoint=e},expression:"appoint"}},t._l(12,function(e){return a("el-checkbox",{key:e,attrs:{label:e},on:{change:function(e){t.type="4"}}})}),1)],1)])},staticRenderFns:[]};var Vt=a("VU/8")(It,Pt,!1,function(t){a("Tp/Z")},null,null).exports,jt={props:{value:{type:String,default:"*"}},data:function(){return{type:"1",cycle:{start:0,end:0},loop:{start:0,end:0},week:{start:0,end:0},work:0,last:0,appoint:[]}},computed:{value_:function(){var t=[];switch(this.type){case"1":t.push("*");break;case"2":t.push(this.cycle.start+"-"+this.cycle.end);break;case"3":t.push(this.loop.start+"/"+this.loop.end);break;case"4":t.push(this.appoint.join(","));break;case"6":t.push((0===this.last?"":this.last)+"L");break;case"7":t.push(this.week.start+"#"+this.week.end);break;default:t.push("?")}return this.$emit("input",t.join("")),t.join("")}},watch:{value:function(t,e){this.updateVal()}},methods:{updateVal:function(){this.value&&("?"===this.value?this.type="5":-1!==this.value.indexOf("-")?2===this.value.split("-").length&&(this.type="2",this.cycle.start=this.value.split("-")[0],this.cycle.end=this.value.split("-")[1]):-1!==this.value.indexOf("/")?2===this.value.split("/").length&&(this.type="3",this.loop.start=this.value.split("/")[0],this.loop.end=this.value.split("/")[1]):-1!==this.value.indexOf("*")?this.type="1":-1!==this.value.indexOf("L")?(this.type="6",this.last=this.value.replace("L","")):-1!==this.value.indexOf("#")?2===this.value.split("#").length&&(this.type="7",this.week.start=this.value.split("#")[0],this.week.end=this.value.split("#")[1]):-1!==this.value.indexOf("W")?(this.type="8",this.work=this.value.replace("W","")):(this.type="4",this.appoint=this.value.split(",")))}},created:function(){this.updateVal()}},Lt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{val:t.value_}},[a("div",[a("el-radio",{attrs:{label:"1",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("每周")])],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"5",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("不指定")])],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"2",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("周期")]),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[t._v("从星期")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:7,size:"mini"},on:{change:function(e){t.type="2"}},model:{value:t.cycle.start,callback:function(e){t.$set(t.cycle,"start",e)},expression:"cycle.start"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[t._v("至星期")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:2,max:7,size:"mini"},on:{change:function(e){t.type="2"}},model:{value:t.cycle.end,callback:function(e){t.$set(t.cycle,"end",e)},expression:"cycle.end"}})],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"3",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("循环")]),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[t._v("从星期")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:7,size:"mini"},on:{change:function(e){t.type="3"}},model:{value:t.loop.start,callback:function(e){t.$set(t.loop,"start",e)},expression:"loop.start"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[t._v("开始，每")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:7,size:"mini"},on:{change:function(e){t.type="3"}},model:{value:t.loop.end,callback:function(e){t.$set(t.loop,"end",e)},expression:"loop.end"}}),t._v("\n    天执行一次\n  ")],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"7",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("指定周")]),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[t._v("本月第")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:4,size:"mini"},on:{change:function(e){t.type="7"}},model:{value:t.week.start,callback:function(e){t.$set(t.week,"start",e)},expression:"week.start"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[t._v("周，星期")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:7,size:"mini"},on:{change:function(e){t.type="7"}},model:{value:t.week.end,callback:function(e){t.$set(t.week,"end",e)},expression:"week.end"}})],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"6",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("本月最后一个")]),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[t._v("星期")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:7,size:"mini"},on:{change:function(e){t.type="6"}},model:{value:t.last,callback:function(e){t.last=e},expression:"last"}})],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"4",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("指定")]),t._v(" "),a("el-checkbox-group",{staticStyle:{"margin-left":"50px","line-height":"25px"},model:{value:t.appoint,callback:function(e){t.appoint=e},expression:"appoint"}},t._l(7,function(e){return a("el-checkbox",{key:e,attrs:{label:e},on:{change:function(e){t.type="4"}}})}),1)],1)])},staticRenderFns:[]};var At=a("VU/8")(jt,Lt,!1,function(t){a("HuCY")},null,null).exports,Ot={props:{value:{type:String,default:"*"}},data:function(){var t=(new Date).getFullYear();return{type:"1",cycle:{start:t,end:t},loop:{start:0,end:0},week:{start:0,end:0},work:0,last:0,appoint:[]}},computed:{value_:function(){var t=[];switch(this.type){case"1":t.push("*");break;case"2":t.push(this.cycle.start+"-"+this.cycle.end);break;case"3":t.push(this.loop.start+"/"+this.loop.end);break;case"4":t.push(this.appoint.join(","));break;case"6":t.push((0===this.last?"":this.last)+"L");break;default:t.push("?")}return this.$emit("input",t.join("")),t.join("")}},watch:{value:function(t,e){this.updateVal()}},methods:{updateVal:function(){this.value&&("?"===this.value?this.type="5":-1!==this.value.indexOf("-")?2===this.value.split("-").length&&(this.type="2",this.cycle.start=this.value.split("-")[0],this.cycle.end=this.value.split("-")[1]):-1!==this.value.indexOf("/")?2===this.value.split("/").length&&(this.type="3",this.loop.start=this.value.split("/")[0],this.loop.end=this.value.split("/")[1]):-1!==this.value.indexOf("*")?this.type="1":-1!==this.value.indexOf("L")?(this.type="6",this.last=this.value.replace("L","")):-1!==this.value.indexOf("#")?2===this.value.split("#").length&&(this.type="7",this.week.start=this.value.split("#")[0],this.week.end=this.value.split("#")[1]):-1!==this.value.indexOf("W")?(this.type="8",this.work=this.value.replace("W","")):(this.type="4",this.appoint=this.value.split(",")))}},created:function(){this.updateVal()}},zt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{val:t.value_}},[a("div",[a("el-radio",{attrs:{label:"1",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("每年")])],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"5",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("不指定")])],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"2",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("周期")]),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[t._v("从")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:2e3,size:"mini"},on:{change:function(e){t.type="2"}},model:{value:t.cycle.start,callback:function(e){t.$set(t.cycle,"start",e)},expression:"cycle.start"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[t._v("至")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:2e3,size:"mini"},on:{change:function(e){t.type="2"}},model:{value:t.cycle.end,callback:function(e){t.$set(t.cycle,"end",e)},expression:"cycle.end"}}),t._v("\n    年\n  ")],1)])},staticRenderFns:[]};var Rt=a("VU/8")(Ot,zt,!1,function(t){a("myO6")},null,null).exports,Ft={props:{value:{type:String}},data:function(){return{activeName:"s",sVal:"",mVal:"",hVal:"",dVal:"",monthVal:"",weekVal:"",yearVal:""}},watch:{value:function(t,e){this.updateVal()}},computed:{tableData:function(){return[{sVal:this.sVal,mVal:this.mVal,hVal:this.hVal,dVal:this.dVal,monthVal:this.monthVal,weekVal:this.weekVal,yearVal:this.yearVal}]},value_:function(){if(!this.dVal&&!this.weekVal)return"";"?"===this.dVal&&"?"===this.weekVal&&this.$notify.error("日期与星期不可以同时为“不指定”"),"?"!==this.dVal&&"?"!==this.weekVal&&this.$notify.error("日期与星期必须有一个为“不指定”");var t=this.sVal+" "+this.mVal+" "+this.hVal+" "+this.dVal+" "+this.monthVal+" "+this.weekVal+" "+this.yearVal;return t!==this.value&&this.$emit("input",t),t}},methods:{updateVal:function(){if(this.value){var t=this.value.split(" ");this.sVal=t[0],this.mVal=t[1],this.hVal=t[2],this.dVal=t[3],this.monthVal=t[4],this.weekVal=t[5],this.yearVal=t[6]}}},created:function(){this.updateVal()},components:{SecondAndMinute:St,hour:Dt,day:Nt,month:Vt,week:At,year:Rt}},qt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cron",attrs:{val:t.value_}},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"秒",name:"s"}},[a("second-and-minute",{attrs:{lable:"秒"},model:{value:t.sVal,callback:function(e){t.sVal=e},expression:"sVal"}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"分",name:"m"}},[a("second-and-minute",{attrs:{lable:"分"},model:{value:t.mVal,callback:function(e){t.mVal=e},expression:"mVal"}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"时",name:"h"}},[a("hour",{attrs:{lable:"时"},model:{value:t.hVal,callback:function(e){t.hVal=e},expression:"hVal"}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"日",name:"d"}},[a("day",{attrs:{lable:"日"},model:{value:t.dVal,callback:function(e){t.dVal=e},expression:"dVal"}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"周",name:"week"}},[a("week",{attrs:{lable:"周"},model:{value:t.weekVal,callback:function(e){t.weekVal=e},expression:"weekVal"}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"月",name:"month"}},[a("month",{attrs:{lable:"月"},model:{value:t.monthVal,callback:function(e){t.monthVal=e},expression:"monthVal"}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"年",name:"year"}},[a("year",{attrs:{lable:"年"},model:{value:t.yearVal,callback:function(e){t.yearVal=e},expression:"yearVal"}})],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,size:"mini",border:""}},[a("el-table-column",{attrs:{prop:"sVal",label:"秒",width:"70"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mVal",label:"分",width:"70"}}),t._v(" "),a("el-table-column",{attrs:{prop:"hVal",label:"时",width:"70"}}),t._v(" "),a("el-table-column",{attrs:{prop:"dVal",label:"日",width:"70"}}),t._v(" "),a("el-table-column",{attrs:{prop:"weekVal",label:"周",width:"70"}}),t._v(" "),a("el-table-column",{attrs:{prop:"monthVal",label:"月",width:"70"}}),t._v(" "),a("el-table-column",{attrs:{prop:"yearVal",label:"年"}})],1),t._v(" "),a("span",{staticStyle:{color:"#E6A23C","font-size":"12px"}},[t._v("cron从左到右（用空格隔开）：秒 分 小时 月份中的日期 月份 星期中的日期 年份")])],1)},staticRenderFns:[]};var Bt=a("VU/8")(Ft,qt,!1,function(t){a("Vq7d")},null,null).exports,Kt={data:function(){return{webhooks:[],rules:{taskName:[{required:!0,message:"请输入任务名称",trigger:"change"}],isParallel:[{required:!0,message:"执行方式不能为空",trigger:"change"}],times:[{required:!0,message:"请输入轮询次数",trigger:"change"},{type:"number",message:"轮询次数必须为数字",trigger:"change"}],cron:[{required:!0,message:"cron表达式不能为空",trigger:"change"}],dingId:[{required:!0,message:"请选择机器人",trigger:"change"}]},rules2:{set:[{required:!0,message:"请选择用例集",trigger:"change"}],env:[{required:!0,message:"请选择执行环境",trigger:"change"}]},options:[{value:0,label:"串行"},{value:1,label:"并发"}],setOptions:[],envOptions:[],dialogTableVisible:!1,dialogFormVisible:!1,form:{taskName:"",taskDesc:"",isParallel:"",times:0,cron:"* * * ? * * *",isMail:!1,mail:"",isDing:!1,dingId:""},formLabelWidth:"110px",addTestSetShow:!1,form2:{env:"",set:""},testSets:[],showCronBox:!1}},methods:{addTimingTask:function(){var t=this,e={isTiming:1,taskName:this.form.taskName,taskDesc:this.form.taskDesc,isParallel:this.form.isParallel,testSets:f()(this.testSets),times:this.form.times,isDing:this.form.isDing?1:0,dingId:this.form.dingId,cron:this.form.cron,isOpen:0};this.$refs.form.validate(function(a){a&&t.$axios.post("/apis/timingTask/",e).then(function(e){200===e.data.code?t.$notify({title:"成功",type:"success",message:e.data.msg}):t.$notify({title:"失败",type:"error",message:e.data.msg}),t.closeAddTimingTaskView(),t.$emit("getTimingTasks")}).catch(function(e){t.$notify({title:"失败",type:"error",message:e})})})},getDings:function(){var t=this;this.loading=!0,this.$axios.get("/apis/Dingding/list").then(function(e){200===e.data.code?t.webhooks=e.data.data:t.$notify({title:"操作失败",type:"warning",message:e.data.msg}),t.loading=!1}).catch(function(e){t.$notify({title:"操作失败",type:"error",message:e})})},closeAddTimingTaskView:function(){this.showCronBox=!1,this.$refs.form.resetFields(),this.$store.commit("changeAddTimingTaskShow",!1)},showAddTestSet:function(){var t=this;this.$axios.get("/apis/testcaseset/list").then(function(e){200===e.data.code?e.data.data.forEach(function(e){t.setOptions.push({setName:e.setName,setId:e.setId})}):t.$notify({title:"操作失败",type:"warning",message:e.data.msg})}).catch(function(e){t.$notify({title:"操作失败",type:"error",message:e})}),this.addTestSetShow=!0},getEnvsOfSet:function(){var t=this;this.envOptions=[],this.$axios.get("/apis/testcaseset/"+this.form2.set.setId+"/env").then(function(e){200===e.data.code?e.data.data.forEach(function(e){t.envOptions.push({envName:e.envName,envId:e.envId})}):t.$notify({title:"操作失败",type:"warning",message:e.data.msg})}).catch(function(e){t.$notify({title:"操作失败",type:"error",message:e})})},addSet:function(){var t=this;this.$refs.form2.validate(function(e){e&&(t.testSets.push({setName:t.form2.set.setName,setId:t.form2.set.setId,envName:t.form2.env.envName,envId:t.form2.env.envId}),t.addTestSetShow=!1,t.form2={env:"",set:""})})},delSet:function(t){this.testSets.splice(t,1)},closeAddTestSetShow:function(){this.$refs.form2.resetFields(),this.setOptions=[],this.envOptions=[],this.form2={env:"",set:""},this.addTestSetShow=!1}},mounted:function(){this.getDings()},computed:{},components:{Cron:Bt}},Ut={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticStyle:{height:"100%"},attrs:{title:"新增定时任务",visible:t.$store.state.addtimingtaskshow,"close-on-click-modal":!1,"append-to-body":!0},on:{"update:visible":function(e){return t.$set(t.$store.state,"addtimingtaskshow",e)},close:t.closeAddTimingTaskView}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"定时任务名称","label-width":t.formLabelWidth,prop:"taskName"}},[a("el-input",{attrs:{placeholder:"请输入任务名称",autocomplete:"off"},model:{value:t.form.taskName,callback:function(e){t.$set(t.form,"taskName",e)},expression:"form.taskName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"定时任务描述","label-width":t.formLabelWidth,prop:"taskDesc"}},[a("el-input",{attrs:{placeholder:"请输入任务描述",autocomplete:"off",type:"textarea",autosize:{minRows:3,maxRows:5}},model:{value:t.form.taskDesc,callback:function(e){t.$set(t.form,"taskDesc",e)},expression:"form.taskDesc"}})],1),t._v(" "),a("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"执行方式","label-width":t.formLabelWidth,prop:"isParallel"}},[a("el-select",{attrs:{placeholder:"请选择执行方式"},model:{value:t.form.isParallel,callback:function(e){t.$set(t.form,"isParallel",e)},expression:"form.isParallel"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"轮询次数","label-width":t.formLabelWidth,prop:"times"}},[a("el-input",{attrs:{placeholder:"请输入轮询次数",autocomplete:"off"},model:{value:t.form.times,callback:function(e){t.$set(t.form,"times",t._n(e))},expression:"form.times"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Cron","label-width":t.formLabelWidth,prop:"cron"}},[a("transition",{attrs:{name:"el-zoom-in-top"}},[t.showCronBox?a("Cron",{model:{value:t.form.cron,callback:function(e){t.$set(t.form,"cron",e)},expression:"form.cron"}}):t._e()],1),t._v(" "),a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.cron,callback:function(e){t.$set(t.form,"cron",e)},expression:"form.cron"}},[t.showCronBox?a("el-button",{attrs:{slot:"append",icon:"el-icon-arrow-down",title:"关闭图形配置"},on:{click:function(e){t.showCronBox=!1}},slot:"append"}):a("el-button",{attrs:{slot:"append",icon:"el-icon-arrow-up",title:"打开图形配置"},on:{click:function(e){t.showCronBox=!0}},slot:"append"})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"钉钉通知开关","label-width":t.formLabelWidth}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.form.isDing,callback:function(e){t.$set(t.form,"isDing",e)},expression:"form.isDing"}})],1),t._v(" "),t.form.isDing?a("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"钉钉机器人","label-width":t.formLabelWidth,prop:"dingId"}},[a("el-select",{attrs:{placeholder:"请选择机器人"},model:{value:t.form.dingId,callback:function(e){t.$set(t.form,"dingId",e)},expression:"form.dingId"}},t._l(t.webhooks,function(t){return a("el-option",{key:t.descId,attrs:{label:t.desc,value:t.descId}})}),1)],1):t._e(),t._v(" "),a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"添加用例集",visible:t.addTestSetShow,"append-to-body":!0},on:{"update:visible":function(e){t.addTestSetShow=e},close:t.closeAddTestSetShow}},[a("el-form",{ref:"form2",attrs:{model:t.form2,rules:t.rules2}},[a("el-form-item",{attrs:{label:"用例集","label-width":t.formLabelWidth,prop:"set"}},[a("el-select",{attrs:{placeholder:"请选择用例集",filterable:"","value-key":"setId"},on:{change:t.getEnvsOfSet},model:{value:t.form2.set,callback:function(e){t.$set(t.form2,"set",e)},expression:"form2.set"}},t._l(t.setOptions,function(t){return a("el-option",{key:t.setId,attrs:{label:t.setName,value:t}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"执行环境","label-width":t.formLabelWidth,prop:"env"}},[a("el-select",{attrs:{placeholder:"请选择执行环境",filterable:"",clearable:"","value-key":"envId"},model:{value:t.form2.env,callback:function(e){t.$set(t.form2,"env",e)},expression:"form2.env"}},t._l(t.envOptions,function(t){return a("el-option",{key:t.envId,attrs:{label:t.envName,value:t}})}),1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addSet}},[t._v("添 加")]),t._v(" "),a("el-button",{on:{click:t.closeAddTestSetShow}},[t._v("取 消")])],1)],1),t._v(" "),a("div",{staticStyle:{"text-align":"left"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.showAddTestSet}},[t._v("添加用例集")]),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("用例集列表")]),t._v(" "),a("el-card",{attrs:{shadow:"hover"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.testSets,stripe:"",height:"300"}},[a("el-table-column",{attrs:{prop:"index",label:"序号",type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"setName",label:"用例集名称",width:"400"}}),t._v(" "),a("el-table-column",{attrs:{prop:"envName",label:"执行环境",width:"280"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return t.delSet(e.$index)}}},[t._v("移除")])]}}])})],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addTimingTask}},[t._v("保 存")]),t._v(" "),a("el-button",{on:{click:t.closeAddTimingTaskView}},[t._v("取 消")])],1)],1)},staticRenderFns:[]},Wt={data:function(){return{webhooks:[],rules:{taskName:[{required:!0,message:"请输入任务名称",trigger:"change"}],isParallel:[{required:!0,message:"执行方式不能为空",trigger:"change"}],times:[{required:!0,message:"请输入轮询次数",trigger:"change"},{type:"number",message:"轮询次数必须为数字",trigger:"change"}],cron:[{required:!0,message:"cron表达式不能为空",trigger:"change"}],dingId:[{required:!0,message:"请选择机器人",trigger:"change"}]},rules2:{set:[{required:!0,message:"请选择用例集",trigger:"change"}],env:[{required:!0,message:"请选择执行环境",trigger:"change"}]},options:[{value:0,label:"串行"},{value:1,label:"并发"}],setOptions:[],envOptions:[],dialogTableVisible:!1,dialogFormVisible:!1,form:{taskId:"",taskName:"",taskDesc:"",isParallel:"",times:0,cron:"* * * ? * * *",isMail:!1,mail:"",isDing:!1,dingId:""},formLabelWidth:"110px",addTestSetShow:!1,form2:{env:"",set:""},testSets:[],showCronBox:!1,loading:!0}},methods:{editTimingTask:function(){var t=this,e={taskId:this.form.taskId,isTiming:1,taskName:this.form.taskName,taskDesc:this.form.taskDesc,isParallel:this.form.isParallel,testSets:f()(this.testSets),times:this.form.times,isDing:this.form.isDing?1:0,dingId:this.form.dingId,cron:this.form.cron,isOpen:0};this.$refs.form.validate(function(a){a&&t.$axios.put("/apis/timingTask/"+t.form.taskId,e).then(function(e){200===e.data.code?t.$notify({title:"成功",type:"success",message:e.data.msg}):t.$notify({title:"失败",type:"error",message:e.data.msg}),t.closeEditTimingTaskView(),t.$emit("getTimingTasks")}).catch(function(e){t.$notify({title:"失败",type:"error",message:e})})})},getDings:function(){var t=this;this.loading=!0,this.$axios.get("/apis/Dingding/list").then(function(e){200===e.data.code?t.webhooks=e.data.data:t.$notify({title:"操作失败",type:"warning",message:e.data.msg}),t.loading=!1}).catch(function(e){t.$notify({title:"操作失败",type:"error",message:e})})},closeEditTimingTaskView:function(){this.loading=!0,this.showCronBox=!1,this.$refs.form.resetFields(),this.$store.commit("changeEditTimingTaskShow",!1)},showAddTestSet:function(){var t=this;console.log(this.form),this.$axios.get("/apis/testcaseset/list").then(function(e){200===e.data.code?e.data.data.forEach(function(e){t.setOptions.push({setName:e.setName,setId:e.setId})}):t.$notify({title:"操作失败",type:"warning",message:e.data.msg})}).catch(function(e){t.$notify({title:"操作失败",type:"error",message:e})}),this.addTestSetShow=!0},getEnvsOfSet:function(){var t=this;this.envOptions=[],this.$axios.get("/apis/testcaseset/"+this.form2.set.setId+"/env").then(function(e){200===e.data.code?e.data.data.forEach(function(e){t.envOptions.push({envName:e.envName,envId:e.envId})}):t.$notify({title:"操作失败",type:"warning",message:e.data.msg})}).catch(function(e){t.$notify({title:"操作失败",type:"error",message:e})})},addSet:function(){var t=this;this.$refs.form2.validate(function(e){e&&(t.testSets.push({setName:t.form2.set.setName,setId:t.form2.set.setId,envName:t.form2.env.envName,envId:t.form2.env.envId}),t.addTestSetShow=!1,t.form2={env:"",set:""})})},delSet:function(t){this.testSets.splice(t,1)},closeAddTestSetShow:function(){this.$refs.form2.resetFields(),this.setOptions=[],this.envOptions=[],this.form2={env:"",set:""},this.addTestSetShow=!1}},mounted:function(){this.getDings()},computed:{},watch:{"$store.state.timingTaskDetail":function(){this.form=this.$store.state.timingTaskDetail,this.form.isParallel=parseInt(this.form.isParallel),this.form.isMail=0!==this.form.isMail,this.testSets=this.form.testSetList,this.form.isDing=1===this.$store.state.timingTaskDetail.isDing,this.loading=!1}},components:{Cron:Bt}},Ht={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticStyle:{height:"100%"},attrs:{title:"更改配置",visible:t.$store.state.edittimingtaskshow,"close-on-click-modal":!1,"append-to-body":!0},on:{"update:visible":function(e){return t.$set(t.$store.state,"edittimingtaskshow",e)},close:t.closeEditTimingTaskView}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"form",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"定时任务名称","label-width":t.formLabelWidth,prop:"taskName"}},[a("el-input",{attrs:{placeholder:"请输入任务名称",autocomplete:"off"},model:{value:t.form.taskName,callback:function(e){t.$set(t.form,"taskName",e)},expression:"form.taskName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"定时任务描述","label-width":t.formLabelWidth,prop:"taskDesc"}},[a("el-input",{attrs:{placeholder:"请输入任务描述",autocomplete:"off",type:"textarea",autosize:{minRows:3,maxRows:5}},model:{value:t.form.taskDesc,callback:function(e){t.$set(t.form,"taskDesc",e)},expression:"form.taskDesc"}})],1),t._v(" "),a("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"执行方式","label-width":t.formLabelWidth,prop:"isParallel"}},[a("el-select",{attrs:{placeholder:"请选择执行方式"},model:{value:t.form.isParallel,callback:function(e){t.$set(t.form,"isParallel",e)},expression:"form.isParallel"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"轮询次数","label-width":t.formLabelWidth,prop:"times"}},[a("el-input",{attrs:{placeholder:"请输入轮询次数",autocomplete:"off"},model:{value:t.form.times,callback:function(e){t.$set(t.form,"times",t._n(e))},expression:"form.times"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Cron","label-width":t.formLabelWidth,prop:"cron"}},[a("transition",{attrs:{name:"el-zoom-in-top"}},[t.showCronBox?a("Cron",{model:{value:t.form.cron,callback:function(e){t.$set(t.form,"cron",e)},expression:"form.cron"}}):t._e()],1),t._v(" "),a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.cron,callback:function(e){t.$set(t.form,"cron",e)},expression:"form.cron"}},[t.showCronBox?a("el-button",{attrs:{slot:"append",icon:"el-icon-arrow-down",title:"关闭图形配置"},on:{click:function(e){t.showCronBox=!1}},slot:"append"}):a("el-button",{attrs:{slot:"append",icon:"el-icon-arrow-up",title:"打开图形配置"},on:{click:function(e){t.showCronBox=!0}},slot:"append"})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"钉钉通知开关","label-width":t.formLabelWidth}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.form.isDing,callback:function(e){t.$set(t.form,"isDing",e)},expression:"form.isDing"}})],1),t._v(" "),t.form.isDing?a("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"钉钉机器人","label-width":t.formLabelWidth,prop:"dingId"}},[a("el-select",{attrs:{placeholder:"请选择机器人"},model:{value:t.form.dingId,callback:function(e){t.$set(t.form,"dingId",e)},expression:"form.dingId"}},t._l(t.webhooks,function(t){return a("el-option",{key:t.descId,attrs:{label:t.desc,value:t.descId}})}),1)],1):t._e(),t._v(" "),a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"添加用例集",visible:t.addTestSetShow,"append-to-body":!0},on:{"update:visible":function(e){t.addTestSetShow=e},close:t.closeAddTestSetShow}},[a("el-form",{ref:"form2",attrs:{model:t.form2,rules:t.rules2}},[a("el-form-item",{attrs:{label:"用例集","label-width":t.formLabelWidth,prop:"set"}},[a("el-select",{attrs:{placeholder:"请选择用例集",filterable:"","value-key":"setId"},on:{change:t.getEnvsOfSet},model:{value:t.form2.set,callback:function(e){t.$set(t.form2,"set",e)},expression:"form2.set"}},t._l(t.setOptions,function(t){return a("el-option",{key:t.setId,attrs:{label:t.setName,value:t}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"执行环境","label-width":t.formLabelWidth,prop:"env"}},[a("el-select",{attrs:{placeholder:"请选择执行环境",filterable:"",clearable:"","value-key":"envId"},model:{value:t.form2.env,callback:function(e){t.$set(t.form2,"env",e)},expression:"form2.env"}},t._l(t.envOptions,function(t){return a("el-option",{key:t.envId,attrs:{label:t.envName,value:t}})}),1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addSet}},[t._v("添 加")]),t._v(" "),a("el-button",{on:{click:t.closeAddTestSetShow}},[t._v("取 消")])],1)],1),t._v(" "),a("div",{staticStyle:{"text-align":"left"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.showAddTestSet}},[t._v("添加用例集")]),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("用例集列表")]),t._v(" "),a("el-card",{attrs:{shadow:"hover"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.testSets,stripe:"",height:"300"}},[a("el-table-column",{attrs:{prop:"index",label:"序号",type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"setName",label:"用例集名称",width:"400"}}),t._v(" "),a("el-table-column",{attrs:{prop:"envName",label:"执行环境",width:"280"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return t.delSet(e.$index)}}},[t._v("移除")])]}}])})],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.editTimingTask}},[t._v("保 存")]),t._v(" "),a("el-button",{on:{click:t.closeEditTimingTaskView}},[t._v("取 消")])],1)],1)},staticRenderFns:[]},Jt={name:"Task",methods:{openAddTask:function(){this.$store.commit("changeAddTimingTaskShow",!0)},openEditTask:function(t){var e=this;this.$store.commit("changeEditTimingTaskShow",!0),this.$axios.get("/apis/timingTask/"+t+"/info").then(function(t){e.$store.commit("setTimingTaskDetail",t.data.data)})},openTimingTask:function(t){var e=this;this.$confirm("是否开启定时任务？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$axios.post("/apis/timingTask/start/"+t).then(function(t){200===t.data.code?(e.$notify({title:"操作成功",type:"success",message:t.data.msg}),e.getTimingTasks(1)):e.$notify({title:"操作失败",type:"warning",message:t.data.msg})}).catch(function(t){e.$notify({title:"操作失败",type:"error",message:t})})})},closeTimingTask:function(t){var e=this;this.$confirm("是否关闭定时任务？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$axios.post("/apis/timingTask/close/"+t).then(function(t){200===t.data.code?(e.$notify({title:"操作成功",type:"success",message:t.data.msg}),e.getTimingTasks(1)):e.$notify({title:"操作失败",type:"warning",message:t.data.msg})}).catch(function(t){e.$notify({title:"操作失败",type:"error",message:t})})})},openTimingTasks:function(){var t=this,e=[];this.tasks.forEach(function(t){e.push(t.taskId)}),this.$confirm("是否要批量开启定时任务？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios.post("/apis/timingTask/startTasks/",e).then(function(e){200===e.data.code?(t.$notify({title:"操作成功",type:"success",message:e.data.msg}),t.getTimingTasks(1)):t.$notify({title:"操作失败",type:"warning",message:e.data.msg})}).catch(function(e){t.$notify({title:"操作失败",type:"error",message:e})})})},closeTimingTasks:function(){var t=this,e=[];this.tasks.forEach(function(t){e.push(t.taskId)}),this.$confirm("是否要批量关闭定时任务？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios.post("/apis/timingTask/closeTasks/",e).then(function(e){200===e.data.code?(t.$notify({title:"操作成功",type:"success",message:e.data.msg}),t.getTimingTasks(1)):t.$notify({title:"操作失败",type:"warning",message:e.data.msg})}).catch(function(e){t.$notify({title:"操作失败",type:"error",message:e})})})},handleSelectionChange:function(t){this.tasks=t},getTimingTasks:function(t){var e=this;this.page=t,this.loading=!0,this.$axios.get("/apis/timingTask/"+t,{params:{taskName:this.search_val,isParallel:this.isParallel}}).then(function(t){200===t.data.code?(e.taskLists=t.data.data.list,e.total=t.data.data.total):e.$notify({title:"操作失败",type:"warning",message:t.data.msg}),e.loading=!1}).catch(function(t){e.$notify({title:"操作失败",type:"error",message:t})})},deleteTask:function(t){var e=this;this.$confirm("确定要删除吗？").then(function(a){e.$axios.delete("/apis/task/"+t.taskId).then(function(t){200===t.data.code?e.$notify({title:"操作成功",type:"success",message:t.data.msg}):e.$notify({title:"操作失败",type:"warning",message:t.data.msg}),e.page=1,e.getTimingTasks(1)}).catch(function(t){e.$notify({title:"操作失败",type:"error",message:t})})})}},data:function(){return{page:1,total:0,search_val:"",projects:[],taskLists:[],isParallel:"",loading:!1,items:["","success","info","danger","warning"],dialogVisible:!1,tasks:[]}},components:{AddTimingTasks:a("VU/8")(Kt,Ut,!1,null,null,null).exports,EditTimingTasks:a("VU/8")(Wt,Ht,!1,null,null,null).exports},created:function(){this.getTimingTasks(1)}},Gt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"case"}},[s("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/main"}}},[t._v("首页")]),t._v(" "),s("el-breadcrumb-item",[t._v("任务管理")]),t._v(" "),s("el-breadcrumb-item",[t._v("定时任务管理")])],1),t._v(" "),s("div",{staticClass:"header"},[s("span",[s("el-input",{attrs:{placeholder:"请输入定时任务名称","prefix-icon":"el-icon-search"},model:{value:t.search_val,callback:function(e){t.search_val=e},expression:"search_val"}})],1),t._v(" "),s("span",[s("el-select",{attrs:{placeholder:"请选择执行方式",clearable:""},model:{value:t.isParallel,callback:function(e){t.isParallel=e},expression:"isParallel"}},[s("el-option",{attrs:{label:"串行",value:0}}),t._v(" "),s("el-option",{attrs:{label:"并发",value:1}})],1)],1),t._v(" "),s("span",[s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getTimingTasks(1)}}},[t._v("搜索")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.openAddTask}},[t._v("新增")]),t._v(" "),s("el-button",{attrs:{type:"success"},on:{click:t.openTimingTasks}},[t._v("批量开启")]),t._v(" "),s("el-button",{attrs:{type:"danger"},on:{click:t.closeTimingTasks}},[t._v("批量关闭")])],1)]),t._v(" "),s("AddTimingTasks",{on:{getTimingTasks:function(e){return t.getTimingTasks(1)}}}),t._v(" "),s("EditTimingTasks",{on:{getTimingTasks:function(e){return t.getTimingTasks(1)}}}),t._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.taskLists,"max-height":"80%",height:"800","default-sort":{prop:"createTime",order:"descending"}},on:{"selection-change":t.handleSelectionChange}},[s("div",{staticStyle:{"text-align":"left",margin:"30px"},attrs:{slot:"empty"},slot:"empty"},[s("div",[s("img",{attrs:{src:a("N9nc"),alt:"",width:"140px",height:"140px"}})]),t._v(" "),s("p",[t._v("没有查询到数据呦～")])]),t._v(" "),s("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),s("el-table-column",{attrs:{fixed:"left",prop:"taskName",label:"定时任务名称",width:"200","show-overflow-tooltip":!0}}),t._v(" "),s("el-table-column",{attrs:{prop:"taskDesc",label:"定时任务描述",width:"300","show-overflow-tooltip":!0}}),t._v(" "),s("el-table-column",{attrs:{prop:"testSetList",label:"绑定用例集",width:"500","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.testSetList,function(a){return s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:a.setName,placement:"top-start"}},[s("el-tag",{key:a.setId,staticStyle:{"margin-left":"5px"},attrs:{type:t.items[e.row.testSetList.indexOf(a)%5],effect:"light",size:"mini"}},[t._v("\n            "+t._s("用例集"+(e.row.testSetList.indexOf(a)+1))+"\n          ")])],1)})}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"isParallel",label:"执行方式",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return["0"===e.row.isParallel?s("el-tag",{attrs:{type:"primary"}},[t._v("串行")]):t._e(),t._v(" "),"1"===e.row.isParallel?s("el-tag",{attrs:{type:"success"}},[t._v("并发")]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"isOpen",label:"开启/关闭",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.isOpen?s("el-tag",{attrs:{type:"danger"}},[t._v("关闭")]):t._e(),t._v(" "),1===e.row.isOpen?s("el-tag",{attrs:{type:"success"}},[t._v("开启")]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"isDing",label:"钉钉通知",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.isDing?s("el-tag",{attrs:{type:"danger"}},[t._v("关闭")]):t._e(),t._v(" "),1===e.row.isDing?s("el-tag",{attrs:{type:"success"}},[t._v("开启")]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"300"}}),t._v(" "),s("el-table-column",{attrs:{prop:"updateTime",label:"创建时间",width:"300"}}),t._v(" "),s("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticStyle:{"margin-bottom":"10px"}},[0===e.row.isOpen?s("el-button",{attrs:{type:"primary",size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),t.openTimingTask(e.row.taskId)}}},[t._v("\n            开启任务\n          ")]):t._e(),t._v(" "),1===e.row.isOpen?s("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),t.closeTimingTask(e.row.taskId)}}},[t._v("\n            关闭任务\n          ")]):t._e(),t._v(" "),s("el-button",{attrs:{size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),t.openEditTask(e.row.taskId)}}},[t._v("\n            更改配置\n          ")]),t._v(" "),s("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),t.deleteTask(e.row)}}},[t._v("\n            移除\n          ")])],1)]}}])})],1),t._v(" "),s("el-footer",{attrs:{id:"footer"}},[s("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"current-page":t.page},on:{"current-change":function(e){return t.getCaseSet(t.page)},"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e}}})],1)],1)},staticRenderFns:[]};var Mt=a("VU/8")(Jt,Gt,!1,function(t){a("GvRF")},"data-v-42f1cb5e",null).exports,Yt={name:"TaskResult",methods:{lookDetail:function(t){var e=this;this.setResultShow=!0,this.sloading=!0,this.$axios.get("/apis/taskResult/"+t+"/detail").then(function(t){200===t.data.code?e.setResults=t.data.data:e.$notify({title:"操作失败",type:"warning",message:t.data.msg}),e.sloading=!1}).catch(function(t){e.$notify({title:"操作失败",type:"error",message:t})})},lookCaseDetail:function(t){this.drawer=!0,this.executedRows=JSON.parse(this.setResults[t].caseResults)},lookLogs:function(t){this.logs=t.replace(/\n/g,"<br/>"),this.logView=!0},closeTaskDetail:function(){this.setResults=[],this.setResultShow=!1},handleSelectionChange:function(t){this.tasks=t},getTaskResults:function(t){var e=this;this.page=t,this.loading=!0,this.$axios.get("/apis/taskResult/"+t,{params:{taskName:this.search_val,status:this.status}}).then(function(t){200===t.data.code?(e.taskLists=t.data.data.list,e.total=t.data.data.total):e.$notify({title:"操作失败",type:"warning",message:t.data.msg}),e.loading=!1}).catch(function(t){e.$notify({title:"操作失败",type:"error",message:t})})}},data:function(){return{page:1,total:0,search_val:"",projects:[],taskLists:[],status:"",loading:!1,items:["","success","info","danger","warning"],dialogVisible:!1,tasks:[],setResultShow:!1,setResults:[],sloading:!1,drawer:!1,logView:!1,logs:"",executedRows:[]}},components:{},created:function(){this.getTaskResults(1)}},Xt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"case"}},[s("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/main"}}},[t._v("首页")]),t._v(" "),s("el-breadcrumb-item",[t._v("任务管理")]),t._v(" "),s("el-breadcrumb-item",[t._v("执行记录管理")])],1),t._v(" "),s("div",{staticClass:"header"},[s("span",[s("el-input",{attrs:{placeholder:"请输入任务名称","prefix-icon":"el-icon-search"},model:{value:t.search_val,callback:function(e){t.search_val=e},expression:"search_val"}})],1),t._v(" "),s("span",[s("el-select",{attrs:{clearable:"",placeholder:"请选择状态"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[s("el-option",{attrs:{label:"等待执行",value:0}}),t._v(" "),s("el-option",{attrs:{label:"执行中",value:1}}),t._v(" "),s("el-option",{attrs:{label:"执行完毕",value:2}})],1)],1),t._v(" "),s("span",[s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getTaskResults(1)}}},[t._v("搜索")])],1)]),t._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.taskLists,"max-height":"80%",height:"800","default-sort":{prop:"createTime",order:"descending"}},on:{"selection-change":t.handleSelectionChange}},[s("div",{staticStyle:{"text-align":"left",margin:"30px"},attrs:{slot:"empty"},slot:"empty"},[s("div",[s("img",{attrs:{src:a("N9nc"),alt:"",width:"140px",height:"140px"}})]),t._v(" "),s("p",[t._v("没有查询到数据呦～")])]),t._v(" "),s("el-table-column",{attrs:{fixed:"left",prop:"taskName",label:"任务名称",width:"200","show-overflow-tooltip":!0}}),t._v(" "),s("el-table-column",{attrs:{prop:"taskResultNum",label:"编号",width:"200","show-overflow-tooltip":!0}}),t._v(" "),s("el-table-column",{attrs:{prop:"successNum",label:"成功用例集数",width:"200","show-overflow-tooltip":!0}}),t._v(" "),s("el-table-column",{attrs:{prop:"totalNum",label:"总用例集数",width:"200","show-overflow-tooltip":!0}}),t._v(" "),s("el-table-column",{attrs:{prop:"successRate",label:"成功率",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[""!==t.taskLists[e.$index].successRate?s("span",[t._v(t._s(t.taskLists[e.$index].successRate)+"%")]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"status",label:"执行状态",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.status?s("el-tag",[t._v("等待执行")]):t._e(),t._v(" "),1===e.row.status?s("el-tag",{attrs:{type:"warning"}},[t._v("执行中")]):t._e(),t._v(" "),2===e.row.status?s("el-tag",{attrs:{type:"success"}},[t._v("执行完毕")]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"person",label:"执行人",width:"200"}}),t._v(" "),s("el-table-column",{attrs:{prop:"startTime",label:"开始时间",width:"300"}}),t._v(" "),s("el-table-column",{attrs:{prop:"endTime",label:"结束时间",width:"300"}}),t._v(" "),s("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticStyle:{"margin-bottom":"10px"}},[s("el-button",{attrs:{type:"primary",size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),t.lookDetail(e.row.taskResultId)}}},[t._v("\n            查看详情\n          ")])],1)]}}])})],1),t._v(" "),s("el-dialog",{attrs:{title:"任务执行详情",visible:t.setResultShow},on:{"update:visible":function(e){t.setResultShow=e},close:t.closeTaskDetail}},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.sloading,expression:"sloading"}],attrs:{data:t.setResults,stripe:"",height:"500"}},[s("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),t._v(" "),s("el-table-column",{attrs:{property:"setName",label:"用例集名称",width:"200"}}),t._v(" "),s("el-table-column",{attrs:{property:"successNum",label:"成功数"}}),t._v(" "),s("el-table-column",{attrs:{property:"totalNum",label:"执行总数"}}),t._v(" "),s("el-table-column",{attrs:{property:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.status?s("el-tag",{attrs:{type:"danger"}},[t._v("失败")]):t._e(),t._v(" "),1===e.row.status?s("el-tag",{attrs:{type:"success"}},[t._v("成功")]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"primary",size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),t.lookCaseDetail(e.$index)}}},[t._v("\n            查看详情\n          ")])]}}])})],1)],1),t._v(" "),s("el-drawer",{attrs:{title:"用例执行记录",visible:t.drawer,direction:"rtl",size:"60%"},on:{"update:visible":function(e){t.drawer=e}}},[s("el-card",{staticStyle:{margin:"20px",float:"left",width:"100%"},attrs:{shadow:"always"}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.executedRows,stripe:"",height:"800"}},[s("el-table-column",{attrs:{prop:"index",label:"序号",width:"80"}}),t._v(" "),s("el-table-column",{attrs:{prop:"caseName",label:"用例名称",width:"400"}}),t._v(" "),s("el-table-column",{attrs:{prop:"status",label:"执行状态",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.status?s("el-tag",{attrs:{type:"success"}},[t._v("成功")]):s("el-tag",{attrs:{type:"danger"}},[t._v("失败")])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"logs",label:"日志",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"primary",round:"",icon:"el-icon-tickets",size:"mini"},on:{click:function(a){return t.lookLogs(e.row.logs)}}},[t._v("查看")])]}}])})],1)],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"日志详情",visible:t.logView,width:"60%","append-to-body":!0},on:{"update:visible":function(e){t.logView=e}}},[s("div",{domProps:{innerHTML:t._s(t.logs)}}),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.logView=!1}}},[t._v("确 定")])],1)]),t._v(" "),s("el-footer",{attrs:{id:"footer"}},[s("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"current-page":t.page},on:{"current-change":function(e){return t.getTaskResults(t.page)},"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e}}})],1)],1)},staticRenderFns:[]};var Qt=a("VU/8")(Yt,Xt,!1,function(t){a("qbiL")},"data-v-17daa55e",null).exports,Zt={name:"ApiUtil",data:function(){return{activeNameForRequest:"params",activeNameForResponse:"body",contentType:1,raw:"",methodOptions:[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"DELETE",label:"DELETE"}],api:{url:"",method:"GET"},params:[{key:"",value:""}],headers:[{key:"",value:""}],globalHeaders:[{key:"",value:""}],globalCookies:[{key:"",value:""}],formParams:[{key:"",value:""}],urlParams:[{key:"",value:""}],cookies:[{key:"",value:""}],json:"",resJson:"",resContentType:1,resHeaders:"",resCookies:"",statusCode:""}},methods:{addParamKv:function(){this.params.push({key:"",value:""})},delParamKv:function(t){this.params.splice(this.params.indexOf(t),1)},addHeaderKv:function(){this.headers.push({key:"",value:""})},delHeaderKv:function(t){this.headers.splice(this.headers.indexOf(t),1)},addFormParamKv:function(){this.formParams.push({key:"",value:""})},delFormParamKv:function(t){this.formParams.splice(this.formParams.indexOf(t),1)},addUrlParamKv:function(){this.urlParams.push({key:"",value:""})},delUrlParamKv:function(t){this.urlParams.splice(this.urlParams.indexOf(t),1)},addCookieKv:function(){this.cookies.push({key:"",value:""})},delCookieKv:function(t){this.cookies.splice(this.cookies.indexOf(t),1)},sendRequest:function(){var t=this,e={},a={},s={},i={};if(this.resJson={},this.statusCode="",this.raw="",1===this.contentType){for(var o in this.formParams){if(1===this.formParams.length&&""===this.formParams[0].key){e={};break}e[this.formParams[o].key]=this.formParams[o].value}e=f()(e)}else if(2===this.contentType){for(var l in this.urlParams){if(1===this.urlParams.length&&""===this.urlParams[0].key)break;var n=this.urlParams[l].key,r=this.urlParams[l].value;e[n]=r}e=f()(e)}else e=""===this.json?"{}":this.json;for(var c in this.params){if(1===this.params.length&&""===this.params[0].key){a={};break}a[this.params[c].key]=this.params[c].value}for(var d in null!==a&&(a=f()(a)),this.headers){if(1===this.headers.length&&""===this.headers[0].key){s={};break}s[this.headers[d].key]=this.headers[d].value}for(var u in null!==s&&(s=f()(s)),this.cookies){if(1===this.cookies.length&&""===this.cookies[0].key){i={};break}i[this.cookies[u].key]=this.cookies[u].value}null!=i&&(i=f()(i));var p={body:e,contentType:this.contentType,cookie:i,header:s,method:this.api.method,param:a,url:this.api.url};this.$axios.post("/apis/testUtil/testApi",p).then(function(e){if(200===e.data.code){t.$notify({title:"成功",type:"success",message:e.data.msg});try{JSON.parse(e.data.data.responseBody),t.resJson=e.data.data.responseBody,t.resContentType=1}catch(a){t.raw=e.data.data.responseBody,t.resContentType=2}t.resCookies=e.data.data.responseCookie,t.resHeaders=e.data.data.responseHeader,t.statusCode=e.data.data.status}else t.$notify({title:"失败",type:"warning",message:e.data.msg}),t.resContentType=2,t.raw=e.data.data}).catch(function(e){t.$notify({title:"成功",type:"error",message:e})})}},computed:{jsonFormatObject:function(){if(""===this.json)return{};try{return JSON.parse(this.json)}catch(t){return{msg:"JSON格式化错误！"+t}}},resJsonFormatObject:function(){if(""===this.resJson)return{};try{return JSON.parse(this.resJson)}catch(t){return{msg:"JSON格式化错误！"+t}}},resHeaderFormatObject:function(){if(""===this.resJson)return{};try{return JSON.parse(this.resHeaders)}catch(t){return{msg:"JSON格式化错误！"+t}}},resCookieFormatObject:function(){if(""===this.resJson)return{};try{return JSON.parse(this.resCookies)}catch(t){return{msg:"JSON格式化错误！"+t}}}},components:{Code:K}},te={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"text-align":"left"}},[t._m(0),t._v(" "),a("el-input",{attrs:{placeholder:"Enter Request URL"},model:{value:t.api.url,callback:function(e){t.$set(t.api,"url",e)},expression:"api.url"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{slot:"prepend",placeholder:"Request Method"},slot:"prepend",model:{value:t.api.method,callback:function(e){t.$set(t.api,"method",e)},expression:"api.method"}},[a("el-option",{attrs:{label:"GET",value:"GET"}}),t._v(" "),a("el-option",{attrs:{label:"POST",value:"POST"}}),t._v(" "),a("el-option",{attrs:{label:"PUT",value:"PUT"}}),t._v(" "),a("el-option",{attrs:{label:"DELETE",value:"DELETE"}})],1),t._v(" "),a("el-button",{attrs:{slot:"append",type:"primary"},on:{click:t.sendRequest},slot:"append"},[t._v("SEND")])],1),t._v(" "),a("h5",[t._v("Request")]),t._v(" "),a("el-tabs",{staticStyle:{"margin-top":"15px"},attrs:{type:"border-card"},model:{value:t.activeNameForRequest,callback:function(e){t.activeNameForRequest=e},expression:"activeNameForRequest"}},[a("el-tab-pane",{attrs:{label:"Params",name:"params"}},[a("h5",[t._v("Query Params")]),t._v(" "),t._l(t.params,function(e){return a("div",{staticClass:"demo-input-suffix",staticStyle:{"margin-bottom":"10px"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"KEY",size:"small"},model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"param.key"}}),t._v("\n        -\n        "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"VALUE",size:"small"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"param.value"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",round:"",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:t.addParamKv}},[t._v("ADD")]),t._v(" "),1!==t.params.length?a("el-button",{attrs:{type:"danger",round:"",icon:"el-icon-remove-outline",size:"small"},on:{click:function(a){return t.delParamKv(e)}}},[t._v("DELETE")]):t._e()],1)})],2),t._v(" "),a("el-tab-pane",{attrs:{label:"Headers",name:"headers"}},[a("h5",[t._v("Headers")]),t._v(" "),t._l(t.headers,function(e){return a("div",{staticClass:"demo-input-suffix",staticStyle:{"margin-bottom":"10px"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"KEY",size:"small"},model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"header.key"}}),t._v("\n        -\n        "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"VALUE",size:"small"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"header.value"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",round:"",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:t.addHeaderKv}},[t._v("ADD")]),t._v(" "),1!==t.headers.length?a("el-button",{attrs:{type:"danger",round:"",icon:"el-icon-remove-outline",size:"small"},on:{click:function(a){return t.delHeaderKv(e)}}},[t._v("DELETE")]):t._e()],1)})],2),t._v(" "),a("el-tab-pane",{attrs:{label:"Cookies",name:"cookies"}},[a("h5",[t._v("Cookies")]),t._v(" "),t._l(t.cookies,function(e){return a("div",{staticClass:"demo-input-suffix",staticStyle:{"margin-bottom":"10px"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"KEY",size:"small"},model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"cookie.key"}}),t._v("\n        -\n        "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"VALUE",size:"small"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"cookie.value"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",round:"",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:t.addCookieKv}},[t._v("ADD")]),t._v(" "),1!==t.cookies.length?a("el-button",{attrs:{type:"danger",round:"",icon:"el-icon-remove-outline",size:"small"},on:{click:function(a){return t.delCookieKv(e)}}},[t._v("DELETE")]):t._e()],1)})],2),t._v(" "),"GET"!==t.api.method?a("el-tab-pane",{attrs:{label:"Body",name:"body"}},[a("el-radio-group",{model:{value:t.contentType,callback:function(e){t.contentType=e},expression:"contentType"}},[a("el-radio",{attrs:{label:1}},[t._v("x-www-form-urlencoded")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("form-data")]),t._v(" "),a("el-radio",{attrs:{label:3}},[t._v("json")])],1),t._v(" "),t._l(t.formParams,function(e){return 1===t.contentType?a("div",{staticClass:"demo-input-suffix",staticStyle:{"margin-top":"20px"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"KEY",size:"small"},model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"formParam.key"}}),t._v("\n        -\n        "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"VALUE",size:"small"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"formParam.value"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",round:"",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:t.addFormParamKv}},[t._v("ADD")]),t._v(" "),1!==t.formParams.length?a("el-button",{attrs:{type:"danger",round:"",icon:"el-icon-remove-outline",size:"small"},on:{click:function(a){return t.delFormParamKv(e)}}},[t._v("DELETE")]):t._e()],1):t._e()}),t._v(" "),t._l(t.urlParams,function(e){return 2===t.contentType?a("div",{staticClass:"demo-input-suffix",staticStyle:{"margin-top":"20px"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"KEY",size:"small"},model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"urlParam.key"}}),t._v("\n        -\n        "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"VALUE",size:"small"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"urlParam.value"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",round:"",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:t.addUrlParamKv}},[t._v("ADD")]),t._v(" "),1!==t.urlParams.length?a("el-button",{attrs:{type:"danger",round:"",icon:"el-icon-remove-outline",size:"small"},on:{click:function(a){return t.delUrlParamKv(e)}}},[t._v("DELETE")]):t._e()],1):t._e()}),t._v(" "),3===t.contentType?a("div",{staticClass:"demo-input-suffix",staticStyle:{"margin-top":"20px"}},[a("Code",{attrs:{mime:"python"},model:{value:t.json,callback:function(e){t.json=e},expression:"json"}}),t._v(" "),a("json-viewer",{staticStyle:{height:"auto",width:"100%",float:"right"},attrs:{value:this.jsonFormatObject,"expand-depth":5,copyable:"",boxed:"",sort:""}})],1):t._e()],2):t._e()],1),t._v(" "),a("h5",[t._v("Response")]),t._v(" "),a("div",{staticStyle:{"text-align":"right","font-size":"small"}},[a("span",{staticStyle:{"margin-right":"30px"}},[t._v("Status: "),200===t.statusCode?a("strong",{staticStyle:{color:"#5daf34"}},[t._v(t._s(t.statusCode))]):a("strong",{staticStyle:{color:"#dd6161"}},[t._v(t._s(t.statusCode))])])]),t._v(" "),a("el-tabs",{staticStyle:{"margin-top":"15px"},attrs:{type:"border-card"},model:{value:t.activeNameForResponse,callback:function(e){t.activeNameForResponse=e},expression:"activeNameForResponse"}},[a("el-tab-pane",{attrs:{label:"Body",name:"body"}},[a("el-radio-group",{model:{value:t.resContentType,callback:function(e){t.resContentType=e},expression:"resContentType"}},[a("el-radio",{attrs:{label:1}},[t._v("json")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("raw")])],1),t._v(" "),1===t.resContentType?a("div",{staticClass:"demo-input-suffix",staticStyle:{"margin-top":"20px"}},[a("Code",{attrs:{mime:"python",readOnly:!0},model:{value:t.resJson,callback:function(e){t.resJson=e},expression:"resJson"}}),t._v(" "),a("json-viewer",{staticStyle:{height:"auto",width:"100%",float:"right"},attrs:{value:this.resJsonFormatObject,"expand-depth":5,copyable:"",boxed:"",sort:""}})],1):t._e(),t._v(" "),2===t.resContentType?a("div",{staticClass:"demo-input-suffix",staticStyle:{"margin-top":"20px"}},[a("Code",{attrs:{mime:"python",readOnly:!0},model:{value:t.raw,callback:function(e){t.raw=e},expression:"raw"}})],1):t._e()],1),t._v(" "),a("el-tab-pane",{attrs:{label:"Headers",name:"headers"}},[a("Code",{attrs:{mime:"python",readOnly:!0},model:{value:t.resHeaders,callback:function(e){t.resHeaders=e},expression:"resHeaders"}}),t._v(" "),a("json-viewer",{staticStyle:{height:"auto",width:"100%",float:"right"},attrs:{value:this.resHeaderFormatObject,"expand-depth":5,copyable:"",boxed:"",sort:""}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"Cookies",name:"cookies"}},[a("Code",{attrs:{mime:"python",readOnly:!0},model:{value:t.resCookies,callback:function(e){t.resCookies=e},expression:"resCookies"}}),t._v(" "),a("json-viewer",{staticStyle:{height:"auto",width:"100%",float:"right"},attrs:{value:this.resCookieFormatObject,"expand-depth":5,copyable:"",boxed:"",sort:""}})],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{"margin-bottom":"30px"}},[e("img",{staticStyle:{width:"30px",height:"30px","border-radius":"50%",float:"right"},attrs:{src:a("k/M1")}}),e("h3",{staticStyle:{display:"inline"}},[this._v("TeemoPost")])])}]},ee=a("VU/8")(Zt,te,!1,null,null,null).exports,ae={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"case"}},[s("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/main"}}},[t._v("首页")]),t._v(" "),s("el-breadcrumb-item",[t._v("配置管理")]),t._v(" "),s("el-breadcrumb-item",[t._v("钉钉通知")])],1),t._v(" "),s("div",{staticClass:"header"},[s("span",[s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.showDing("add","")}}},[t._v("新增钉钉机器人")])],1)]),t._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.dingLists,"max-height":"80%",height:"800","default-sort":{prop:"createTime",order:"descending"}},on:{"selection-change":t.handleSelectionChange}},[s("div",{staticStyle:{"text-align":"left",margin:"30px"},attrs:{slot:"empty"},slot:"empty"},[s("div",[s("img",{attrs:{src:a("N9nc"),alt:"",width:"140px",height:"140px"}})]),t._v(" "),s("p",[t._v("没有查询到数据呦～")])]),t._v(" "),s("el-table-column",{attrs:{fixed:"left",prop:"webhook",label:"webhook",width:"500"}}),t._v(" "),s("el-table-column",{attrs:{prop:"desc",label:"描述",width:"400"}}),t._v(" "),s("el-table-column",{attrs:{prop:"keysWord",label:"keyWord",width:"200"}}),t._v(" "),s("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticStyle:{"margin-bottom":"10px"}},[s("el-button",{attrs:{size:"mini",type:"success"},nativeOn:{click:function(a){return a.preventDefault(),t.openTest(e.row.descId)}}},[t._v("\n            调试\n          ")]),t._v(" "),s("el-button",{attrs:{size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),t.showDing("edit",e.row.descId)}}},[t._v("\n            编辑\n          ")]),t._v(" "),s("el-button",{attrs:{size:"mini",type:"danger"},nativeOn:{click:function(a){return a.preventDefault(),t.deleteDing(e.row.descId)}}},[t._v("\n            删除\n          ")])],1)]}}])})],1),t._v(" "),s("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dingShow},on:{"update:visible":function(e){t.dingShow=e},close:t.closeDing}},[s("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[s("el-form-item",{attrs:{label:"webhook","label-width":t.formLabelWidth,prop:"webhook"}},[s("el-input",{attrs:{placeholder:"请输入webhook",autocomplete:"off"},model:{value:t.form.webhook,callback:function(e){t.$set(t.form,"webhook",e)},expression:"form.webhook"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"机器人描述","label-width":t.formLabelWidth,prop:"desc"}},[s("el-input",{attrs:{placeholder:"请输入机器人描述",autocomplete:"off",type:"textarea",autosize:{minRows:3,maxRows:5}},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"keyWord","label-width":t.formLabelWidth,prop:"keysWord"}},[s("el-input",{attrs:{placeholder:"请输入keyWord",autocomplete:"off"},model:{value:t.form.keysWord,callback:function(e){t.$set(t.form,"keysWord",e)},expression:"form.keysWord"}})],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveDing(t.button)}}},[t._v("保 存")]),t._v(" "),s("el-button",{on:{click:t.closeDing}},[t._v("取 消")])],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"机器人调试",visible:t.testShow},on:{"update:visible":function(e){t.testShow=e},close:t.closeTestDing}},[s("el-form",{ref:"form2",attrs:{model:t.form2,rules:t.rules2}},[s("el-form-item",{attrs:{label:"消息内容","label-width":t.formLabelWidth,prop:"content"}},[s("el-input",{attrs:{placeholder:"请输入消息内容",autocomplete:"off",type:"textarea",autosize:{minRows:3,maxRows:5}},model:{value:t.form2.content,callback:function(e){t.$set(t.form2,"content",e)},expression:"form2.content"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"需要@的手机号","label-width":t.formLabelWidth,prop:"atMobiles"}},[s("el-input",{attrs:{placeholder:"请输入需要@的手机号(多个手机号用英文分号隔开)",autocomplete:"off"},model:{value:t.form2.atMobiles,callback:function(e){t.$set(t.form2,"atMobiles",e)},expression:"form2.atMobiles"}})],1),t._v(" "),s("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"是否@全部","label-width":t.formLabelWidth,prop:"isAtAll"}},[s("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.form2.isAtAll,callback:function(e){t.$set(t.form2,"isAtAll",e)},expression:"form2.isAtAll"}})],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"success"},on:{click:t.testDing}},[t._v("发 送")]),t._v(" "),s("el-button",{on:{click:t.closeTestDing}},[t._v("取 消")])],1)],1)],1)},staticRenderFns:[]};var se=a("VU/8")({name:"TaskResult",methods:{showDing:function(t,e){var a=this;this.dialogTitle=("add"===t?"新增":"编辑")+"钉钉机器人",this.button=t,"edit"===t&&this.$axios.get("/apis/Dingding/"+e).then(function(t){200===t.data.code?a.form={descId:t.data.data.descId,desc:t.data.data.desc,webhook:t.data.data.webhook,keysWord:t.data.data.keysWord}:a.$notify({title:"操作失败",type:"warning",message:t.data.msg}),a.loading=!1}).catch(function(t){a.$notify({title:"操作失败",type:"error",message:t})}),this.dingShow=!0},openTest:function(t){var e=this;this.testShow=!0,this.$axios.get("/apis/Dingding/"+t).then(function(t){200===t.data.code?e.dingId=t.data.data.descId:e.$notify({title:"操作失败",type:"warning",message:t.data.msg}),e.loading=!1}).catch(function(t){e.$notify({title:"操作失败",type:"error",message:t})})},testDing:function(){var t=this,e={isAtAll:this.form2.isAtAll,content:this.form2.content,atMobiles:this.form2.atMobiles.split(";")};this.$refs.form2.validate(function(a){a&&t.$axios.post("/apis/Dingding/sendText/"+t.dingId,e).then(function(e){200===e.data.code?t.$notify({title:"操作成功",type:"success",message:e.data.msg}):t.$notify({title:"操作失败",type:"warning",message:e.data.msg}),t.loading=!1})})},closeDing:function(){this.$refs.form.resetFields(),this.dingShow=!1},closeTestDing:function(){this.$refs.form2.resetFields(),this.testShow=!1},getDings:function(){var t=this;this.loading=!0,this.$axios.get("/apis/Dingding/list").then(function(e){200===e.data.code?t.dingLists=e.data.data:t.$notify({title:"操作失败",type:"warning",message:e.data.msg}),t.loading=!1}).catch(function(e){t.$notify({title:"操作失败",type:"error",message:e})})},saveDing:function(t){var e=this;"add"===t?this.$refs.form.validate(function(t){t&&e.$axios.post("/apis/Dingding/",e.form).then(function(t){200===t.data.code?(e.$notify({title:"操作成功",type:"success",message:t.data.msg}),e.closeDing(),e.getDings()):e.$notify({title:"操作失败",type:"warning",message:t.data.msg}),e.loading=!1}).catch(function(t){e.$notify({title:"操作失败",type:"error",message:t})})}):this.$refs.form.validate(function(t){t&&e.$axios.put("/apis/Dingding/update/",e.form).then(function(t){200===t.data.code?(e.$notify({title:"操作成功",type:"success",message:t.data.msg}),e.closeDing(),e.getDings()):e.$notify({title:"操作失败",type:"warning",message:t.data.msg}),e.loading=!1}).catch(function(t){e.$notify({title:"操作失败",type:"error",message:t})})})},deleteDing:function(t){var e=this;this.$confirm("确定要删除吗？").then(function(a){e.$axios.delete("/apis/Dingding/"+t).then(function(t){200===t.data.code?e.$notify({title:"操作成功",type:"success",message:t.data.msg}):e.$notify({title:"操作失败",type:"warning",message:t.data.msg}),e.getDings()}).catch(function(t){e.$notify({title:"操作失败",type:"error",message:t})})})}},data:function(){return{dingId:"",dialogTitle:"",button:"",testShow:!1,rules:{webhook:[{required:!0,message:"请输入webhook",trigger:"change"}],keysWord:[{required:!0,message:"请输入keyWord",trigger:"change"}]},rules2:{content:[{required:!0,message:"请输入消息内容",trigger:"change"}]},page:1,total:0,search_val:"",projects:[],dingLists:[],status:"",loading:!1,items:["","success","info","danger","warning"],dialogVisible:!1,dingShow:!1,form:{desc:"",webhook:"",keysWord:""},form2:{isAtAll:!1,content:"",atMobiles:""},formLabelWidth:"130px"}},components:{},created:function(){this.getDings()}},ae,!1,function(t){a("9LBb")},"data-v-8b3cc226",null).exports;s.default.use(m.a);var ie=new m.a({mode:"hash",routes:[{path:"/",name:"login",component:b},{path:"/main",name:"main",component:z,meta:{tabname:"主页",requireAuth:!0}},{path:"/project",name:"project",component:N,meta:{tabname:"项目管理",requireAuth:!0}},{path:"/database/config",name:"database",component:L,meta:{tabname:"数据源管理",requireAuth:!0}},{path:"/database/script",name:"script",component:Y,meta:{tabname:"脚本管理",requireAuth:!0}},{path:"/mind",name:"Mind",component:Z,meta:{tabname:"脑图管理",requireAuth:!0}},{path:"/autoCase",name:"Case",component:ht,meta:{tabname:"自动化用例集管理",requireAuth:!0}},{path:"/task",name:"Task",component:kt,meta:{tabname:"普通任务管理",requireAuth:!0}},{path:"/timingTask",name:"TimingTask",component:Mt,meta:{tabname:"定时任务管理",requireAuth:!0}},{path:"/taskResult",name:"TaskResult",component:Qt,meta:{tabname:"执行记录",requireAuth:!0}},{path:"/apiUtil",name:"ApiUtil",component:ee,meta:{tabname:"TeemoPost",requireAuth:!0}},{path:"/dingTalk",name:"dingTalk",component:se,meta:{tabname:"钉钉通知",requireAuth:!0}}]}),oe=a("zL8q"),le=a.n(oe),ne=(a("tvR6"),a("mtWM")),re=a.n(ne),ce=a("NYxO");s.default.use(ce.a);var de={addcaseshow:!1,addprojectshow:!1,addenvshow:!1,editenvshow:!1,projectdetailshow:!1,editprojectshow:!1,adddatabaseshow:!1,editdatabaseshow:!1,addscriptshow:!1,editscriptshow:!1,addcasesetshow:!1,editcasesetshow:!1,addcaseforapishow:!1,editcaseforapishow:!1,addtaskshow:!1,edittaskshow:!1,addtimingtaskshow:!1,edittimingtaskshow:!1,envList:[],envDetail:{id:"",envId:"",envName:"",host:"",port:""},projectDetail:{id:"",envList:[],name:""},databaseDetail:{},scriptDetail:{},caseSetDetail:{},caseSetInfo:{},caseInfo:{},taskDetail:{},timingTaskDetail:{},worktab:{list:[{name:"main",tabname:"主页",path:"/main"}],current:{name:"main",tabname:"主页",path:"/main"}},closingPage:""},ue={changeAddDataBaseShow:function(t,e){t.adddatabaseshow=e},changeEditDataBaseShow:function(t,e){t.editdatabaseshow=e},changeAddProjectShow:function(t,e){t.addprojectshow=e},changeAddEnvShow:function(t,e){t.addenvshow=e},changeEditEnvShow:function(t,e){t.editenvshow=e},changeProjectDetailShow:function(t,e){t.projectdetailshow=e},changeEditProjectShow:function(t,e){t.editprojectshow=e},changeAddScriptShow:function(t,e){t.addscriptshow=e},changeEditScriptShow:function(t,e){t.editscriptshow=e},changeAddCaseSetShow:function(t,e){t.addcasesetshow=e},changeAddCaseShow:function(t,e){t.addcaseshow=e},changeEditCaseSetShow:function(t,e){t.editcasesetshow=e},changeAddcaseForApiShow:function(t,e){t.addcaseforapishow=e},changeEditcaseForApiShow:function(t,e){t.editcaseforapishow=e},changeAddTaskShow:function(t,e){t.addtaskshow=e},changeEditTaskShow:function(t,e){t.edittaskshow=e},changeAddTimingTaskShow:function(t,e){t.addtimingtaskshow=e},changeEditTimingTaskShow:function(t,e){t.edittimingtaskshow=e},appendEnv:function(t,e){t.envList.push(e)},rmEnvById:function(t,e){t.envList.splice(e,1)},setEnvList:function(t,e){t.envList=e},clearEnvList:function(){de.envList.splice(0,de.envList.length)},editEnv:function(t,e){t.envList.splice(e.id,1,{envId:e.envId,envName:e.envName,host:e.host,port:e.port}),console.log(t.envList)},setEnvDetail:function(t,e){t.envDetail=e},setCaseSetDetail:function(t,e){t.caseSetDetail=e},setProjectDetail:function(t,e){t.projectDetail={id:e.pid,name:e.pname,envList:e.envs}},setDatabaseDetail:function(t,e){t.databaseDetail=e},setScriptDetail:function(t,e){t.scriptDetail=e},setCaseSetInfo:function(t,e){t.caseSetInfo=e},setCaseInfo:function(t,e){t.caseInfo=e},setTaskDetail:function(t,e){t.taskDetail=e},setTimingTaskDetail:function(t,e){t.timingTaskDetail=e},worktabRemove:function(t,e){var a=t.worktab.list.findIndex(function(t){return t.name===e});a>-1&&(t.closingPage=t.worktab.list[a].name,t.worktab.list.splice(a,1)),e===t.worktab.current.name&&ie.back()},worktabRoute:function(t,e){var a=t.worktab.list.findIndex(function(t){return t.name===e.to.name});a>-1?t.worktab.current=t.worktab.list[a]:(t.worktab.list.push(e.to),t.worktab.current=e.to),t.closingPage=""}},pe=new ce.a.Store({state:de,mutations:ue,getters:{getEnvList:function(t){return t.envList},getProjectDetail:function(t){return t.projectDetail},getCaseSetInfo:function(t){return t.caseSetInfo}},actions:{worktabRemove:function(t,e){(0,t.commit)("worktabRemove",e)},worktabRoute:function(t,e){(0,t.commit)("worktabRoute",e)}}}),me=a("vO7p"),he=a.n(me),fe=a("R0ti"),ve=a.n(fe),ge=a("F4nb");s.default.config.productionTip=!1,s.default.use(he.a),s.default.use(le.a),s.default.use(ve.a),s.default.use(ge.a),s.default.use(F.a),s.default.prototype.$axios=re.a,re.a.defaults.timeout=1e4,re.a.defaults.withCredentials=!0,s.default.prototype.$websockerUrl="ws://localhost:8096/temo/websocket/",ie.beforeEach(function(t,e,a){t.meta.requireAuth?null!==localStorage.getItem("userInfo")?(a(),pe.dispatch("worktabRoute",{to:{name:t.name?t.name:"",tabname:t.meta&&t.meta.tabname?t.meta.tabname:"",path:t.path},from:{name:e.name?e.name:"",tabname:e.meta&&e.meta.tabname?e.meta.tabname:"",path:e.path}})):a({path:"/",query:{redirect:t.fullPath}}):a()}),re.a.interceptors.response.use(function(t){return t},function(t){-1!==t.toString().indexOf("403")&&s.default.prototype.$alert("你的token已失效，请重新登入","超时提醒").then(function(){ie.push("/"),localStorage.removeItem("userInfo")})}),new s.default({el:"#app",router:ie,store:pe,data:{return:{jsonData:{total:25,limit:10,skip:0,links:{previous:void 0,next:function(){}}}}},components:{App:p},template:"<App/>"})},PsxY:function(t,e){},SYXr:function(t,e){},"Tp/Z":function(t,e){},VDpJ:function(t,e){},Vq7d:function(t,e){},VtmL:function(t,e,a){t.exports=a.p+"static/img/login.0196aaf.jpg"},hD67:function(t,e){},"hU/K":function(t,e){},iNtw:function(t,e){},iqS3:function(t,e){},"jF+Z":function(t,e){},"k/M1":function(t,e,a){t.exports=a.p+"static/img/postTeemo.9cb2df6.png"},madm:function(t,e){},myO6:function(t,e){},nzt7:function(t,e){},oxN3:function(t,e){},p7hB:function(t,e){},qbiL:function(t,e){},qeQr:function(t,e){},spg9:function(t,e){},tvR6:function(t,e){},vX90:function(t,e){},zsJu:function(t,e){}},["NHnr"]);